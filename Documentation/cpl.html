<!DOCTYPE html>
<html lang=en>
<head>
  <meta charset="utf-8">
  <title>CPL Reference Manual</title>
  <meta name="author" content="Paolo Luchini">
  <meta name="copyright" content="Copyright 2001-2020 Paolo Luchini">
  <meta name="description" content="Language reference manual for CPL, a programming language designed and developed by Paolo Luchini during 1993-2023. CPL has bounds-checked arrays, subarray selections transparent to structure fields, overloaded functions, optional parameters, structured arrays, parentheses, brackets and braces used like in mathematics. Offered for download are an incremental, extensible compiler, interactive interpreter and ide text editor. Extensions include matrix operations, gnuplot graphics and symbolic math manipulation.">
  <meta name="keywords" content="cpl, CPL, cplcode, CPLcode, statement, declaration, control statement, module, function, subroutine, optional parameter, bounds-checked, array, subarray, structure, structured array, matrix, symbolic math, symbolic manipulation, gnuplot, plotting, numerical, scientific, computation, computational, code, program, programmer, programming language, incremental, extensible, source-to-source, compiler, compiler-compiler, interpreter, compiler-interpreter, ide, text editor, fri, FRI, make, interactive, edit">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="author" href="https://CPLcode.net/Paolo.Luchini">
  <link rel="author" href="https://scholar.google.com/citations?user=thlSP34AAAAJ">
  <link rel="stylesheet" href="../singlecol.css">
  <style>
    .page {
      display:none;
    }
    .page:target {
      display: block;
      white-space: pre-wrap;
      }
    th {
      text-align:left;
    }
    td:first-child {
      padding-right:0.5em;
    }
    .filter {
      width:1.6em;
    }
    tr:first-child:not(:nth-last-child(n+12)) th input {
      display:none;
    }
</style>
<script>
  function tsearch() {
    // Declare variables
    var target, input, filter, table, tr, td, i, txtValue;
    target=document.getElementById(location.hash.substring(1));
    table = target.getElementsByTagName("table")[0];
    if(table) {
      input = table.getElementsByTagName("input")[0];
      filter = input.value.toUpperCase();
      tr = table.getElementsByTagName("tr");
    
      // Loop through all table rows, and hide those that don't match the search query
      for (i = 0; i < tr.length; i++) {
        td = tr[i].getElementsByTagName("td")[0];
        if (td) {
          txtValue = td.textContent || td.innerText;
          if (txtValue.toUpperCase().indexOf(filter) == 0) {
            tr[i].style.display = "";
          } else {
            tr[i].style.display = "none";
          }
        }
      }
    }
  }
  // ensure that Top page is loaded
  if (document.location.hash == "") {document.location.hash="#Top";}
</script>
<link rel="canonical" href="https://CPLcode.net/Documentation/cpl.html">
</head>
<body translate="no"><a href="../"><img id=seal src="../images/CPL-logo.png" alt="CPL"></a><div>

</div><div class=page id="Top">
Page: (cpl)Top,  Next: <a href="#Keyword-Index">Keyword Index</a>, Up: <a href="../">CPLcode.net</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h1>CPL Reference Manual</h1>
Documentation for the CPL programming language and its compiler, June 2024. Printable and citable 2020 version is at <a href="http://arxiv.org/abs/2012.12143">arxiv.org/abs/2012.12143</a> . 

  CPL = Concealed Pointer Lookup
  CPL = Coactive Parameter Lists
  CPL = Consistent Procedure Linkage
  CPL = Compiler and Programming Language
  CPL = Conceived by Paolo Luchini

<nav><table>
<tr><th>Menu: <input autocomplete="off" class="filter" type="text" onkeyup="tsearch()" onfocus="this.value='';tsearch()" placeholder="a-z" title="Filter menu items by initials"></th><th></th></tr>
<tr><td colspan="2"> </td></tr>
<tr><td><a href="#Installation">Installation</a>:</td><td>Directory structure</td></tr>
<tr><td><a href="#Syntax">Syntax</a>:</td><td>Language syntax overview</td></tr>
<tr><td><a href="#cpl">cpl</a>:</td><td>Compilation tools and their usage</td></tr>
<tr><td><a href="#cpl-i">cpl i</a>:</td><td>Interactive CPL</td></tr>
<tr><td><a href="editor.html#Top">(editor)Top</a>:</td><td>development text editor with word and syntax completion</td></tr>
<tr><td><a href="#Library">Library</a>:</td><td>Ready to USE library of CPL modules</td></tr>
<tr><td><a href="#Keyword-Index">Keyword Index</a>:</td><td>Keyword Index</td></tr>
</table></nav>

</div><div class=page id="Keyword-Index">
Page: (cpl)Keyword Index,  Next: <a href="#Installation">Installation</a>,  Prev: <a href="#Top">Top</a>,  Up: <a href="#Top">Top</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h2>Keyword index</h2>
<nav><table>
<tr><th>Menu: <input autocomplete="off" class="filter" type="text" onkeyup="tsearch()" onfocus="this.value='';tsearch()" placeholder="a-z" title="Filter menu items by initials"></th><th></th></tr>
<tr><td colspan="2"> </td></tr>
<tr><td><a href="#ABS">ABS</a>:</td><td>absolute value</td></tr>
<tr><td><a href="#ALL">ALL</a>:</td><td>loop specifier</td></tr>
<tr><td><a href="#AND">AND</a>:</td><td>boolean AND</td></tr>
<tr><td><a href="#MAX">ARGMAX:MAX</a>:</td><td>argument for maximum, function or looping operator</td></tr>
<tr><td><a href="#MIN">ARGMIN:MIN</a>:</td><td>argument for minimum, function or looping operator</td></tr>
<tr><td><a href="#ARRAY">ARRAY</a>:</td><td>subscripted arrays</td></tr>
<tr><td><a href="#ASK">ASK</a>:</td><td>console prompting and reading</td></tr>
<tr><td><a href="#Builtin">ARG:Builtin</a>:</td><td>argument of a complex number</td></tr>
<tr><td><a href="#Builtin">ATAN:Builtin</a>:</td><td>arctangent</td></tr>
<tr><td><a href="#BINARY">BINARY</a>:</td><td>binary format input/output</td></tr>
<tr><td><a href="#Bitwise">BITAND:Bitwise</a>:</td><td>boolean operator</td></tr>
<tr><td><a href="#Bitwise">BITNOT:Bitwise</a>:</td><td>boolean operator</td></tr>
<tr><td><a href="#Bitwise">BITOR:Bitwise</a>:</td><td>boolean operator</td></tr>
<tr><td><a href="#Bitwise">BITXOR:Bitwise</a>:</td><td>boolean operator</td></tr>
<tr><td><a href="#BOOLEAN">BOOLEAN</a>:</td><td>primitive type declarator</td></tr>
<tr><td><a href="#BY">BY</a>:</td><td>used in FOR, READ, WRITE</td></tr>
<tr><td><a href="#C-SECTION">C SECTION</a>:</td><td>transparent C source code inclusion</td></tr>
<tr><td><a href="#CASE">CASE</a>:</td><td>multiple-choice selection</td></tr>
<tr><td><a href="#CASE-LOOP">CASE LOOP</a>:</td><td>multiple-choice loop</td></tr>
<tr><td><a href="#CEILING">CEILING</a>:</td><td>larger or equal integer</td></tr>
<tr><td><a href="#CHAR">CHAR</a>:</td><td>primitive type declarator</td></tr>
<tr><td><a href="#CHARbyCHAR">CHARbyCHAR</a>:</td><td>live keyboard input</td></tr>
<tr><td><a href="#COMMANDLINE">COMMANDLINE</a>:</td><td>command line parameter access</td></tr>
<tr><td><a href="#CONSTANT">CONSTANT</a>:</td><td>value which cannot be altered later in the program</td></tr>
<tr><td><a href="#Builtin">COS:Builtin</a>:</td><td>cosine</td></tr>
<tr><td><a href="#CREATE">CREATE</a>:</td><td>open a file of zero length</td></tr>
<tr><td><a href="symbolic.html#Top">D:(symbolic)Top</a>:</td><td>symbolic differentiation operator</td></tr>
<tr><td><a href="#Builtin">DEC:Builtin</a>:</td><td>Decrement</td></tr>
<tr><td><a href="#WRITE">DEFAULTFORMAT:WRITE</a>:</td><td>default format</td></tr>
<tr><td><a href="#INTEGER-operator">DIV:INTEGER operator</a>:</td><td></td></tr>
<tr><td><a href="#DO">DO</a>:</td><td>conditional and sequential loops</td></tr>
<tr><td><a href="#FOR">DOWN:FOR</a>:</td><td>Loop with decreasing index</td></tr>
<tr><td><a href="#ELSE">ELSE</a>:</td><td>conditionally executed statements</td></tr>
<tr><td><a href="#END">END</a>:</td><td>ends a block</td></tr>
<tr><td><a href="#ENUM">ENUM</a>:</td><td>enumerated type</td></tr>
<tr><td><a href="#Builtin">EOF:Builtin</a>:</td><td>test for end of file</td></tr>
<tr><td><a href="#ERROR">ERROR</a>:</td><td>signal an error and exit or trigger a TRAP</td></tr>
<tr><td><a href="#TRAP">ERRORMESSAGE:TRAP</a>:</td><td>error message string</td></tr>
<tr><td><a href="#EXCEPT">EXCEPT</a>:</td><td>loop specifier</td></tr>
<tr><td><a href="#EXIT">EXIT</a>:</td><td>exit from loop, module or subroutine</td></tr>
<tr><td><a href="#Builtin">EXP:Builtin</a>:</td><td>exponential</td></tr>
<tr><td><a href="#BOOLEAN">FALSE:BOOLEAN</a>:</td><td>value</td></tr>
<tr><td><a href="#FILE">FILE</a>:</td><td>serial file descriptor type</td></tr>
<tr><td><a href="#FLOOR">FLOOR</a>:</td><td>smaller or equal integer</td></tr>
<tr><td><a href="#FLUSH">FLUSH</a>:</td><td>flush a file's write buffer</td></tr>
<tr><td><a href="#FOLLOWS">FOLLOWS</a>:</td><td>Function prototypes</td></tr>
<tr><td><a href="#FOR">FOR</a>:</td><td>loop specifier</td></tr>
<tr><td><a href="#FORTRAN-interface">FORTRANCALL:FORTRAN interface</a>:</td><td></td></tr>
<tr><td><a href="#FORTRAN-interface">FORTRANFUNCTION:FORTRAN interface</a>:</td><td></td></tr>
<tr><td><a href="#FREE">FREE</a>:</td><td>release dynamically allocated memory or file</td></tr>
<tr><td><a href="#FRI-SECTION">FRI SECTION</a>:</td><td>dynamic extension of the language</td></tr>
<tr><td><a href="#FROM">FROM</a>:</td><td>used in READ statements</td></tr>
<tr><td><a href="#FUNCTION">FUNCTION</a>:</td><td>Function declaration</td></tr>
<tr><td><a href="#GAUSS">GAUSS</a>:</td><td>gaussian distributed random REAL number with variance 1</td></tr>
<tr><td><a href="#HI">HI</a>:</td><td>upper bound of an array index</td></tr>
<tr><td><a href="#HI">HI1:HI</a>:</td><td></td></tr>
<tr><td><a href="#HI">HI2:HI</a>:</td><td></td></tr>
<tr><td><a href="#HI">HI3:HI</a>:</td><td></td></tr>
<tr><td><a href="#IF">IF</a>:</td><td>conditionally executed statement</td></tr>
<tr><td><a href="#IN">IN</a>:</td><td>loop specifier</td></tr>
<tr><td><a href="#Builtin">INC:Builtin</a>:</td><td>Increment</td></tr>
<tr><td><a href="#INCLUDE">INCLUDE</a>:</td><td>source file inclusion</td></tr>
<tr><td><a href="#INLINE">INLINE</a>:</td><td>Subroutines or functions as macros</td></tr>
<tr><td><a href="#INPUTREADY">INPUTREADY</a>:</td><td>test for input ready on a file descriptor or stdin</td></tr>
<tr><td><a href="#INTEGER">INTEGER</a>:</td><td>primitive type declarator</td></tr>
<tr><td><a href="#INTO">INTO</a>:</td><td>Pointer arithmetics</td></tr>
<tr><td><a href="#IS">IS</a>:</td><td>type comparison operator</td></tr>
<tr><td><a href="#LENGTH">LENGTH</a>:</td><td>number of elements of an array</td></tr>
<tr><td><a href="#LO">LO</a>:</td><td>lower bound of an array index</td></tr>
<tr><td><a href="#LO">LO1:LO</a>:</td><td></td></tr>
<tr><td><a href="#LO">LO2:LO</a>:</td><td></td></tr>
<tr><td><a href="#LO">LO3:LO</a>:</td><td></td></tr>
<tr><td><a href="#Builtin">LOG:Builtin</a>:</td><td>logarithm</td></tr>
<tr><td><a href="#LOOP">LOOP</a>:</td><td>conditional and sequential loops</td></tr>
<tr><td><a href="#Bitwise">LSHIFTED:Bitwise</a>:</td><td>boolean operator</td></tr>
<tr><td><a href="#MAX">MAX</a>:</td><td>maximum value function or looping operator</td></tr>
<tr><td><a href="#MAXABS">MAXABS</a>:</td><td>maximum absolute value</td></tr>
<tr><td><a href="#MIN">MIN</a>:</td><td>minimum value function or looping operator</td></tr>
<tr><td><a href="#INTEGER-operator">MOD:INTEGER operator</a>:</td><td>INTEGER modulo operator</td></tr>
<tr><td><a href="#MODULE">MODULE</a>:</td><td>separately scoped program block</td></tr>
<tr><td><a href="graphics.html#MOUSEGRAPH">MOUSEGRAPH:(graphics)MOUSEGRAPH</a>:</td><td>starts a new graph with mouse grabbing</td></tr>
<tr><td><a href="#NAME">NAME</a>:</td><td>writing and reading a variable's name</td></tr>
<tr><td><a href="#NEW">NEW</a>:</td><td>dynamically allocate temporary memory space or file</td></tr>
<tr><td><a href="#BOOLEAN">NO:BOOLEAN</a>:</td><td>value</td></tr>
<tr><td><a href="#NORM">NORM</a>:</td><td>squared absolute value</td></tr>
<tr><td><a href="#NOT">NOT</a>:</td><td>boolean NOT</td></tr>
<tr><td><a href="#POINTER">NULL:POINTER</a>:</td><td></td></tr>
<tr><td><a href="#DYNAMIC">DYNAMIC</a>:</td><td>object-oriented features</td></tr>
<tr><td><a href="#Builtin">ODD:Builtin</a>:</td><td>test for odd number</td></tr>
<tr><td><a href="#OF">OF</a>:</td><td>used in ARRAY and CASE</td></tr>
<tr><td><a href="#OPEN">OPEN</a>:</td><td>open a file and associate a file descriptor</td></tr>
<tr><td><a href="#OPERATOR">OPERATOR</a>:</td><td>overloading</td></tr>
<tr><td><a href="#OPTIONAL">OPTIONAL</a>:</td><td>optional function parameters recognized by name</td></tr>
<tr><td><a href="#OR">OR</a>:</td><td>boolean OR</td></tr>
<tr><td><a href="#OpenMP">OpenMP</a>:</td><td>CPL transparent OpenMP directives</td></tr>
<tr><td><a href="parallel.html#Top">PARALLEL MODULE:(parallel)</a>:</td><td>Forking a parallel process</td></tr>
<tr><td><a href="parallel.html#Top">PARALLEL LOOP:(parallel)</a>:</td><td>Simultaneous multiple processes</td></tr>
<tr><td><a href="graphics.html#MOUSEGRAPH">POLLMOUSE:(graphics)MOUSEGRAPH</a>:</td><td>grabs mouse clicks in gnuplot window</td></tr>
<tr><td><a href="graphics.html#PLOT">PLOT:(graphics)PLOT</a>:</td><td>plot a complete curve with default settings</td></tr>
<tr><td><a href="#POINTER">POINTER</a>:</td><td>pointer to a memory address</td></tr>
<tr><td><a href="#POSITION">POSITION</a>:</td><td>read or set a file's current position</td></tr>
<tr><td><a href="#Looping-operator">PRODUCT:Looping operator</a>:</td><td></td></tr>
<tr><td><a href="#Q&A">Q&amp;A</a>:</td><td>Common installation problems and their solution</td></tr>
<tr><td><a href="#RAND">RAND</a>:</td><td>uniformly distributed in (0,1) random REAL number</td></tr>
<tr><td><a href="#READ">READ</a>:</td><td>input from character files and devices</td></tr>
<tr><td><a href="#REAL">REAL</a>:</td><td>primitive type declarator</td></tr>
<tr><td><a href="graphics.html#gnuplot">REALTABLE:(graphics)gnuplot</a>:</td><td>read matrix from table file</td></tr>
<tr><td><a href="#LOOP">REPEAT:LOOP</a>:</td><td></td></tr>
<tr><td><a href="#FUNCTION">RESULT:FUNCTION</a>:</td><td></td></tr>
<tr><td><a href="#FUNCTION">RETURN:FUNCTION</a>:</td><td></td></tr>
<tr><td><a href="#ROUND">ROUND</a>:</td><td>nearest integer</td></tr>
<tr><td><a href="#Bitwise">RSHIFTED:Bitwise</a>:</td><td>boolean operator</td></tr>
<tr><td><a href="parallel.html#Top">SHARED:(parallel)</a>:</td><td>Shared memory among parallel processes</td></tr>
<tr><td><a href="#Builtin">SIN:Builtin</a>:</td><td>sine</td></tr>
<tr><td><a href="#SINGLE">SINGLE</a>:</td><td>primitive type declarator</td></tr>
<tr><td><a href="#TYPE">SIZEOF:TYPE</a>:</td><td>memory occupation</td></tr>
<tr><td><a href="graphics.html#SPLOT">SPLOT:(graphics)SPLOT</a>:</td><td>plot a surface with default settings</td></tr>
<tr><td><a href="#Builtin">SQRT:Builtin</a>:</td><td>square root</td></tr>
<tr><td><a href="#STOP">STOP</a>:</td><td>stop the program</td></tr>
<tr><td><a href="#STORED">STORED</a>:</td><td>random-access files as disk-resident variables</td></tr>
<tr><td><a href="#FORTRAN-interface">STRIDEOF:FORTRAN interface</a>:</td><td></td></tr>
<tr><td><a href="#STRING">STRING</a>:</td><td>strings of characters</td></tr>
<tr><td><a href="#STRUCTURE">STRUCTURE</a>:</td><td>compound type</td></tr>
<tr><td><a href="#STRUCTURED">STRUCTURED</a>:</td><td>ARRAY     may appear as both a structure and an array</td></tr>
<tr><td><a href="#SUBROUTINE">SUBROUTINE</a>:</td><td>Subroutine declaration</td></tr>
<tr><td><a href="#Looping-operator">SUM:Looping operator</a>:</td><td></td></tr>
<tr><td><a href="#Builtin">SWAP:Builtin</a>:</td><td>swap argument values</td></tr>
<tr><td><a href="graphics.html#gnuplot">TABLE:(graphics)gnuplot</a>:</td><td>WRITE TABLE to file using plot syntax</td></tr>
<tr><td><a href="#Builtin">TAN:Builtin</a>:</td><td>tangent</td></tr>
<tr><td><a href="#IF">THEN:IF</a>:</td><td>conditionally executed statement</td></tr>
<tr><td><a href="#TIMES">TIMES</a>:</td><td>loop specifier</td></tr>
<tr><td><a href="#TO">TO</a>:</td><td>used in POINTER, WRITE, FOR</td></tr>
<tr><td><a href="#TRACE">TRACE</a>:</td><td>ON/OFF 	turns execution tracing on/off.</td></tr>
<tr><td><a href="#TRACE">TROFF:TRACE</a>:</td><td>turns execution tracing off.</td></tr>
<tr><td><a href="#TRACE">TRON:TRACE</a>:</td><td>turns execution tracing on.</td></tr>
<tr><td><a href="#subarray">TRANSPOSED:subarray</a>:</td><td>operation to transpose a matrix</td></tr>
<tr><td><a href="#TRAP">TRAP</a>:</td><td>error handling</td></tr>
<tr><td><a href="#BOOLEAN">TRUE:BOOLEAN</a>:</td><td>value</td></tr>
<tr><td><a href="#TYPE">TYPE</a>:</td><td>declaration of a new type identifier</td></tr>
<tr><td><a href="#TYPE">TYPEOF:TYPE</a>:</td><td>extraction pseudo-function</td></tr>
<tr><td><a href="#UNTIL">UNTIL</a>:</td><td>loop terminating condition</td></tr>
<tr><td><a href="#USE">USE</a>:</td><td>separately compiled modules</td></tr>
<tr><td><a href="#VARIABLE">VARIABLE</a>:</td><td>can be re-assigned multiple times</td></tr>
<tr><td><a href="#WHILE">WHILE</a>:</td><td>loop continuation condition</td></tr>
<tr><td><a href="#WITH">WITH</a>:</td><td>implicit access to structure fields and functions</td></tr>
<tr><td><a href="#WRITE">WRITE</a>:</td><td>output to character files and devices</td></tr>
<tr><td><a href="graphics.html#gnuplot">WRITE TABLE:(graphics)gnuplot</a>:</td><td>write table to file using plot syntax</td></tr>
<tr><td><a href="#BOOLEAN">YES:BOOLEAN</a>:</td><td>value</td></tr>
<tr><td><a href="editor.html#full-screen">add:(editor)full-screen</a>:</td><td>Load a file at current cursor position</td></tr>
<tr><td><a href="#anonymous">anonymous</a>:</td><td>STRUCTURE fields</td></tr>
<tr><td><a href="#Parentheses">brackets:Parentheses</a>:</td><td>Usage of round, square and curly brackets</td></tr>
<tr><td><a href="matrix.html#Top">cbmat:(matrix)</a>:</td><td>Complex square and Banded Matrix operations</td></tr>
<tr><td><a href="editor.html#character-set:-utf-8">character set:(editor)character set: utf-8</a>:</td><td></td></tr>
<tr><td><a href="#cpl-i">clear:cpl i</a>:</td><td>remove variable and its associated storage</td></tr>
<tr><td><a href="complex.html#Top">complex:(complex)</a>:</td><td>Complex numbers</td></tr>
<tr><td><a href="#cpl">cpl</a>:</td><td>Compilation tools and their usage</td></tr>
<tr><td><a href="#cpl-i">cpl i</a>:</td><td>Interactive CPL</td></tr>
<tr><td><a href="#cpl-info">cpl info</a>:</td><td>info reading script</td></tr>
<tr><td><a href="#cpl-run">cpl run</a>:</td><td>automatic compilation when needed</td></tr>
<tr><td><a href="#cpl.fri">cpl.fri</a>:</td><td>The CPL-to-C compiler</td></tr>
<tr><td><a href="editor.html#full-screen">edit:(editor)full-screen</a>:</td><td>Open an existing or new file in full-screen editor</td></tr>
<tr><td><a href="#cpl-i-commands">exit:cpl i commands</a>:</td><td>quit interactive cpl</td></tr>
<tr><td><a href="fft.html#Top">fft:(fft)</a>:</td><td>Fast Fourier Transforms</td></tr>
<tr><td><a href="fri.html#Top">fri:(fri)</a>:</td><td>The Formal Rule Interpreter</td></tr>
<tr><td><a href="graphics.html#gnuplot">gnuplot:(graphics)gnuplot</a>:</td><td>plotting primitives rendered through gnuplot</td></tr>
<tr><td><a href="graphics.html#Top">graphics:(graphics)</a>:</td><td>plotting primitives using GNU plotutils</td></tr>
<tr><td><a href="editor.html#hex-editor">hex editor:(editor)hex editor</a>:</td><td>The <q>show bytes</q> option toggles hex editor mode.</td></tr>
<tr><td><a href="#command-interpretation">icpl:command interpretation</a>:</td><td>of a run-time generated CPL statement</td></tr>
<tr><td><a href="#lapack-eigenvalues">lapack-eigenvalues</a>:</td><td>CPL wrapper around Lapack eigenvalue routines</td></tr>
<tr><td><a href="#STRING">literal:STRING</a>:</td><td>constant string of characters</td></tr>
<tr><td><a href="matrix.html#Top">matrix:(matrix)</a>:</td><td>Matrix operations</td></tr>
<tr><td><a href="#mpicpl">mpicpl</a>:</td><td>Compile with MPI options</td></tr>
<tr><td><a href="#nested-functions">nested functions</a>:</td><td>are allowed wherever a declaration is.</td></tr>
<tr><td><a href="graphics.html#nographics">nographics:(graphics)nographics</a>:</td><td>fake plotting package (does nothing)</td></tr>
<tr><td><a href="parallel.html#nonparallel">nonparallel:(parallel)nonparallel</a>:</td><td>fake parallel package (does nothing)</td></tr>
<tr><td><a href="editor.html#options:--editor-options">options:(editor)options:  editor options</a>:</td><td></td></tr>
<tr><td><a href="parallel.html#Top">parallel:(parallel)</a>:</td><td>Parallel computing</td></tr>
<tr><td><a href="graphics.html#gnuplot">plot:(graphics)gnuplot</a>:</td><td>gnuplot plot command with CPL arguments</td></tr>
<tr><td><a href="#cpl-i-commands">quit:cpl i commands</a>:</td><td>exit interactive cpl</td></tr>
<tr><td><a href="matrix.html#Top">rbmat:(matrix)</a>:</td><td>Real square and Banded Matrix operations</td></tr>
<tr><td><a href="editor.html#Top">readline:(editor)</a>:</td><td>Own implementation of readline input editor</td></tr>
<tr><td><a href="#realignment">realignment</a>:</td><td>assignment to an ARRAY of different lower bound</td></tr>
<tr><td><a href="#rtchecks">rtchecks</a>:</td><td>Run Time bounds Checking</td></tr>
<tr><td><a href="editor.html#full-screen">save:(editor)full-screen</a>:</td><td>Save the session log or current screen to a file</td></tr>
<tr><td><a href="graphics.html#gnuplot">set:(graphics)gnuplot</a>:</td><td>set command for gnuplot, passed as is </td></tr>
<tr><td><a href="graphics.html#strlines">strlines:(graphics)strlines</a>:</td><td>Streamline plotting</td></tr>
<tr><td><a href="#subarray">subarray</a>:</td><td>operations to extract a portion of an array</td></tr>
<tr><td><a href="symbolic.html#Top">symbolic:(symbolic)</a>:</td><td>Symbolic differentiation</td></tr>
<tr><td><a href="parallel.html#Top">tcpserver:(parallel)</a>:</td><td>Open basic point-to-point tcp/ip socket</td></tr>
<tr><td><a href="parallel.html#Top">tcpclient:(parallel)</a>:</td><td>Connect to tcp/ip socket from another machine</td></tr>
<tr><td><a href="#variable-size">variable size</a>:</td><td>STRUCTUREs</td></tr>
<tr><td><a href="#ARRAY">&lowast;:ARRAY</a>:</td><td>or multiplication operator</td></tr>
<tr><td><a href="#subarray">&lowast;2:subarray</a>:</td><td>permutation</td></tr>
<tr><td><a href="#subarray">&lowast;3:subarray</a>:</td><td>permutation</td></tr>
<tr><td><a href="#compound-index">&lowast;&lowast;:compound index</a>:</td><td>Also alternative power operator</td></tr>
<tr><td><a href="#Assignment">=:Assignment</a>:</td><td>Also comparison operator</td></tr>
<tr><td><a href="#Deferred-assignment">==:Deferred assignment</a>:</td><td></td></tr>
<tr><td><a href="#REAL-operator">^:REAL operator</a>:</td><td>or postfix POINTER dereference</td></tr>
<tr><td><a href="#Assignment">~:Assignment</a>:</td><td>placeholder for the l.h.s.</td></tr>
<tr><td><a href="#C-SECTION">&lt;&lowast;:C SECTION</a>:</td><td></td></tr>
<tr><td><a href="#STRING">&lt;&lt;:STRING</a>:</td><td></td></tr>
<tr><td><a href="#Comparison">#:Comparison</a>:</td><td></td></tr>
<tr><td><a href="#C-preprocessor">#define:C preprocessor</a>:</td><td></td></tr>
<tr><td><a href="#C-preprocessor">#else:C preprocessor</a>:</td><td></td></tr>
<tr><td><a href="#C-preprocessor">#endif:C preprocessor</a>:</td><td></td></tr>
<tr><td><a href="#C-preprocessor">#if:C preprocessor</a>:</td><td></td></tr>
<tr><td><a href="#C-interface">#include:C interface</a>:</td><td></td></tr>
<tr><td><a href="#C-interface">#includedir:C interface</a>:</td><td></td></tr>
<tr><td><a href="#C-interface">#link:C interface</a>:</td><td></td></tr>
<tr><td><a href="#C-preprocessor">#undef:C preprocessor</a>:</td><td></td></tr>
<tr><td><a href="#Einstein-convention">$:Einstein convention</a>:</td><td></td></tr>
<tr><td><a href="#Comments">!:Comments</a>:</td><td></td></tr>
<tr><td><a href="#?">?</a>:</td><td>interactive cpl help</td></tr>
<tr><td><a href="#Top"></a>:</td><td>:			interactive cpl shell command</td></tr>
<tr><td><a href="#$">$</a>:</td><td>interactive cpl last result</td></tr>
</table></nav>

</div><div class=page id="Installation">
Page: (cpl)Installation, Next: <a href="#Syntax">Syntax</a>, Prev: <a href="#Keyword-Index">Keyword Index</a>, Up: <a href="#Top">Top</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h2>Installation</h2>
This is CPL, a high-level programming language designed and developed by Paolo Luchini. Copyright 1993-2024 Paolo Luchini <a href="http://CPLcode.net">CPLcode.net</a>

The tools that compose the cpl system are located in their own directory, and can be shared among users. This directory is initially named /usr/local/fri in a shared installation or ~/fri in a single user's home, but may be renamed if needed. None of the tools require root privileges nor write permission; it suffices for them to be readable and executable by every interested user.

Documentation in info format can be read through the <q>cpl info</q> command. <q>cpl info &lt;keyword&gt;</q> brings you help about the given CPL keyword.

A CPL source file is a list of statements, and references other files through <q>USE</q> statements. Consistency is enforced. Compilation is achieved under most circumstances by the single command <q>cpl make &lt;file&gt;</q>. If the curl command is available (on Debian, <q>apt install curl</q>), cpl also checks for updates.

The interactive CPL interpreter (if installed) accepts any CPL expression, statement or system command for immediate execution, either on the command line or in a full-screen editor (F1 key, or <q>edit &lt;file&gt;</q>). Type <q>cpl</q> in a terminal to try it, and copy the <q>cpl.desktop</q> shortcut to your Desktop.

<nav><table>
<tr><th>Menu: <input autocomplete="off" class="filter" type="text" onkeyup="tsearch()" onfocus="this.value='';tsearch()" placeholder="a-z" title="Filter menu items by initials"></th><th></th></tr>
<tr><td colspan="2"> </td></tr>
<tr><td><a href="#automatic-updates">automatic updates</a>:</td><td>Automatic updates</td></tr>
<tr><td><a href="#multi-user">multi-user</a>:</td><td>Installation for multiple users</td></tr>
<tr><td><a href="#cpl">cpl</a>:</td><td>Compilation tools and their usage</td></tr>
<tr><td><a href="#Q&A">Q&amp;A</a>:</td><td>Common installation problems and their solution</td></tr>
</table></nav>

</div><div class=page id="automatic-updates">
Page: (cpl)automatic updates, Next: <a href="#multi-user">multi-user</a>, Prev: <a href="#Installation">Installation</a>, Up: <a href="#Installation">Installation</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Automatic updates</h3>
The <a href="#cpl">cpl</a> script checks for updates to itself if the curl program is installed in the system (on Debian, <q>apt install curl</q>) and the network is available. This transparent background check at most takes place once a day, and only while cpl is being run.

If a new version is found, you are offered to upgrade to it. In case the answer is <q>no</q>, you won't be asked again and you will have to download the update manually from the <a href="https://CPLcode.net">CPLcode.net</a> website. If the answer is <q>later</q> (or any other key), you will be prompted again on the next day.

This functionality can be permanently disabled, if undesired, by editing the cpl script and turning ENABLE_UPDATES to <q>NO</q>. 
</div><div class=page id="multi-user">
Page: (cpl)multi-user, Next: <a href="#Q&A">Q&amp;A</a>, Prev: <a href="#automatic-updates">automatic updates</a>, Up: <a href="#Installation">Installation</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Installation for multiple users</h3>
If you unpack the CPL archive while you have write access to the /usr/local/ directory (generally this requires root privileges), the archive gets expanded in /usr/local/fri/ with symbolic links in /usr/local/bin/. This is the simplest way to make CPL simultaneously available to all users of the system.

If you have no access to /usr/local/, or prefer to avoid root privileges even if you can have them, a slightly more complex alternative is to go through the normal single-user installation, make sure that your fri directory and all files in it have read permission for the interested group, and then have every other interested user create their own symbolic links by cd-ing to your fri directory and running ./linksetup.  
</div><div class=page id="Q&A">
Page: (cpl)Q&amp;A, Next: <a href="#Syntax">Syntax</a>, Prev: <a href="#multi-user">multi-user</a>, Up: <a href="#Installation">Installation</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Common installation problems and their solution</h3>
<h4>cpl: command not found</h4>
If the initial setup did not report any errors, and <q>$HOME/fri/cpl</q> or <q>/usr/local/fri/cpl</q> do work, this is likely to be a PATH problem. cpl setup makes commands available to the unix shell by placing symbolic links in either $HOME/bin or /usr/local/bin. Please check that these links have been created and are within reach of your PATH. If you have to modify the PATH manually, you may find it easier to put <q>$HOME/fri</q> or <q>/usr/local/fri</q> there. Please see your shell's instructions (man sh) for how to modify the PATH environment variable.

<h4>My program compiles but does not execute</h4>
Is . in your PATH? Many Linux distributions do not by default have your current working directory in the set of automatically searched file paths. Solutions:
 1) prefix ./ to the name of your executable, as in <q>./Helloworld</q>
 2) modify your PATH environment variable (look up instructions for your shell)
 3) use <a href="#cpl">cpl</a> as your shell (either <q>cpl Helloworld</q> or just <q>cpl</q> and then <q>Helloworld</q>).
  <h4>Why should I be concerned with compilation, anyway?</h4>
If you are more at ease with the single-command execution usually provided by an interpreter, just use <a href="#cpl">cpl</a> as you would your interpreter. Compilation will happen automatically in the background. You can even put <q>#!/usr/bin/env cpl</q> at the top of your CPL source file, and thus make it executable under the unix interpreter convention.

<h4>I want to use a specialized C compiler</h4>
In order to apply a non-default C compiler to your CPL program, define the CC environment variable, either for the duration of the session as in

 	export CC=&lt;myspecialCcompiler&gt;

or for the span of a single command:

 	CC=&lt;myspecialCcompiler&gt; cpl make &lt;myprogram&gt;

With a compiler other than gcc, you may be unable to use <a href="#nested-functions">nested functions</a>. If you want some of the pre-packaged libraries to be recompiled, just include a symbolic link for each in your local working directory as in the example

 	ln -s ~/fri/rbmat.cpl .

The original won't be affected.

<h4>Installation fails with error messages mentioning <q>fenv</q></h4>
fenv.h is the system C library that deals with floating-point exceptions. The default for most compilers is to ignore floating-point errors (such as overflow or division by zero) and continue with the result value set to nan. The CPL default is to stop the program with an error message. Exceptions can be enabled or disabled using the fenv library, but unfortunately not on all systems. Notably on Apple macOS, compilation failures have been observed. If you encounter this error, you may want to retry the installation with option -Dnofenv, as in <q>sh /tmp/unpack-cpl.sh -Dnofenv</q>. If you just want to ignore floating-point errors for the scope of a single program, <q>cpl make &lt;myprogram&gt; -Dnofenv</q>.

<h4>I want a shortcut key to compile my program (or my LaTeX text)</h4>
When you are in the full-screen editor (see <a href="editor.html#full-screen">(editor)full-screen</a>), pressing Run in the menu, or Esc r or Ctrl-r or F2 as shortcuts, compiles and runs the current .cpl file if you are editing one. If you are editing a .tex or a .gnu file, the same command runs it through pdflatex or gnuplot respectively. The command that Run runs can also be customized: if you previously gave an interactive command in the same session, this last command is repeated. Therefore, if your needs are different from the above default, just give a custom command once in the interactive cpl command screen (accessed by pressing Esc ` or F1), revert to editing by pressing Esc ` or F1 again, and to later re-enter your custom command, just press Run or one of its shortcuts as above.

<h4>My program crashes without any error messages</h4>
Always put <q>USE rtchecks</q> near the beginning of your main program file during development. <a href="#rtchecks">rtchecks</a> transparently adds a number of runtime checks and error messages at the expense of execution speed. You will remove it once your program is debugged.

<h4>I want to access interactive cpl from a desktop icon</h4>
Drag and drop the <q>interactive CPL</q> icon from wherever your <q>fri</q> directory is (typically, /usr/local/fri or $HOME/fri) to your Desktop.

<h4>I want to receive automatic updates</h4>
Starting with version 2020-12-16, cpl automatically offers updates when they become available (see <a href="#automatic-updates">automatic updates</a>). If you see an update on the website for which you did not get a reminder while running cpl, please check that the <q>curl</q> command is installed (on Debian, <q>apt install curl</q>) and that you have write access to the parent of the fri/ directory. In case you would rather disable this feature, edit the <q>cpl</q> script and turn ENABLE_UPDATES from <q>YES</q> to <q>NO</q>.

<h4>I want to go back to a previous CPL version</h4>
You see an error or an unexpected behaviour of your program which did not occur with a previous CPL version? Your butlast CPL version is conveniently available in fri.bak/ . You can run it by its full pathname (e.g., ~/fri.bak/cpl), or restore it by renaming (mv) fri.bak to fri. You can also install any older CPL version from the <a href="https://CPLcode.net/version-archive">CPLcode.net/version-archive</a> . After you do so the older version will be in fri/, whereas your current version will have been moved to fri.bak/; if this is confusing, or if you need more than two versions at the same time, you may want to rename (mv) fri/ or fri.bak/ or both to something else (say, their version date). If you confirm that the newest version misbehaves, don't forget to inform the developer.

<h4>I want to use interactive cpl and/or edit remotely</h4>
Interactive cpl is perfectly compatible with ssh. Just ssh into your remote system where CPL is installed, and give the <q>cpl</q> command there. Non-Linux ssh clients are ok too. All special and arrow keys have alphabetic equivalents for the case they may be missing or hard to combine on your keyboard. In a pinch, you can even log in from your smartphone using ConnectBot or similar. Alternately, if all you need is the editor, you can access a remote file from a local editor session (see <a href="editor.html#Load-and-save">(editor)Load-and-save</a>).

<h4>On my system, <q>edit</q> pops up a different editor</h4>
The <q>edit</q> command is used as an alias by more than one editor, including vim and other vi derivatives. You can always access the cpl editor by its unaliased name <q>cpl edit</q> (with a space), or as <q>edit</q> within interactive cpl, or you can modify your PATH so the <q>edit</q> link to cpl takes precedence.

<h4>On my system, <q>edit</q> used to pop up a different editor</h4>
If to have <q>edit</q> pop up a different editor is your preferred behaviour, just delete the bin/edit symbolic link. You will still be able to access the cpl editor as <q>cpl edit</q>.

<h4>My .cpl source files get rejected when sent as email attachments</h4>
A number of popular email servers automatically reject files with the .cpl extension (amid a list of about 50 extensions), even when found in compressed archives, because this extension is shared with MS Windows Control PaneL files. This precaution is overkill insofar as it is based on extension only, but we cannot change the server policy. A possible remedy is to rename your files to another (e.g., .cplcode) extension before sending, and rename them back on the receiving end; the <q>cpl rename</q> command exists for this purpose. Or else do as you would for a large attachment: upload your files to a cloud service and email their shareable link. 
</div><div class=page id="Syntax">
Page: (cpl)Syntax,  Next: <a href="#Functions">Functions</a>,  Prev: <a href="#Installation">Installation</a>,  Up: <a href="#Top">Top</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h2>The CPL programming language syntax</h2>
  CPL = Concealed Pointer Lookup
  CPL = Coactive Parameter Lists
  CPL = Consistent Procedure Linkage
  CPL = Compiler and Programming Language
  CPL = Conceived by Paolo Luchini

A CPL <a href="#Source-file">Source file</a> is composed of nested blocks of statements which take effect in a hierarchical top-down order, much like Pascal or Modula-2. Statements are composed of keywords (<a href="#Keyword-index">Keyword index</a>), identifiers and separators.

User-declared identifiers can contain alphabetic and numeric characters plus <q>_</q> and can be of any length. Upper and lower case are considered distinct. The first character of an identifier must be non-numeric.

Separators can be spaces, tabs or comments (<a href="#Comments">Comments</a>) in any number and sequence; at least one separator is required between contiguous words that could otherwise be mistaken for a single identifier. Indenting is advised, to highlight statement blocks, but not enforced.

Statements within a block are delimited by either newline or <q>;</q>, which allows for multi-statement lines without requiring (but permitting) a <q>;</q> when the statement ends at the end of a line. Multi-line statements can be broken wherever the statement is incomplete: if the given line does not make sense as is, the compiler will automatically treat newline as a separator and try to complete the statement on the next line. Continuation can also be explicitly requested wherever a separator is allowed by putting a <q>\</q> as the last character before newline.

Round, square and curly bracket pairs can be used interchangeably wherever a parenthesis is needed, in either declarations, statements or expressions. (see <a href="#Parentheses">Parentheses</a>)

Subroutine and function declarations (see <a href="#Functions">Functions</a>) are on the same footing as all other <a href="#VARIABLE">VARIABLE</a>, <a href="#CONSTANT">CONSTANT</a> and <a href="#TYPE">TYPE</a> declarations. Contrary to many other languages, declarations (<a href="#Declarations">Declarations</a>) and executable statements (<a href="#Statements">Statements</a>) may be freely intermixed in the program flow. The scope of a declaration extends from the position where the declaration appears down to the end of the containing block. It is recommended that declarations appear as close as possible to the position where the declared item is used for the first time, as this enables the compiler to catch a larger number of errors automatically. In most situations, a variable can be declared and initialized in a single statement.

CPL has <a href="#Coactive-Parameter-Lists">Coactive Parameter Lists</a>, meaning that the type definition of a function's parameter list coacts with its name in identifying the function or subroutine. In other words, functions of the same name and different parameter types are allowed and considered distinct by the language. In addition, not just commas but any non-ambiguous single characters or character sequences may be used as parameter separators in function calls, and equally cooperate in disambiguating the function (see <a href="#Coactive-Parameter-Lists">Coactive Parameter Lists</a>). Whereas commas will still be the commonest choice for short parameter lists, a remindful choice of separators can make long parameter lists both more understandable and more thoroughly checked by the compiler. Parameters can also be <a href="#OPTIONAL">OPTIONAL</a>, and be specified by name rather than by position.

Loops and all other flow control statements (<a href="#Control">Control</a>) implicitly define new blocks within them, just as subroutine declarations do. A block can also be explicitly delimited as a <a href="#MODULE">MODULE</a>. A block can contain every declaration that the outermost block can, including further subroutines and modules, but the declared items cease to exist on exit from the block.

<nav><table>
<tr><th>Menu: <input autocomplete="off" class="filter" type="text" onkeyup="tsearch()" onfocus="this.value='';tsearch()" placeholder="a-z" title="Filter menu items by initials"></th><th></th></tr>
<tr><td colspan="2"> </td></tr>
<tr><td><a href="#Comments">Comments</a>:</td><td>syntax for comments</td></tr>
<tr><td><a href="#Parentheses">Parentheses</a>:</td><td>Round, square and curly brackets</td></tr>
<tr><td><a href="#Declarations">Declarations</a>:</td><td>Variable, constant and type declarations</td></tr>
<tr><td><a href="#Statements">Statements</a>:</td><td>Executable statements and expressions</td></tr>
<tr><td><a href="#Control">Control</a>:</td><td>Program flow control statements</td></tr>
<tr><td><a href="#Functions">Functions</a>:</td><td>Functions and subroutines</td></tr>
<tr><td><a href="#MODULE">MODULE</a>:</td><td>separately scoped program block</td></tr>
<tr><td><a href="#Source-file">Source file</a>:</td><td>format and inclusion</td></tr>
<tr><td><a href="#C-preprocessor">C preprocessor</a>:</td><td>macro definition and conditional compilation</td></tr>
</table></nav>

</div><div class=page id="Comments">
Page: (cpl)Comments,  Next: <a href="#Parentheses">Parentheses</a>,  Prev: <a href="#Syntax">Syntax</a>,  Up: <a href="#Syntax">Syntax</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Comments</h3>
Comments delimited by ! without a following bracket extend to the end of line.

Comments delimited by !( ... !) or ![ ... !] or !{ ... !} can be inserted wherever a space can, and can extend over a few characters or over several lines. The compiler will still match !bracket pairs within comments, and consider the comment finished only when all opened parentheses have been closed. 
</div><div class=page id="Parentheses">
Page: (cpl)Parentheses, Next: <a href="#C-preprocessor">C preprocessor</a>, Prev: <a href="#Comments">Comments</a>, Up: <a href="#Syntax">Syntax</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Parentheses</h3>
Round, square and curly bracket pairs can be used interchangeably wherever a parenthesis is needed, but the compiler requires that every opening bracket is closed by a matching bracket of the same kind, just as in mathematics. To alternate the three kinds of bracket, while not mandatory, makes for easier reading by the programmer and more effective error catching by the compiler.

When round brackets are used in the statement prototypes contained in this manual, it is always implied that the other two styles can be used just as well. In such prototypes, square brackets denote optional items. 
</div><div class=page id="C-preprocessor">
Page: (cpl)C preprocessor, Next: <a href="#Source-file">Source file</a>, Prev: <a href="#Parentheses">Parentheses</a>, Up: <a href="#Syntax">Syntax</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Macro definition and conditional compilation</h3>
C preprocessor #define and #if constructs (<a href="https://manpages.debian.org/cpp">manpages.debian.org/cpp</a>) are used in a CPL program to define macros and alter the flow of compilation. For file inclusion see <a href="#USE">USE</a>, <a href="#INCLUDE">INCLUDE</a>, and <a href="#C-interface">C interface</a>.  
</div><div class=page id="Source-file">
Page: (cpl)Source file, Next: <a href="#MODULE">MODULE</a>, Prev: <a href="#C-preprocessor">C preprocessor</a>, Up: <a href="#Syntax">Syntax</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Source files</h3>
A CPL program file directly consists of a sequential block of declarations and statements, some of which may in turn contain other blocks, without any need to mark the beginning and end of the complete program other than by the beginning and end of the file itself.

The standard ending for CPL source files is .cpl, and is automatically added by the compiler if omitted. Though this ending is unambiguous in unix, it does have a small inconvenience in being banned by some email services to avert malicious exploitation of Microsoft Windows Control PaneL files. If you encounter this problem, just rename your .cpl files to some other ending before sending them as email attachments, or send them through cloud storage as you would a large attachment.

<nav><table>
<tr><th>Menu: <input autocomplete="off" class="filter" type="text" onkeyup="tsearch()" onfocus="this.value='';tsearch()" placeholder="a-z" title="Filter menu items by initials"></th><th></th></tr>
<tr><td colspan="2"> </td></tr>
<tr><td><a href="#USE">USE</a>:</td><td>Separately compiled program segments</td></tr>
<tr><td><a href="#INCLUDE">INCLUDE</a>:</td><td>File inclusion</td></tr>
<tr><td><a href="#C-interface">C interface</a>:</td><td>Use and inclusion of C libraries</td></tr>
<tr><td><a href="#C-SECTION">C SECTION</a>:</td><td>transparent C source code inclusion</td></tr>
<tr><td><a href="#FORTRAN-interface">FORTRAN interface</a>:</td><td>Use of FORTRAN subroutine calls</td></tr>
</table></nav>

</div><div class=page id="USE">
Page: (cpl)USE, Next: <a href="#INCLUDE">INCLUDE</a>, Prev: <a href="#Source-file">Source file</a>, Up: <a href="#Source-file">Source file</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>Separately compiled program segments</h4>
Separately compiled source files can be used with the statement

	USE &lt;filename&gt;

<q>.cpl</q> is automatically appended if &lt;filename&gt; contains no dot. In addition, the directory of the USEd file becomes the present working directory for other references nested in it.

The USEd file is logically treated as if it were inserted in the program sequence in place of the <q>USE</q> statement, i.e. just as if <a href="#INCLUDE">INCLUDE</a> were in place. Notice that this implies that further USE or #include (see <a href="#C-Interface">C Interface</a>) statements nested inside the USEd file are automatically visible in both the remainder of the program and following USEd files. This is different from the usage of C headers, which have to be repeated in every program file that uses them. In order for repeated USE or #include statements to be allowed, even where not required, such repetitions are silently ignored.

The main difference between USE and  <a href="#INCLUDE">INCLUDE</a> is that the USEd file is either compiled into a separate object file or, if a more recent object file of the same name already exists, not compiled at all. In the latter case the CPL compiler reads the outermost block only from the USEd source file and skips the inner block contents altogether, producing the same effect as a Modula-2 definition file or a C header.

In case actual headers must be generated in order to save space (or to distribute a library without source code) it is possible to USE a source file with empty subroutine bodies, since the compiler would not read the subroutine bodies anyway, provided the object file is artificially given a more recent date (for instance, through <a href="https://manpages.debian.org/touch.html">manpages.debian.org/touch.html</a>). Missing this, empty subroutines will be recompiled with obviously unwanted results.

In an interpreted program (<a href="#cpl-i">cpl i</a>) just as well, USE loads a separately compiled module, whose subroutines can then be executed at compiled speed, and executes its main body, if any, before passing control back to the console. 
</div><div class=page id="INCLUDE">
Page: (cpl)INCLUDE, Next: <a href="#C-interface">C interface</a>, Prev: <a href="#USE">USE</a>, Up: <a href="#Source-file">Source file</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>File inclusion</h4>
Files included with

	INCLUDE filename[(name=value [,name=value])]

are treated as if they appeared in the place of the INCLUDE statement during compilation, and are not separately compiled (as in <a href="#USE">USE</a>). Nonetheless, the directory of the INCLUDEd file becomes the present working directory for other references nested in it.

If the optional arguments are present, name becomes an alias for value within the scope of the INCLUDEd file only. 
</div><div class=page id="C-interface">
Page: (cpl)C interface, Next: <a href="#C-SECTION">C SECTION</a>, Prev: <a href="#INCLUDE">INCLUDE</a>, Up: <a href="#Source-file">Source file</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>C interface</h4>
The directive

	#include <q>file</q> [link options]

or

	#include &lt;file&gt; [link options]

in addition to being copied into the generated C code has a special meaning. <q>file</q> is expected to contain a C header or program, which is scanned for declarations by the CPL compiler. The declarations and prototypes contained in the C file thus become transparently available to the including CPL program.

An include directory path (similar to the <q>-I</q> C compiler directive) can be specified with

	#includedir <q>path</q>

The name of the corresponding object file or other linking options that need to be transmitted to the loader can follow (unquoted) the filename on the same line, or alternately be given in a separate

	#link link options

directive.

A C code excerpt may also appear embedded in the CPL source file in the form of a <a href="#C-SECTION">C SECTION</a>.

A few common libc headers, namely

	unistd.h
	stdlib.h
	stdio.h
	fcntl.h
	math.h
	limits.h
	float.h
	string.h
	time.h
	setjmp.h
	errno.h
	signal.h

are pre-included in all CPL programs and need not (but may) be included again. 
</div><div class=page id="C-SECTION">
Page: (cpl)C SECTION, Next: <a href="#FORTRAN-interface">FORTRAN interface</a>, Prev: <a href="#C-interface">C interface</a>, Up: <a href="#Source-file">Source file</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>C SECTION</h4>
C code excerpts can be inserted amidst a CPL program through the statement

	C SECTION
	&lt;C code&gt;
	END C SECTION

This has the same effect as recalling with #include a file that contains &lt;C code&gt;; that is, the C SECTION is scanned by cpl and any identifiers declared in it become transparently available to the CPL program.

Alternately, C code may also be inserted between <q>&lt;&lowast;</q> and <q>&lowast;&gt;</q> as in:

	&lt;&lowast; some text &lowast;&gt;

The text that appears between <q>&lt;&lowast;</q> and <q>&lowast;&gt;</q> is copied verbatim into the generated C file without the CPL compiler verifying its syntax or extracting any identifiers. It is up to the programmer to ensure that the resulting code makes sense, thus this construction should only be used as a last resort for non-standard features. 
</div><div class=page id="FORTRAN-interface">
Page: (cpl)FORTRAN interface, Next: <a href="#MODULE">MODULE</a>, Prev: <a href="#C-SECTION">C SECTION</a>, Up: <a href="#Source-file">Source file</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>Use of FORTRAN subroutine calls</h4>
An interface to FORTRAN precompiled subroutines is provided by the statements

	FORTRANCALL &lt;subrname&gt; ( &lt;parameters&gt; )

and

	&lt;type&gt; FORTRANFUNCTION &lt;functionname&gt; ( &lt;parameters&gt; )

These have the following effects:
 &lt;subrname&gt; or &lt;functionname&gt; is copied verbatim into the generated C source,
 with an appended underscore; 
 all arguments are passed by reference, according to FORTRAN convention;
 any arrays are replaced by a reference to their first element.

The user must take care of the fact that FORTRAN has multidimensional array indices in the reverse order with respect to both C and cpl. Arrays to be passed as such arguments should be declared and used accordingly.

For (e.g. LAPACK) library calls that require the number of elements used in actual memory storage for the rows of a matrix as an argument, the pseudofunction

	STRIDEOF( &lt;ARRAY&gt; )

provides the argument to be passed.

Note that argument type checking is suppressed during a FORTRANCALL (as the necessary information is not available). Type checking can be restored, however, by wrapping every FORTRANCALL in a suitable &lowast; note INLINE:: SUBROUTINE.

The name of the object file containing the FORTRAN compiled subroutines must be transmitted to the linker with

	#link <q>linking options</q>

together with any other linking options required (e.g., -lg2c to provide the FORTRAN run time library, if g77 was used as the FORTRAN compiler). 
</div><div class=page id="MODULE">
Page: (cpl)MODULE, Next: <a href="#Functions">Functions</a>, Prev: <a href="#Source-file">Source file</a>, Up: <a href="#Syntax">Syntax</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Separately scoped program block</h3>
A block of code can be explicitly delimited as

	MODULE name
	&lt;block&gt;
	END name

or

	MODULE
	&lt;block&gt;
	END MODULE

This construction limits the visibility of variables declared inside the MODULE, and is the basis for information hiding. It replaces, and should be preferred to, called-once-only subroutines. An important difference is, however, that variables declared in a MODULE are static and retain their value across subroutine calls, even if they can only be accessed by subroutines declared in the MODULE itself. Notice also that separate source files recalled with either <a href="#USE">USE</a> or <a href="#INCLUDE">INCLUDE</a> are not separately scoped unless they are enclosed in a MODULE. Control may be transferred to the end of a named MODULE, just as to the end of a SUBROUTINE, by <a href="#EXIT">EXIT</a>.

In order to be exported outside, a function declared inside a module must also be declared before the MODULE with the keyword <a href="#FOLLOWS">FOLLOWS</a>. Variables or constants can be simply declared outside a MODULE and assigned a value inside it as necessary. 
</div><div class=page id="Functions">
Page: (cpl)Functions,  Next: <a href="#Declarations">Declarations</a>,  Prev: <a href="#Syntax">Syntax</a>,  Up: <a href="#Top">Top</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h2>Functions and Subroutines</h2>
Functions (<a href="#FUNCTION">FUNCTION</a>) and subroutines (<a href="#SUBROUTINE">SUBROUTINE</a>) have a long and a short declaration form. In long form, a subroutine declaration reads

	SUBROUTINE name( &lt;parameter declarations&gt; )
	&lt;block&gt;
	END name

Correspondingly a function, i.e. a subroutine that returns a value and may appear inside an expression, is declared as

	&lt;type&gt; FUNCTION name( &lt;parameter declarations&gt; )
	&lt;block&gt;
	END name

In short form, a function whose body is composed of a single expression may also be declared as

	&lt;type&gt; FUNCTION name( &lt;parameter declarations&gt; ) = &lt;expression&gt;

A short syntax is also available for subroutines

	SUBROUTINE name( &lt;parameter declarations&gt; ) = &lt;single-line block&gt;

where &lt;single-line block&gt; is a sequence of statements separated by semicolons and terminating at the first newline.

CPL has Coactive Parameter Lists, meaning that the type definition of a function's parameter list coacts with its name in identifying the function or subroutine. In other words, functions of the same name and different parameter types are allowed and considered distinct by the language. In addition, not just commas but any non-ambiguous single characters or character sequences may be used as parameter separators in function calls, and equally cooperate in disambiguating the function. Whereas commas will still be the commonest choice for short parameter lists, a remindful choice of separators can make long parameter lists both more understandable and more thoroughly checked by the compiler. Parameters can also be <a href="#OPTIONAL">OPTIONAL</a>, and be specified by name rather than by position.

Formal parameter declarations otherwise follow the same syntax as normal variable declarations, and are distinguished both by their position within the parenthesis following the subroutine or function name and by separator matching. Round, square or curly bracket pairs can be used, just as everywhere else (see <a href="#Parentheses">Parentheses</a>). However an important difference exists: whereas general variables are by default <a href="#VARIABLE">VARIABLE</a>, i.e. can be assigned a value multiple times, and must be explicitly declared <a href="#CONSTANT">CONSTANT</a> to become inalterable, formal parameters are by default CONSTANT and only become VARIABLE if explicitly declared so.

A subroutine returns at the END of the subroutine block or at the <a href="#EXIT">EXIT</a>  statement. Within functions a variable named RESULT is implicitly declared with the type of the function's result, and can be used just as any other local variable of that type within the body of the function; the function returns the value of the variable <a href="#RESULT">RESULT</a> at the time of exit.

The declared subroutine is visible from the point of its declaration to the end of the enclosing block, just as all other declarations. This includes the subroutine body itself, and recursive calls are thus automatically allowed.

A function can also be declared implicitly where a function argument is expected, by providing the function body as the actual parameter. See <a href="#Implicit-function-declaration">Implicit function declaration</a>.

 <nav><table>
<tr><th>Menu: <input autocomplete="off" class="filter" type="text" onkeyup="tsearch()" onfocus="this.value='';tsearch()" placeholder="a-z" title="Filter menu items by initials"></th><th></th></tr>
<tr><td colspan="2"> </td></tr>
<tr><td><a href="#SUBROUTINE">SUBROUTINE</a>:</td><td>Subroutine declaration</td></tr>
<tr><td><a href="#FUNCTION">FUNCTION</a>:</td><td>Function declaration</td></tr>
<tr><td><a href="#INLINE">INLINE</a>:</td><td>Subroutines and functions as macros</td></tr>
<tr><td><a href="#FOLLOWS">FOLLOWS</a>:</td><td>Function prototypes</td></tr>
<tr><td><a href="#OPTIONAL">OPTIONAL</a>:</td><td>optional function parameters recognized by name</td></tr>
<tr><td><a href="#nested-functions">nested functions</a>:</td><td>Nested functions</td></tr>
<tr><td><a href="#Coactive-Parameter-Lists">Coactive Parameter Lists</a>:</td><td>aka function overloading</td></tr>
<tr><td><a href="#array-parameters">array parameters</a>:</td><td>passing arrays of variable dimensions</td></tr>
<tr><td><a href="#Subroutine-type">Subroutine type</a>:</td><td>variable call to a subroutine or function</td></tr>
<tr><td><a href="#Implicit-function-declaration">Implicit function declaration</a>:</td><td></td></tr>
<tr><td><a href="#Builtin">Builtin</a>:</td><td>built-in function list</td></tr>
</table></nav>

</div><div class=page id="SUBROUTINE">
Page: (cpl)SUBROUTINE, Next: <a href="#FUNCTION">FUNCTION</a>, Prev: <a href="#Functions">Functions</a>, Up: <a href="#Functions">Functions</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Subroutine declarations</h3>
In long form, a subroutine declaration reads

	SUBROUTINE name( &lt;parameter declarations&gt; )
	&lt;block&gt;
	END name

In short form:

	SUBROUTINE name( &lt;parameter declarations&gt; ) = &lt;single-line block&gt;

where &lt;single-line block&gt; is a sequence of statements separated by semicolons and terminated by the first newline.

The keyword SUBROUTINE is also used to declare variables of <a href="#Subroutine-type">Subroutine type</a>. 
</div><div class=page id="FUNCTION">
Page: (cpl)FUNCTION, Next: <a href="#INLINE">INLINE</a>, Prev: <a href="#SUBROUTINE">SUBROUTINE</a>, Up: <a href="#Functions">Functions</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Function declarations</h3>
In long form, a function declaration reads

	&lt;type&gt; FUNCTION name( &lt;parameter declarations&gt; )
	&lt;block&gt;
	END name

In short form, a function whose result can be written as a single expression  may also be declared as

	&lt;type&gt; FUNCTION name( &lt;parameter declarations&gt; ) = &lt;expression&gt;

A third alternative syntax, similar to the one used for  variables of <a href="#Subroutine-type">Subroutine type</a>, has the result type denoted by <q>-&gt;</q> following the parameter declaration:

	FUNCTION name( &lt;parameter declarations&gt; )-&gt;&lt;type&gt;
	&lt;block&gt;
	END name

When this syntax is used, the result type may be, or contain, an ARRAY type with dimensions depending on the formal parameters themselves (see <a href="#array-parameters">array parameters</a>). Any formal parameter as well may depend on the formal parameters that precede it. For example:

	FUNCTION transformarray[ARRAY(&lowast;) OF REAL v]-&gt;ARRAY(v.LO..v.HI) OF REAL .

Within a function's body, a variable named

	RESULT

is implicitly declared with the type of the function's result, and can be used just as any other local variable of that type within the body of the function; the function returns the value of the variable <a href="#RESULT">RESULT</a> at the time of exit. All primitive and compound types are allowed for the result of a function. The statement

	RETURN &lt;value&gt;

is a shorthand for

	RESULT=&lt;value&gt;; EXIT name. 

The keyword FUNCTION is also used to declare variables of <a href="#Subroutine-type">Subroutine type</a>. The statement RETURN is also used in <a href="#interactive-session">interactive session</a>. 
</div><div class=page id="INLINE">
Page: (cpl)INLINE,  Next: <a href="#FOLLOWS">FOLLOWS</a>,  Prev: <a href="#FUNCTION">FUNCTION</a>,  Up: <a href="#Functions">Functions</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Inline functions and subroutines</h3>
The keyword INLINE prefixed to a <a href="#SUBROUTINE">SUBROUTINE</a> or <a href="#FUNCTION">FUNCTION</a> declaration (in either long or short form) generates a compile-time macro that is inserted in place of each call to the subroutine.

See also <a href="#INLINE-LOOP">INLINE LOOP</a>, <a href="symbolic.html#Top">INLINE:(symbolic)</a>. 
</div><div class=page id="FOLLOWS">
Page: (cpl)FOLLOWS,  Next: <a href="#OPTIONAL">OPTIONAL</a>,  Prev: <a href="#INLINE">INLINE</a>,  Up: <a href="#Functions">Functions</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Function prototypes</h3>
In case the prototype of a subroutine must be declared in advance, the construction

	SUBROUTINE name( &lt;parameter declarations&gt; ) FOLLOWS

(or its equivalent for functions) can be used to make the subroutine callable before its body appears. This prototype declaration is only really needed for mutually referencing subroutines (as in Pascal or C) or for subroutines whose body is hidden in a subsequent <a href="#MODULE">MODULE</a>.

A prototype using FOLLOWS may also be defined for a <a href="#CONSTANT">CONSTANT</a>. 
</div><div class=page id="OPTIONAL">
Page: (cpl)OPTIONAL, Next: <a href="#nested-functions">nested functions</a>, Prev: <a href="#FOLLOWS">FOLLOWS</a>, Up: <a href="#Functions">Functions</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Optional parameters</h3>
The parameter list of a function or subroutine can include optional items. In the function declaration, optional parameters must appear after all standard positional parameters (if there are any), separated by the keyword OPTIONAL or by its abbreviation -- . Each optional parameter must be assigned a default value in its declaration. For example:

	SUBROUTINE test(INTEGER x; OPTIONAL INTEGER y=0,z=3; REAL w=3.14)

Within the body of the function, optional parameters obey the same rules as positional parameters; on entry they acquire the value of each corresponding actual parameter if one is specified in the calling statement, or their default value otherwise.

In the calling statement, optional parameters follow all positional parameters (if there are any) and can appear in any order (or not appear at all); they are identified by name or type rather than by position. In &lt;name&gt;=&lt;value&gt; notation,

	test(3,w=1E2,y=1)

is a possible calling statement for the above example, equivalent to test(3,y=1,z=3,w=1E2). Alternately, if an optional parameter can be unambiguously identified through its type (a typical use case is when parameters have different <a href="#ENUM">ENUM</a> types, or when there is just one optional parameter), &lt;name&gt;= can be omitted (but doesn't have to, for the sake of clarity) and the notation becomes similar to a positional parameter.

Optional parameters by their very nature cannot be used to disambiguate overloaded function names in <a href="#Coactive-Parameter-Lists">Coactive Parameter Lists</a>. 
</div><div class=page id="nested-functions">
Page: (cpl)nested functions, Next: <a href="#Coactive-Parameter-Lists">Coactive Parameter Lists</a>, Prev: <a href="#OPTIONAL">OPTIONAL</a>, Up: <a href="#Functions">Functions</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Nested functions</h3>
Functions and subroutines exist on a par with variable <a href="#Declarations">Declarations</a> and can appear anywhere in a block, another function included. Nested functions are therefore an integral part of CPL. Like all other block contexts, they have access to variables (and functions) declared before them, in the same or in an enclosing block. The present implementation of nested functions translates to nested functions in the generated C code, and is therefore only compatible with C compilers that handle nested functions as an extended feature (gcc is one of them). 
</div><div class=page id="Coactive-Parameter-Lists">
Page: (cpl)Coactive Parameter Lists, Next: <a href="#array-parameters">array parameters</a>, Prev: <a href="#nested-functions">nested functions</a>, Up: <a href="#Functions">Functions</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Coactive Parameter Lists</h3>
Coactive Parameter Lists (aka function overloading) are an inherent feature of CPL. Since type checking is enforced on function arguments, functions and subroutines of the same name but different (not <a href="#OPTIONAL">OPTIONAL</a>) arguments can be distinguished from each other, and are transparently handled. This also works for single or multiple runtime specified types: see <a href="#DYNAMIC">DYNAMIC</a>. 
</div><div class=page id="array-parameters">
Page: (cpl)array parameters, Next: <a href="#RESULT">RESULT</a>, Prev: <a href="#Coactive-Parameter-Lists">Coactive Parameter Lists</a>, Up: <a href="#Functions">Functions</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Passing array parameters and their dimensions</h3>
Functions that accept array parameters of variable dimensions are a necessity that is handled differently in different languages, especially when error checking is desired. In CPL they are handled as follows.

The special dimension &lowast; can be used to declare a POINTER TO ARRAY that implicitly passes the bounds of the ARRAY together with its address (see <a href="#ARRAY">ARRAY</a>). This is the most compact notation, as in e.g.

	REAL FUNCTION NORM[ARRAY(&lowast;) OF REAL v]=SUM v(i)^2 FOR ALL i

(same as the builtin <a href="#NORM">NORM</a> function). When this notation is used, the index bounds of the actual parameter are accessible in the function's body by the <a href="#LO">LO</a> and <a href="#HI">HI</a> builtins (in the above example, these would be v.LO and v.HI), and its number of elements by the <a href="#LENGTH">LENGTH</a> function, just as for all ARRAYs.

A formal parameter OF type ARRAY(&lowast;) also accepts a variable of its base type as its actual parameter, and transforms it into an ARRAY with dimension (0..0).

For more elaborate needs, for instance when two arrays must have equal dimensions, CPL allows previous formal parameters to be used in the declaration of subsequent compound parameters. An example would be

	SUBROUTINE dosomething[INTEGER n; ARRAY(1..n) OF REAL a,b,c]
	.....
	END dosomething

Within the body of such a subroutine or function, a, b and c are all assumed to have the same dimensions 1..n; this is similar to the convention adopted in languages (like C) that treat arrays like pointers with no special provision, but with the difference that in CPL the call of such a subroutine verifies that the actual parameters indeed have the specified dimensions at run time, and throws an error if they don't and <a href="#rtchecks">rtchecks</a> is on. The same is true if the dimension is not simply the n parameter but an expression involving n, or if the dimension is extracted from the bounds of a previous array as in

	SUBROUTINE dosomething[ARRAY(&lowast;) OF REAL a; ARRAY(a.LO..a.HI) OF REAL b,c]
	.....
	END dosomething

Additionally, the return type of a FUNCTION can as well be an ARRAY involving a formal parameter in its dimensions. An example is:

	FUNCTION dosomething[ARRAY(&lowast;) OF REAL a,b]-&gt;ARRAY(a.LO..b.HI) OF REAL
	.....
	END dosomething

After this declaration the dimensions of the return type are known to the compiler, and can either be checked by rtchecks or used to allocate a suitable ARRAY CONSTANT. 
</div><div class=page id="RESULT">
Page: (cpl)RESULT, Next: <a href="#Declarations">Declarations</a>, Prev: <a href="#array-parameters">array parameters</a>, Up: <a href="#Functions">Functions</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> Formal name of the result of a <a href="#FUNCTION">FUNCTION</a> inside of the function's body. RESULT is implicitly declared as a variable of the type indicated in the FUNCTION's declaration and may be used and assigned like any other variable. On exit it becomes the function's value returned to the calling program. 
</div><div class=page id="Declarations">
Page: (cpl)Declarations, Next: <a href="#Statements">Statements</a>, Prev: <a href="#Functions">Functions</a>, Up: <a href="#Top">Top</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h2>Variables, types and constants</h2>
Variables, types and constants are denoted by identifiers introduced through the relevant declarations as follows. Identifiers cannot be duplicated as long as a previous declaration is in effect (in either the same or an enclosing block). An identifier which was not previously declared in the same or an enclosing block and does not coincide with a CPL keyword (see <a href="#Keyword-index">Keyword index</a>) is denoted as a newid below.

A general declaration has the form:

    [&lt;constorvar&gt;] &lt;type declarator&gt; &lt;vardeclaration&gt; [, &lt;vardeclaration&gt;]

where &lt;vardeclaration&gt; denotes

    newid[&lt;postfix modifier&gt;][= &lt;value&gt;]

and &lt;constorvar&gt; may be either <a href="#CONSTANT">CONSTANT</a> or <a href="#VARIABLE">VARIABLE</a> or none.

CPL is a type-checking language and requires that every VARIABLE be declared before it is used. It can be initialized at the same time by the optional = &lt;value&gt; field. However, the declaration of CONSTANTs and TYPEs may be implicit:

  newid = &lt;value&gt;  declares a <a href="#CONSTANT">CONSTANT</a>, whose value cannot be modified
		 later in the program and whose type is the type of the r.h.s.
  newid = &lt;compound type&gt;  declares a <a href="#TYPE">TYPE</a> identifier to denote the
		 compound type on the r.h.s.
  A newid used as the running index of a <a href="#FOR">FOR</a> loop is implicitly
		 declared CONSTANT in the scope of the loop.

<nav><table>
<tr><th>Menu: <input autocomplete="off" class="filter" type="text" onkeyup="tsearch()" onfocus="this.value='';tsearch()" placeholder="a-z" title="Filter menu items by initials"></th><th></th></tr>
<tr><td colspan="2"> </td></tr>
<tr><td><a href="#CONSTANT">CONSTANT</a>:</td><td>constant identifier</td></tr>
<tr><td><a href="#VARIABLE">VARIABLE</a>:</td><td>variable identifier</td></tr>
<tr><td colspan="2"> </td></tr>
<tr><td colspan="2">Primitive types are:

</td></tr>
<tr><td><a href="#BOOLEAN">BOOLEAN</a>:</td><td>primitive type declarator</td></tr>
<tr><td><a href="#CHAR">CHAR</a>:</td><td>primitive type declarator</td></tr>
<tr><td><a href="#INTEGER">INTEGER</a>:</td><td>primitive type declarator</td></tr>
<tr><td><a href="#REAL">REAL</a>:</td><td>primitive type declarator</td></tr>
<tr><td><a href="#SINGLE">SINGLE</a>:</td><td>primitive type declarator</td></tr>
<tr><td colspan="2"> </td></tr>
<tr><td colspan="2">Compound types may be equivalently specified through a compound type expression </td></tr>
<tr><td colspan="2">or type identifier used as the type declarator (common to all variables in the </td></tr>
<tr><td colspan="2">declaration list) or through a &lt;postfix modifier&gt; attached to each single </td></tr>
<tr><td colspan="2">variable to which it is meant to apply.

</td></tr>
<tr><td><a href="#TYPE">TYPE</a>:</td><td>declaration of a new type identifier</td></tr>
<tr><td><a href="#ENUM">ENUM</a>:</td><td>enumerated type</td></tr>
<tr><td><a href="#STRUCTURE">STRUCTURE</a>:</td><td>compound type</td></tr>
<tr><td><a href="#ARRAY">ARRAY</a>:</td><td>subscripted arrays</td></tr>
<tr><td><a href="#STRING">STRING</a>:</td><td>strings of characters</td></tr>
<tr><td><a href="#STRUCTURED">STRUCTURED</a>:</td><td>ARRAY     may appear as both a structure and an array</td></tr>
<tr><td><a href="#POINTER">POINTER</a>:</td><td>pointer to a memory address</td></tr>
<tr><td><a href="#INTO">INTO</a>:</td><td>Pointer arithmetics</td></tr>
<tr><td><a href="#STORED">STORED</a>:</td><td>random-access files as disk-resident variables</td></tr>
<tr><td><a href="#DYNAMIC">DYNAMIC</a>:</td><td>object-oriented features</td></tr>
<tr><td><a href="#Postfix">Postfix</a>:</td><td>shorthand notation for POINTERs and ARRAYs</td></tr>
<tr><td><a href="#Subroutine-type">Subroutine type</a>:</td><td>variable call to a subroutine or function</td></tr>
<tr><td><a href="#Type-identity">Type identity</a>:</td><td>when are two variables of the same type?</td></tr>
</table></nav>

</div><div class=page id="CONSTANT">
Page: (cpl)CONSTANT, Next: <a href="#VARIABLE">VARIABLE</a>, Prev: <a href="#Declarations">Declarations</a>, Up: <a href="#Declarations">Declarations</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>CONSTANT</h3>
The word CONSTANT in <a href="#Declarations">Declarations</a> specifies that the declared item cannot be modified. Thus a CONSTANT is not the same thing as a <q>compile-time constant</q>, that is an expression whose value can be known at compile time, but more generally a value which cannot appear on the left side of an assignment or have its address assigned to a POINTER.

The value of the CONSTANT is usually specified in the declaration itself but occasionally later. When this happens the constant declaration takes the role of a constant prototype, and may be optionally followed by the keyword <a href="#FOLLOWS">FOLLOWS</a>. (For instance, a constant may be declared outside a <a href="#MODULE">MODULE</a>, but its value only be known inside the module itself; or the value may be <a href="#READ">READ</a> as input.) If the constant is not initialized in the declaration itself, it is understood that it will be assigned once only in the course of its block.

In alternative, a statement of the form

	newid = value

implicitly declares a CONSTANT whose type and value are the type and value of the r.h.s. (see, however, <a href="#Concealed-Pointer-Lookup">CONSTANT:Concealed Pointer Lookup</a>. if the address of the r.h.s. is desired instead).

If the r.h.s. of a CONSTANT declaration is known at compile time (what is denoted as a compile-time constant), the new identifier becomes just an alias for it and no storage is assigned. This also applies to <a href="#STRING">STRING</a>s. An alias for any expression, even one which does not represent a compile-time constant, can always be defined through the statement

	newid == expression

(see <a href="#Delayed-assignment">Delayed assignment</a>). Subroutine formal parameters are by default CONSTANT, with the actual parameter as their value, and must be explicitly declared <a href="#VARIABLE">VARIABLE</a> if they are to be reassigned within the subroutine's body. 
</div><div class=page id="VARIABLE">
Page: (cpl)VARIABLE, Next: <a href="#BOOLEAN">BOOLEAN</a>, Prev: <a href="#CONSTANT">CONSTANT</a>, Up: <a href="#Declarations">Declarations</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>VARIABLE</h3>
The word VARIABLE in <a href="#Declarations">Declarations</a> specifies that the declared item is a regular variable and can be modified. In fact, this is the default and the word VARIABLE is optional in ordinary declarations.

However, subroutine formal parameters are by default <a href="#CONSTANT">CONSTANT</a>, with the actual parameters as values, and must be explicitly declared VARIABLE if they are to be reassigned within the subroutine's body.

Notice that the value assigned to a VARIABLE parameter is invisible after the subroutine returns. In order to change the value of variables which exist outside the subroutine, the corresponding formal parameter must be declared a <a href="#POINTER">POINTER</a>. Indeed VARIABLE behaviour of a formal parameter is seldom needed, and making CONSTANT the default improves error catching.

When a VARIABLE identifier is used in an expression, it initially stands for the variable's address in memory, and thus can be used wherever a POINTER is expected; the same identifier gets automatically converted to the variable's value where needed through <a href="#Concealed-Pointer-Lookup">Concealed Pointer Lookup</a>. 
</div><div class=page id="BOOLEAN">
Page: (cpl)BOOLEAN, Next: <a href="#CHAR">CHAR</a>, Prev: <a href="#VARIABLE">VARIABLE</a>, Up: <a href="#Declarations">Declarations</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>BOOLEAN</h3>
Primitive type declarator for boolean logical variables translated into C type <q>int</q>. (see <a href="#Declarations">Declarations</a>)

BOOLEAN values are denoted as YES or TRUE and NO or FALSE, and written as <q>Y</q> and <q>N</q>. On reading any complete word starting with <q>T</q>, <q>Y</q>, <q>t</q> or <q>y</q> is read as YES, any word starting with <q>F</q>, <q>N</q>, <q>f</q>, <q>n</q> as NO.

<nav><table>
<tr><th>Menu: <input autocomplete="off" class="filter" type="text" onkeyup="tsearch()" onfocus="this.value='';tsearch()" placeholder="a-z" title="Filter menu items by initials"></th><th></th></tr>
<tr><td colspan="2"> </td></tr>
<tr><td><a href="#BOOLEAN-ops">BOOLEAN ops</a>:</td><td>AND  OR  NOT</td></tr>
<tr><td><a href="#Comparison">Comparison</a>:</td><td>&gt;  &gt;=  &lt;  &lt;=  =  #  IS</td></tr>
<tr><td><a href="#Builtin">BOOLEAN:Builtin</a>:</td><td>built-in functions</td></tr>
</table></nav>

</div><div class=page id="CHAR">
Page: (cpl)CHAR,  Next: <a href="#INTEGER">INTEGER</a>,  Prev: <a href="#BOOLEAN">BOOLEAN</a>,  Up: <a href="#Declarations">Declarations</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>CHAR</h3>
Primitive type declarator for character variables translated into C type <q>char</q>. (see <a href="#Declarations">Declarations</a>)

Where needed, a single-character <a href="#STRING">STRING</a> literal is implicitly converted to a CHAR constant, which is in turn implicitly converted to an INTEGER ASCII code. INTEGER to CHAR conversion must be explicit (see <a href="#Builtin">CHAR:Builtin</a>). 
</div><div class=page id="INTEGER">
Page: (cpl)INTEGER,  Next: <a href="#REAL">REAL</a>,  Prev: <a href="#CHAR">CHAR</a>,  Up: <a href="#Declarations">Declarations</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>INTEGER</h3>
Primitive type declarator for integer variables, translated into C type <q>int</q>.

Can be implicitly converted to REAL. REAL to INTEGER conversion must be explicit (see <a href="#Builtin">INTEGER:Builtin</a>).

See also <a href="#INTEGER-operator">INTEGER operator</a>. 
</div><div class=page id="REAL">
Page: (cpl)REAL,  Next: <a href="#SINGLE">SINGLE</a>,  Prev: <a href="#INTEGER">INTEGER</a>,  Up: <a href="#Declarations">Declarations</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>REAL</h3>
Primitive type declarator for real variables, translated into C type <q>double</q>.

See also <a href="#REAL-operator">REAL operator</a>, <a href="#Builtin">REAL:Builtin</a>, <a href="complex.html#Top">REAL:(complex)</a>. 
</div><div class=page id="SINGLE">
Page: (cpl)SINGLE,  Next: <a href="#TYPE">TYPE</a>,  Prev: <a href="#REAL">REAL</a>,  Up: <a href="#Declarations">Declarations</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>SINGLE</h3>
Primitive type declarator for single-precision real variables, translated into C type <q>float</q>.

Can be implicitly converted to REAL. REAL to SINGLE conversion must be explicit (see <a href="#Builtin">SINGLE:Builtin</a>). 
</div><div class=page id="TYPE">
Page: (cpl)TYPE, Next: <a href="#STRUCTURE">STRUCTURE</a>, Prev: <a href="#REAL">REAL</a>,  Up: <a href="#Declarations">Declarations</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Declaration of new type identifiers</h3>
A new type identifier can be declared as either

	TYPE newid = &lt;compound type&gt;

or just

	newid = &lt;compound type&gt;

The new identifier can be used in subsequent declarations in place of the r.h.s.

The TYPE of an already declared variable or expression can always be recovered from the pseudo-function

	TYPEOF(&lt;variable&gt;)

which can appear wherever a type name can. (E.g., it can be assigned to a type identifier or directly used to declare further variables or in the construction of a compound type.) When applied to a <a href="#POINTER">POINTER</a> or <a href="#STORED">STORED</a> type, this function returns the underlying base type.

In order to test whether a variable is of a given type the <a href="#IS">IS</a> comparison operator is available. See also <a href="#Type-identity">Type identity</a>.

The memory size in bytes of a type or variable (useful when using the <a href="#C-interface">C interface</a> or to estimate the memory requirements of the program) can be obtained from the pseudo-function

	SIZEOF(&lt;typeorvariable&gt;) 
</div><div class=page id="ENUM">
Page: (cpl)ENUM, Next: <a href="#STRUCTURE">STRUCTURE</a>, Prev: <a href="#TYPE">TYPE</a>, Up: <a href="#Declarations">Declarations</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Enumerated type</h3>
Not really a compound type, ENUM (much like Pascal enumerated type or C enum) variables take a finite set of explicitly enumerated labels as values. The syntax of this type declaration is

	ENUM(&lt;id1&gt;,&lt;id2&gt;,...)

and can directly declare variables or be assigned to a new type name like all other TYPEs. &lt;id1&gt;, &lt;id2&gt;, etc. are thereby declared as constants to which variables of the given type can be set or compared. The purpose of ENUM variables is to flag an alternative within a predefined set, while forbidding out-of-range values which could arise if INTEGERs were used for this purpose. No other operations than assignment and comparison are defined on them. 
</div><div class=page id="STRUCTURE">
Page: (cpl)STRUCTURE, Next: <a href="#ARRAY">ARRAY</a>, Prev: <a href="#ENUM">ENUM</a>, Up: <a href="#Declarations">Declarations</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>STRUCTUREs</h3>
The type declarator for structures is

	STRUCTURE(&lt;field declarations&gt;)

Field declarations follow exactly the same syntax as general variable declarations. For instance, to declare a structure containing one integer field named i and two real fields named x and y, one would write:

	STRUCTURE(INTEGER i; REAL x,y)

Structure elements are selected by either the traditional dot notation

	structure.field

or the selector-function notation

	field(structure)

Conversely, any function of a single argument can be called either as

	function(argument) or as
	argument.function

(familiar to those who are accustomed to <a href="#DYNAMIC">object-oriented features:DYNAMIC</a>.).

A structure declaration may also contain one or more <a href="#anonymous">anonymous</a> fields. 

<nav><table>
<tr><td><a href="#Menu-*-anonymous">Menu &lowast; anonymous</a>:</td><td>STRUCTURE fields</td></tr>
<tr><td><a href="#variable-size">variable size</a>:</td><td>STRUCTUREs</td></tr>
</table></nav>

</div><div class=page id="anonymous">
Page: (cpl)anonymous, Next: <a href="#variable-size">variable size</a>, Prev: <a href="#STRUCTURE">STRUCTURE</a>, Up: <a href="#STRUCTURE">STRUCTURE</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>Anonymous STRUCTURE fields</h4>
If a type declarator appears alone in the declaration of a STRUCTURE field, without any following variable name, an anonymous field is declared to which the given structure can be implicitly converted. For instance, after the declaration:

	TYPE t1=STRUCTURE(REAL a,b)
	STRUCTURE(t1; INTEGER n) var

var includes a field of type t1 of which var.a denotes the <q>a</q> field.

Anonymous structure fields are CPL's way to define objects that inherit the structure of other more general objects and add their own specific fields. When these objects are accessed as arguments to functions or subroutines, the appropriate function among those with the same name and different arguments is automatically selected. See also <a href="#Coactive-Parameter-Lists">Coactive Parameter Lists</a>, <a href="#DYNAMIC">DYNAMIC</a>. 
</div><div class=page id="variable-size">
Page: (cpl)variable size, Next: <a href="#ARRAY">ARRAY</a>, Prev: <a href="#anonymous">anonymous</a>, Up: <a href="#STRUCTURE">STRUCTURE</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>Variable size STRUCTUREs</h4>
STRUCTUREs may be defined that contain ARRAYs the size of which will only be known at run time. Such STRUCTURE TYPEs are declared with one or more INTEGER CONSTANTs among their fields. When a variable of the given type is allocated, either by using the name assigned to the TYPE in a <a href="#Declaration">Declaration</a> or in a <a href="#NEW">NEW</a> statement, the values following the type name in parentheses (like arguments of a function) are assigned to these CONSTANTs by order, and are simultaneously used to allocate a chunk of memory of the appropriate size. Being CONSTANTs, these fields cannot be altered in the subsequent life of the allocated STRUCTURE. Example:

	TYPE twoarrays=STRUCTURE[REAL x; INTEGER CONSTANT n
		POINTER TO twoarrays next
		ARRAY(1..n) OF INTEGER k; ARRAY(-n..2&lowast;n) OF REAL data]
	.............
	twoarrays(8) mytwoarrays mytwoarrays.next=NEW twoarrays(2&lowast;mytwoarrays.n)

Notice that this syntax is intentionally similar to the syntax for FUNCTIONs that contain ARRAYs of runtime-specified size as arguments. Compare <a href="#array-parameters">array parameters</a>. In fact, the set of arguments of a given function may usefully be thought of as a structure, although one that is invisible to the programmer and only exists as a conceptual model. 
</div><div class=page id="ARRAY">
Page: (cpl)ARRAY, Next: <a href="#STRUCTURED">STRUCTURED</a>, Prev: <a href="#STRUCTURE">STRUCTURE</a>, Up: <a href="#Declarations">Declarations</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>ARRAYs</h3>
The prefix type declarator for arrays is

	ARRAY(&lt;dimension&gt;[,&lt;dimension&gt;]) OF &lt;type&gt;

The postfix declarator is just (&lt;dimension&gt;[,&lt;dimension&gt;]). Each &lt;dimension&gt; is specified either as &lt;lower bound&gt;..&lt;upper bound&gt; or as &lt;upper bound&gt; only, in which case the lower bound is taken to be 1. Specifying multiple dimensions, like in ARRAY(&lt;dimension1&gt;,&lt;dimension2&gt;) OF, is a shorthand for

	ARRAY(&lt;dimension1&gt;) OF ARRAY(&lt;dimension2&gt;) OF

Therefore the order in which the elements of the array are stored in memory is similar to C and Pascal and different from FORTRAN.

Variable dimensions are allowed wherever constant dimensions are; the compiler automatically decides for static or dynamic allocation of memory space as needed. Arrays can contain elements of any primitive or compound type and can in turn appear as fields in structures or be pointed at by pointers.

The special dimension &lowast; can only appear in the declaration of an ARRAY formal parameter (<a href="#array-parameters">array parameters</a>) or of a POINTER TO ARRAY, and declares a special type of pointer that remembers the current dimensions of the array together with its address. A formal parameter or pointer of this type can be dynamically assigned arrays of different length and still provide runtime range checking and <a href="#FOR-ALL">FOR ALL</a> looping when requested. The actual upper and lower bounds of an array index can always be recovered through functions <a href="#HI">HI</a> and <a href="#LO">LO</a>, and the total number of elements through function <a href="#LENGTH">LENGTH</a>. In the case of multidimensional arrays, these functions apply to the first index only; <a href="#subarray">subarray</a> selection can be used in order to extract the bounds of other indices. Alternatively, LO1, LO2, LO3 and HI1, HI2, HI3 can be used to refer to the first three indices.

ARRAY elements are accessed through INTEGER indices in brackets as usual, e.g.:

	REAL arr(1..8,2..9)
	WRITE arr(4,5)

All three kinds of bracket are allowed (see <a href="#Parentheses">Parentheses</a>). It should be noted that the above declaration is a shorthand for

	ARRAY(1..8) OF ARRAY(2..9) OF REAL arr

Therefore, a notation such as arr(4) is allowed, and has type ARRAY(2..9) OF REAL. This is a particular case of a <a href="#subarray">subarray</a>. By the same token, the second line might also have been written as

	WRITE arr(4)(5)

<nav><table>
<tr><th>Menu: <input autocomplete="off" class="filter" type="text" onkeyup="tsearch()" onfocus="this.value='';tsearch()" placeholder="a-z" title="Filter menu items by initials"></th><th></th></tr>
<tr><td colspan="2"> </td></tr>
<tr><td colspan="2">The following special operations are defined on ARRAYs:

</td></tr>
<tr><td><a href="#HI">HI</a>:</td><td>upper bound of an array index</td></tr>
<tr><td><a href="#LO">LO</a>:</td><td>lower bound of an array index</td></tr>
<tr><td><a href="#LENGTH">LENGTH</a>:</td><td>number of elements of an array</td></tr>
<tr><td><a href="#subarray">subarray</a>:</td><td>subarray selection</td></tr>
<tr><td><a href="#compound-index">compound index</a>:</td><td>sequential access to a multidimensional array</td></tr>
<tr><td><a href="#ARRAY-operations">ARRAY operations</a>:</td><td>linear space</td></tr>
<tr><td><a href="#realignment">realignment</a>:</td><td>assignment to an ARRAY of different lower bound</td></tr>
<tr><td><a href="#Einstein-convention">Einstein convention</a>:</td><td>implicit index iteration</td></tr>
<tr><td><a href="#INTO">Pointer arithmetics:INTO</a>:</td><td></td></tr>
</table></nav>

</div><div class=page id="HI">
Page: (cpl)HI,  Next: <a href="#LO">LO</a>,  Prev: <a href="#ARRAY">ARRAY</a>,  Up: <a href="#ARRAY">ARRAY</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>Upper bound of an array index</h4>
Function HI applied to an ARRAY returns the upper bound of its first index. HI1 is a synonym for HI; HI2 and HI3 return the upper bound of the second and third index respectively. Further indices can be accessed by <a href="#subarray">subarray</a> selection.

The argument of HI is implicit (i.e., HI may be written without any argument as if <a href="#WITH">WITH</a> were in action) when HI is used inside the index itself as in arr(HI-3) or in the specification of a <a href="#FOR">FOR</a> loop. 
</div><div class=page id="LO">
Page: (cpl)LO,  Next: <a href="#LENGTH">LENGTH</a>,  Prev: <a href="#HI">HI</a>,  Up: <a href="#ARRAY">ARRAY</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>Lower bound of an array index</h4>
Function LO applied to an ARRAY returns the lower bound of its first index. LO1 is a synonym for LO; LO2 and LO3 return the lower bound of the second and third index respectively. Further indices can be accessed by <a href="#subarray">subarray</a> selection.

The argument of LO is implicit (i.e., LO may be written without any argument as if <a href="#WITH">WITH</a> were in action) when LO is used inside the index itself as in arr(LO+2) or in the specification of a <a href="#FOR">FOR</a> loop. 
</div><div class=page id="LENGTH">
Page: (cpl)LENGTH,  Prev: <a href="#LO">LO</a>,  Up: <a href="#ARRAY">ARRAY</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>Number of elements of an array</h4>
Function LENGTH applied to an ARRAY returns its number of elements. LENGTH is equivalent to HI-LO+1. In a multidimensional ARRAY, the number of values of the first index only is returned. 
</div><div class=page id="STRING">
Page: (cpl)STRING, Next: <a href="#STRUCTURED">STRUCTURED</a>, Prev: <a href="#ARRAY">ARRAY</a>, Up: <a href="#Declarations">Declarations</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>STRINGs</h3>
Type declaration STRING is a synonym for ARRAY(&lowast;) OF <a href="#CHAR">CHAR</a>, and can be used wherever the last can. In particular, a STRING can be subscripted or <a href="#subarray">subarray</a> extracted, and its bounds and length are available through functions <a href="#LO">LO</a>, <a href="#HI">HI</a>, and <a href="#LENGTH">LENGTH</a>. STRING valued constants (which are always indexed starting from 0) can be generated either at compile time, as quoted strings of characters, or dynamically through <a href="#String">String</a> concatenation, and can either be given a name through <a href="#CONSTANT">implicit:CONSTANT</a>. declaration or passed as actual parameters to function calls and further string concatenations.

Quoted strings of characters, also known as literals, are delimited by double quotes. They can contain any printing character, including UTF-8 or similar multibyte characters if allowed by the chained C compiler, except <q>, newline and null. In addition, C escape sequences are literals, but contrary to C must be placed outside quotes. A </q> character or a newline can be included in a literal as a concatenated escape sequence outside quotes. As an additional bash-like notation, multi-line literals containing quote characters and newlines may alternatively be introduced by

	&lt;&lt;DELIMITER

and ended by

	DELIMITER

alone on a new line, where DELIMITER can be any word that is not to be part of the literal itself. The null character is used for termination and cannot appear anywhere inside a STRING. The empty string <q></q> is also a valid (zero-character-long) STRING value.

Where appropriate, a single-byte literal is implicitly converted to a CHAR constant, which is in turn implicitly converted to an INTEGER ASCII code. Strings may also be concatenated among themselves and with variables, see <a href="#String">conversion:String</a>.

Standard C functions returning a char&lowast; (<a href="https://manpages.debian.org/string">manpages.debian.org/string</a>) are also interpreted as producing a STRING value. Just as for all C library functions, it is the programmer's responsibility to ensure that such functions are used consistently and to free any malloc-ated space where appropriate.

As an experimental feature, and an exception to the general rule for ARRAY(&lowast;), STRING VARIABLEs may also be declared and assigned a value. Memory space for such strings is automatically allocated and freed without the programmer's intervention.

<nav><table>
<tr><th>Menu: <input autocomplete="off" class="filter" type="text" onkeyup="tsearch()" onfocus="this.value='';tsearch()" placeholder="a-z" title="Filter menu items by initials"></th><th>Predefined strings are:</th></tr>
<tr><td colspan="2"> </td></tr>
<tr><td><a href="#COMMANDLINE">COMMANDLINE</a>:</td><td>command line argument access</td></tr>
<tr><td><a href="#TRAP">ERRORMESSAGE:TRAP</a>:</td><td>error message string</td></tr>
</table></nav>

</div><div class=page id="STRUCTURED">
Page: (cpl)STRUCTURED, Next: <a href="#POINTER">POINTER</a>, Prev: <a href="#STRING">STRING</a>, Up: <a href="#Declarations">Declarations</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>STRUCTURED ARRAY</h3>
A structure (<a href="#STRUCTURE">STRUCTURE</a>) of like elements that may also be accessed as a linear array (<a href="#ARRAY">ARRAY</a>) of such. Its type declarator is

	STRUCTURED ARRAY(&lt;field declarations&gt;) OF &lt;type&gt;

where &lt;field declarations&gt;, separated by commas, are either single newids or newids followed by (possibly multiple) array dimensions. For example,

	STRUCTURED ARRAY(a,b,c(1..4,1..2)) OF REAL stra

defines a STRUCTURE named stra with fields a, b of type REAL and c of type ARRAY(1..4,1..2) OF REAL. At the same time, stra may also be accessed as an ARRAY(0..9) OF REAL, with automatically determined bounds. This is particularly useful when the new type has to be subjected to <a href="#ARRAY-operations">ARRAY operations</a>. For instance, one can define a <q>Vector</q> type with fields x,y,z and then perform vector operations on variables of this type. 
</div><div class=page id="POINTER">
Page: (cpl)POINTER,  Next: <a href="#INTO">INTO</a>,  Prev: <a href="#ARRAY">ARRAY</a>,  Up: <a href="#Declarations">Declarations</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>POINTERs</h3>
The type declarator for pointers is POINTER TO (prefix) or ^ (postfix) (<a href="#Postfix">Postfix</a>). For example

	POINTER TO INTEGER a,b; INTEGER c

and

	INTEGER a^,b^,c

are equivalent declarations. The notation for pointer dereferencing is described in <a href="#Concealed-Pointer-Lookup">Concealed Pointer Lookup</a>.

A null pointer is denoted by the predefined constant

	NULL &lt;type&gt;

which translates to the C constant NULL (generally the address 0) with type &lt;type&gt; if this is a POINTER type, or POINTER TO &lt;type&gt; otherwise.

<h4>Uncommitted POINTERs</h4>
A pointer can also be declared with reference to a (yet) uncommitted type name, by the notation

	POINTER TO &lt;newid&gt;

It is implied that &lt;newid&gt; will later denote a type identifier. Variables, constants and structure fields of uncommitted pointer type can be declared, assigned and compared to each other like all POINTERs but not dereferenced. They become POINTERs in full rights as soon as a declaration for type &lt;newid&gt; is encountered.

Uncommitted pointers acquire a special meaning if used as formal parameters or function results (in which case no explicit declaration of type &lt;newid&gt; shall follow): a formal parameter of uncommitted pointer type can receive an actual parameter of any POINTER type (except POINTER TO ARRAY(&lowast;), which needs special treatment) as argument, thus allowing the coding of subroutines for the manipulation of generic pointers. Type checking will still be enforced based on the equality of type name. Of course, uncommitted pointers of this kind can never be dereferenced within the body of the subroutine itself.

See also <a href="#NEW">Memory allocation:NEW</a>, <a href="#DYNAMIC">Object-oriented features:DYNAMIC</a>. 
</div><div class=page id="INTO">
Page: (cpl)INTO, Next: <a href="#DYNAMIC">DYNAMIC</a>, Prev: <a href="#POINTER">POINTER</a>, Up: <a href="#Declarations">Declarations</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Pointer arithmetics</h3>
Pointer arithmetics is the most powerful feature C has in common with assembly language. It is, however, also one of its weakest points as far as type checking is concerned. For these reasons CPL only allows restricted forms of pointer arithmetics. One of these is <a href="#subarray">subarray</a> extraction. The other is the type declarator

	POINTER INTO &lt;array&gt;

which defines a pointer that can be decremented or incremented provided it stays within the bounds of ARRAY &lt;array&gt;. Arithmetics on such a pointer is allowed just as if it were an ordinary INTEGER; dereferencing is not implicit, as for ordinary POINTERS would be, but is obtained by using it as an index into its base array. For instance:

	REAL R(10)
	R(5)=0.5
	POINTER INTO R ip
	ip=3
	ip=ip+2
	WRITE R(ip)

In other words, code is written just as if an INTEGER index were used, but the program is compiled to use a pointer instead. This can sometimes improve performance, especially in short loops that perform few repeating operations. 
</div><div class=page id="DYNAMIC">
Page: (cpl)DYNAMIC, Next: <a href="#IS">IS</a>, Prev: <a href="#INTO">INTO</a>, Up: <a href="#Declarations">Declarations</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Object-oriented features</h3>
CPL is not an object-oriented language in which functions are supposed to be declared within object class declarations, and intentionally so. Object-like behaviour is achieved with ordinary STRUCTUREs through overloaded function names (see <a href="#Coactive-Parameter-Lists">Coactive Parameter Lists</a>) and implicit type conversion of an <a href="#anonymous">anonymous</a> STRUCTURE.

In addition, situations where the type of an object is not decided at compile time are catered for by <q>dynamic pointers</q>, pointers that can reference and provide type checking for objects whose type will only be known at run time. These are declared by the type declarator

	DYNAMIC POINTER

A function call in which such a pointer appears is transparently switched at run time to the function defined for the type of the actual parameters, or an error is thrown if no such function exists.

Pointers to variables of any but ARRAY(&lowast;) and STORED type can be assigned to a DYNAMIC POINTER. If the scope of assignment is to be restricted, the declaration becomes

	DYNAMIC POINTER TO &lt;type declarator&gt;

In this case only types which can be implicitly converted to &lt;type declarator&gt; are acceptable for the variable pointed to.

The actual type a dynamic pointer points to can be tested by the <a href="#IS">IS</a> operator. 
</div><div class=page id="IS">
Page: (cpl)IS,  Next: <a href="#Postfix">Postfix</a>,  Prev: <a href="#DYNAMIC">DYNAMIC</a>,  Up: <a href="#DYNAMIC">DYNAMIC</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>Type comparison</h4>
The actual type of the variable pointed to by a dynamic pointer (or, for that matter, of any variable) can be tested by the BOOLEAN expression

	&lt;pointer&gt; IS &lt;type&gt;

For instance, in

	DYNAMIC POINTER dyn
	............
	IF dyn IS INTEGER THEN
	............
	END IF

the IF block is executed only if the dynamic pointer dyn points at run time to a variable of INTEGER type. In addition, the IS test has the side effect of casting a dynamic pointer to an ordinary pointer of the tested type when the test succeeds, thus allowing its use as a regular variable. That is, in the above example dyn is implicitly converted to a POINTER TO INTEGER for the scope of the IF block. A restricted dynamic pointer may always be implicitly converted to its base type, as compatibility is enforced at compile time. 
</div><div class=page id="Postfix">
Page: (cpl)Postfix, Next: <a href="#Subroutine-type">Subroutine type</a>, Prev: <a href="#DYNAMIC">DYNAMIC</a>, Up: <a href="#Declarations">Declarations</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Postfix type modifiers</h3>
A postfix ^ denotes either pointer dereferencing (see <a href="#Concealed-Pointer-Lookup">^:Concealed Pointer Lookup</a>) or a short form of the POINTER declaration. For instance

			INTEGER a^,b^ is a shorthand for
			POINTER TO INTEGER a,b

A postfix form of the ARRAY declaration

	ARRAY(1..10) OF REAL a,b,c is
	REAL a(1..10),b(1..10),c(1..10)

When both a postfix modifier and a prefix type declarator are simultaneously present in a declaration, they represent the compound type that is obtained by prepending the postfix modifier to the type declarator. For example

	STRUCTURE(INTEGER x,y) A^(10)

is equivalent to

	POINTER TO ARRAY(10) OF STRUCTURE(INTEGER x,y) A 
</div><div class=page id="Subroutine-type">
Page: (cpl)Subroutine type, Next: <a href="#Implicit-function-declaration">Implicit function declaration</a>, Prev: <a href="#Postfix">Postfix</a>, Up: <a href="#Declarations">Declarations</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Variable call to a subroutine or function</h3>
A subroutine variable may be specified through the type declarator

	SUBROUTINE( &lt;argument declarations&gt; )

A function variable may be specified through the type declarator

	FUNCTION( &lt;argument declarations&gt; )-&gt;&lt;type&gt; or else
	&lt;type&gt; FUNCTION( &lt;argument declarations&gt; )

the first form being mandatory when the result has a pointer or array &lt;type&gt; and thus ambiguity can arise.

These type declarators can be used, just like all other type declarators, to declare variables and formal parameters, or as a part of new compound types. In addition to being assigned or compared to each other, subroutine variables can be assigned the name of a compatible subroutine as their value or as the actual parameter, and can later be called with the same syntax as normal (constant) subroutines and functions. 
</div><div class=page id="Implicit-function-declaration">
Page: (cpl)Implicit function declaration, Next: <a href="#Type-identity">Type identity</a>, Prev: <a href="#Subroutine-type">Subroutine type</a>, Up: <a href="#Declarations">Declarations</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Implicit declaration of functions or subroutines</h3>
Where a subroutine or function variable is expected (in an assignment or as an actual parameter to a call expecting a function-type argument), in alternative to the name of an existing function the implicit definition of a function can be passed. Such an implicit declaration is formed by the body of the function as it would appear after the = sign in a (<a href="#FUNCTION">short form:FUNCTION</a>) declaration, with the formal parameters identified by the names declared in their original function-variable declaration. For example,

	SUBROUTINE PLOT(FUNCTION(REAL x)-&gt;REAL f; REAL x1..x2)

(a declaration actually contained in graphics.cpl or gnuplot.cpl) declares a formal parameter f that takes an argument named x. After this declaration

	PLOT SIN(x^2),0..2&lowast;PI

is a valid call and implicitly declares f(x) = SIN(x^2) for the scope of PLOT. For greater clarity, or in rare cases where this syntax may generate confusion, angle brackets can be added as in the alternative syntax

	PLOT &lt;SIN(x^2)&gt;,0..2&lowast;PI 
</div><div class=page id="Type-identity">
Page: (cpl)Type identity, Prev: <a href="#Implicit-function-declaration">Implicit function declaration</a>, Up: <a href="#Declarations">Declarations</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Type identity</h3>
When are two VARIABLEs of the same TYPE? Pascal-like strongly typed languages only consider variables of the same type when they are declared by the same typename or they appear in the same compound declaration. In other words, repeated compound declarations are not considered the same type even when they are equal, just as are not considered the same type two different typenames with similar definitions. C, on the other hand, handles typenames as bare aliases, and compares their definitions directly. None of these languages has runtime-dimensioned arrays. CPL takes the C approach when possible, and compares type definitions, but explicitly considers two different typenames different even when they correspond to the same declaration. Generally, it is good practice to declare variables that must be of the same type in a single declaration, or through a single typename, or through <a href="#TYPE">TYPEOF:TYPE</a>. This is particularly true with runtime-dimensioned arrays (ARRAYs whose bounds are specified by a VARIABLE and are only known at run time). In fact, since a VARIABLE may take on different values in different parts of the program, multiple declarations of this type are necessarily considered different.

In order to test whether a variable is of a given type the <a href="#IS">IS</a> comparison operator is available. 
</div><div class=page id="Statements">
Page: (cpl)Statements, Next: <a href="#Control">Control</a>, Prev: <a href="#Declarations">Declarations</a>, Up: <a href="#Top">Top</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h2>Executable statements and expressions</h2>
<nav><table>
<tr><th>Menu: <input autocomplete="off" class="filter" type="text" onkeyup="tsearch()" onfocus="this.value='';tsearch()" placeholder="a-z" title="Filter menu items by initials"></th><th></th></tr>
<tr><td colspan="2"> </td></tr>
<tr><td><a href="#Expressions">Expressions</a>:</td><td>construction and operators</td></tr>
<tr><td><a href="#Assignment">Assignment</a>:</td><td>rules</td></tr>
<tr><td><a href="#Assignment">~:Assignment</a>:</td><td>placeholder for the l.h.s.</td></tr>
<tr><td><a href="#Deferred-assignment">Deferred assignment</a>:</td><td>to be performed where the symbol is used</td></tr>
<tr><td><a href="#Concealed-Pointer-Lookup">Implicit type conversion:Concealed Pointer Lookup</a>:</td><td></td></tr>
<tr><td><a href="#WITH">WITH</a>:</td><td>implicit access to structure fields and functions</td></tr>
<tr><td><a href="#NEW">Memory or file allocation:NEW</a>:</td><td>and FREE</td></tr>
<tr><td><a href="#Input/Output">Input/Output</a>:</td><td>formatted and binary</td></tr>
<tr><td><a href="#Control">Control</a>:</td><td>Program flow control statements</td></tr>
</table></nav>

</div><div class=page id="Expressions">
Page: (cpl)Expressions, Next: <a href="#Assignment">Assignment</a>, Prev: <a href="#Statements">Statements</a>, Up: <a href="#Statements">Statements</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Expressions</h3>
<nav><table>
<tr><th>Menu: <input autocomplete="off" class="filter" type="text" onkeyup="tsearch()" onfocus="this.value='';tsearch()" placeholder="a-z" title="Filter menu items by initials"></th><th></th></tr>
<tr><td colspan="2"> </td></tr>
<tr><td><a href="#INTEGER-operator">INTEGER operator</a>:</td><td>+  -  &lowast;  DIV  MOD</td></tr>
<tr><td><a href="#REAL-operator">REAL operator</a>:</td><td>+  -  &lowast;  /  ^</td></tr>
<tr><td><a href="#Comparison">Comparison</a>:</td><td>&gt;  &gt;=  &lt;  &lt;=  =  #  IS</td></tr>
<tr><td><a href="#BOOLEAN-ops">BOOLEAN ops</a>:</td><td>AND  OR  NOT</td></tr>
<tr><td><a href="#Conditional-expressions">Conditional expressions</a>:</td><td>embedded IF...THEN...ELSE</td></tr>
<tr><td><a href="#Bitwise">Bitwise</a>:</td><td>bitwise boolean operators</td></tr>
<tr><td><a href="#String">String</a>:</td><td>concatenation and conversion</td></tr>
<tr><td><a href="#Looping-operator">Looping operator</a>:</td><td>SUM  PRODUCT  MIN  MAX ARGMIN ARGMAX</td></tr>
<tr><td><a href="#Builtin">Builtin</a>:</td><td>built-in functions</td></tr>
<tr><td><a href="#subarray">subarray</a>:</td><td>subarray selection</td></tr>
<tr><td><a href="#compound-index">compound index</a>:</td><td>sequential access to a multidimensional array</td></tr>
<tr><td><a href="#ARRAY-operations">ARRAY operations</a>:</td><td>linear space</td></tr>
<tr><td><a href="#Einstein-convention">Einstein convention</a>:</td><td>implicit index iteration</td></tr>
<tr><td><a href="#OPERATOR">OPERATOR</a>:</td><td>overloading</td></tr>
</table></nav>

</div><div class=page id="INTEGER-operator">
Page: (cpl)INTEGER operator, Next: <a href="#REAL-operator">REAL operator</a>, Prev: <a href="#Expressions">Expressions</a>, Up: <a href="#Expressions">Expressions</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>INTEGER operators:	+  -  &lowast;  DIV  MOD</h4>
DIV is the INTEGER division operator, and produces a truncated-towards-minusinfinity INTEGER quotient a DIV b = FLOOR(a/b) (see <a href="#FLOOR">FLOOR</a>). <q>a/b</q> is reserved for REALs, and produces a REAL result even with INTEGER operands a,b.

MOD is the <q>modulo</q> infix operator. If a and b are INTEGERs,

	a MOD b

represents the remainder of the integer division of a by b, defined in such a way that (a DIV b)&lowast;b + (a MOD b) always equals a.

Notice on the truncation of integer division: CPL defines a DIV b = FLOOR(a/b) so that a MOD b has the same sign as b independently of the sign of a, and modular arithmetics can be applied to negative as well as to positive a's, for example in array index manipulations. This implies that a MOD b is negative for negative b, but this case has hardly any uses.

Care should be taken when porting programs from languages that truncate negative division towards zero, such as FORTRAN or C. Operators following the C convention of truncating integer division and signed modulo are available, if needed, as CDIV and CMOD respectively. 
</div><div class=page id="REAL-operator">
Page: (cpl)REAL operator, Next: <a href="#Comparison">Comparison</a>, Prev: <a href="#INTEGER-operator">INTEGER operator</a>, Up: <a href="#Expressions">Expressions</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>REAL operators:		+  -  &lowast;  /  ^ (or &lowast;&lowast;)</h4>
An infix ^ (or &lowast;&lowast;) is the exponentiation operator. <a href="#Postfix">Postfix</a> ^ is the pointer dereferencing operator. Also <a href="#Concealed-Pointer-Lookup">prefix ^:Concealed Pointer Lookup</a>. 
</div><div class=page id="Comparison">
Page: (cpl)Comparison, Next: <a href="#BOOLEAN-ops">BOOLEAN ops</a>, Prev: <a href="#REAL-operator">REAL operator</a>, Up: <a href="#Expressions">Expressions</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>Comparison:		&gt;  &gt;=  &lt;  &lt;=  =  #  IS</h4>
The first four apply to numeric types. The = equality and # inequality operators apply to any type, including pointers. Since pointers are implicitly dereferenced (see<a href="#Concealed-Pointer-Lookup">Concealed Pointer Lookup</a>), an ambiguity may arise as to whether the values or addresses of the two sides must be compared. The comparison generally takes place at the lowest dereferencing level at which types match, but the comparison of two constant addresses is not allowed (so that A = B, where A and B are two simple variables, denotes the comparison of the values of A and B rather than their addresses). Explicit type cast or pointer dereferencing may at times be necessary, and is always advised, where ambiguities exist. This is the only unavoidable use of dereferencing in CPL.

It can be noticed that no need exists to denote equality by any other symbol than =, because no other meaning is given to = inside an expression. In the C language the need for a separate symbol == arises because = is reserved for assignment even when it occurs inside an expression. This can sometimes make a C compiler accept hard-to-spot typing errors as meaningful code. CPL has no concept of assignment expression, and therefore no confusion can arise. Similarly no confusion can arise when = occurring before an expression actually denotes an assignment (see <a href="#Assignment">Assignment</a>), because its alternate interpretation as a hanging comparison is not part of the language. (In C, by contrast, a hanging expression is allowed for its possible side effects, and its value is simply discarded.)

The type-testing operator IS is described in <a href="#DYNAMIC">Object-oriented features:DYNAMIC</a>. 
</div><div class=page id="BOOLEAN-ops">
Page: (cpl)BOOLEAN ops, Next: <a href="#Conditional-expressions">Conditional expressions</a>, Prev: <a href="#Comparison">Comparison</a>, Up: <a href="#Expressions">Expressions</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>BOOLEAN operators</h4>
<nav><table>
<tr><th>Menu: <input autocomplete="off" class="filter" type="text" onkeyup="tsearch()" onfocus="this.value='';tsearch()" placeholder="a-z" title="Filter menu items by initials"></th><th></th></tr>
<tr><td colspan="2"> </td></tr>
<tr><td><a href="#AND">AND</a>:</td><td>boolean AND operator</td></tr>
<tr><td><a href="#OR">OR</a>:</td><td>boolean OR operator</td></tr>
<tr><td><a href="#NOT">NOT</a>:</td><td>boolean NOT operator</td></tr>
<tr><td colspan="2"> </td></tr>
<tr><td colspan="2">BOOLEAN results are produced by <a href="#Comparison">Comparison</a> and <a href="#Builtin">BOOLEAN:Builtin</a>. </td></tr>
</table></nav>

</div><div class=page id="AND">
Page: (cpl)AND,  Next: <a href="#OR">OR</a>,  Prev: <a href="#BOOLEAN-ops">BOOLEAN ops</a>,  Up: <a href="#BOOLEAN-ops">BOOLEAN ops</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>AND:		boolean AND operator</h4>
Takes precedence over OR but not NOT.

AND may also appear in a FOR clause (<a href="#FOR-AND">FOR AND</a>) and in <a href="#READ">READ</a>. 
</div><div class=page id="OR">
Page: (cpl)OR,  Next: <a href="#NOT">NOT</a>,  Prev: <a href="#AND">AND</a>,  Up: <a href="#BOOLEAN-ops">BOOLEAN ops</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>OR:		boolean OR operator</h4>
Has lower precedence than either AND or NOT.

OR may also appear in a <a href="#READ">READ</a> statement. 
</div><div class=page id="NOT">
Page: (cpl)NOT,  Prev: <a href="#OR">OR</a>,  Up: <a href="#BOOLEAN-ops">BOOLEAN ops</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>NOT:		boolean NOT operator</h4>
Has higher precedence than either AND or OR. 
</div><div class=page id="Conditional-expressions">
Page: (cpl)Conditional expressions, Next: <a href="#Bitwise">Bitwise</a>, Prev: <a href="#BOOLEAN-ops">BOOLEAN ops</a>,  Up: <a href="#Expressions">Expressions</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>Conditional expressions</h4>
	IF &lt;BOOLEAN&gt; THEN &lt;expr1&gt; ELSE &lt;expr2&gt;

is an expression that takes the value of &lt;expr1&gt; if &lt;BOOLEAN&gt; is true and &lt;expr2&gt; if false. &lt;expr1&gt; and &lt;expr2&gt; must evaluate to values of the same type (or implicitly convertible to the same type) and this is the type of the result, which can be embedded in a larger expression like any other operator. Notice that the ELSE part is mandatory, as otherwise the value would be undefined.

See also the <a href="#IF">IF</a> statement. 
</div><div class=page id="Bitwise">
Page: (cpl)Bitwise, Next: <a href="#String">String</a>, Prev: <a href="#Conditional-expressions">Conditional expressions</a>, Up: <a href="#Expressions">Expressions</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>Bitwise boolean operations: BITAND BITOR BITXOR BITNOT RSHIFTED LSHIFTED</h4>
The C-like notation &amp; | &gt;&gt; &lt;&lt; is also available for BITAND BITOR RSHIFTED LSHIFTED. ^ and ~ are reserved as the <a href="#REAL-operator">exponentiation:REAL operator</a>. and the <a href="#Assignment">placeholder:Assignment</a>. 
</div><div class=page id="String">
Page: (cpl)String, Next: <a href="#Looping-operator">Looping operator</a>, Prev: <a href="#Bitwise">Bitwise</a>, Up: <a href="#Expressions">Expressions</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>String concatenation</h4>
STRINGs written one after the other with no intervening operator (whitespace is allowed, but newlines must be escaped), either in literal (quoted) form or through their names, are concatenated into a single <a href="#STRING">STRING</a>. If all of the STRINGs are literals (i.e., known at compile time), the result will also be a literal, otherwise it will be a dynamically allocated ARRAY(&lowast;) OF CHAR which is transparently freed at the end of the enclosing code block.

<h4>String conversion</h4>
In addition to STRINGs, values of different type may appear in a concatenation, provided the first item is an actual STRING (possibly <q></q>); they are then implicitly converted to strings just as if they appeared in a <a href="#WRITE">WRITE</a> statement. Please pay attention that a numeric parenthesis that is concatenated after a string will be interpreted as an ARRAY subscript, since the STRING is a legitimate ARRAY OF CHAR, unless space is placed between the string and the parenthesis. Conversion of a string into a numeric value must be handled explicitly through existing (<a href="https://manpages.debian.org/string">manpages.debian.org/string</a>) functions.

When a string literal is defined in &lt;&lt; DELIMITER notation (see <a href="#STRING">STRING</a>), a variable included as DELIMITER &lt;variable&gt; DELIMITER is concatenated within the string being defined just as above (whereas DELIMITER &lt;newline&gt; ends the definition).


</div><div class=page id="Looping-operator">
Page: (cpl)Looping operator, Next: <a href="#Builtin">Builtin</a>, Prev: <a href="#String">String</a>, Up: <a href="#Expressions">Expressions</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>Looping operators</h4>
The four operators SUM  PRODUCT  MAX  MIN embody a loop to denote respectively the sum, product, maximum and minimum of an expression over a running index. ARGMAX and ARGMIN act like MAX and MIN but return the value of the index. They are constructed as in

	SUM &lt;expression&gt; FOR &lt;for clause&gt;

and return a value of the same TYPE as &lt;expression&gt;. &lt;for clause&gt; can be of any form that is allowed in a <a href="#FOR">FOR</a> loop.

For example:

	WRITE (MAX SIN(x) FOR x=0. TO 2 BY 0.5)+(PRODUCT arr(n) FOR ALL n)

See also <a href="#MAX">MAX</a>, <a href="#MIN">MIN</a>. 
</div><div class=page id="Builtin">
Page: (cpl)Builtin, Next: <a href="#subarray">subarray</a>, Prev: <a href="#Looping-operator">Looping operator</a>, Up: <a href="#Expressions">Expressions</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr><nav><table>
<tr><th>Menu: <input autocomplete="off" class="filter" type="text" onkeyup="tsearch()" onfocus="this.value='';tsearch()" placeholder="a-z" title="Filter menu items by initials"></th><th></th></tr>
<tr><td colspan="2"> </td></tr>
<tr><td colspan="2"><h4>Builtin INTEGER functions</h4>
</td></tr>
<tr><td><a href="#ABS">ABS</a>:</td><td>absolute value</td></tr>
<tr><td><a href="#MAX">ARGMAX:MAX</a>:</td><td>argument for maximum</td></tr>
<tr><td><a href="#MIN">ARGMIN:MIN</a>:</td><td>argument for minimum</td></tr>
<tr><td><a href="#CEILING">CEILING</a>:</td><td>larger or equal integer</td></tr>
<tr><td><a href="#FLOOR">FLOOR</a>:</td><td>lesser or equal integer</td></tr>
<tr><td><a href="#MAX">MAX</a>:</td><td>maximum</td></tr>
<tr><td><a href="#MIN">MIN</a>:</td><td>minimum</td></tr>
<tr><td><a href="#ROUND">ROUND</a>:</td><td>nearest integer</td></tr>
<tr><td colspan="2"> </td></tr>
<tr><td colspan="2"><h4>Builtin REAL functions</h4>
</td></tr>
<tr><td><a href="#ABS">ABS</a>:</td><td>absolute value</td></tr>
<tr><td colspan="2">  ARG:			argument of a complex number
</td></tr>
<tr><td colspan="2">  ATAN:			arctangent
</td></tr>
<tr><td colspan="2">  COS:			cosine
</td></tr>
<tr><td colspan="2">  EXP:			exponential </td></tr>
<tr><td><a href="#GAUSS">GAUSS</a>:</td><td>gaussian distributed random REAL number with variance 1</td></tr>
<tr><td colspan="2">  LOG:			logarithm </td></tr>
<tr><td><a href="#MAX">MAX</a>:</td><td>maximum</td></tr>
<tr><td><a href="#MAXABS">MAXABS</a>:</td><td>maximum absolute value</td></tr>
<tr><td><a href="#MIN">MIN</a>:</td><td>minimum</td></tr>
<tr><td><a href="#NORM">NORM</a>:</td><td>squared absolute value</td></tr>
<tr><td><a href="#RAND">RAND</a>:</td><td>uniformly distributed in [0,1] random number</td></tr>
<tr><td colspan="2">  SIN:			sine
</td></tr>
<tr><td colspan="2">  SQRT:			square root
</td></tr>
<tr><td colspan="2">  TAN:			tangent

</td></tr>
<tr><td colspan="2"><h4>Builtin BOOLEAN functions</h4>
</td></tr>
<tr><td colspan="2">  EOF:			end of file </td></tr>
<tr><td><a href="#INPUTREADY">INPUTREADY</a>:</td><td>test for input ready on a file descriptor or stdin</td></tr>
<tr><td colspan="2">  ODD:			INTEGER argument is odd </td></tr>
<tr><td><a href="#READ">BOOLEAN:READ</a>:</td><td>read and report success or failure</td></tr>
<tr><td colspan="2"> </td></tr>
<tr><td colspan="2"><h4>Builtin type conversion functions</h4>
</td></tr>
<tr><td colspan="2">  CHAR:			INTEGER to CHAR
</td></tr>
<tr><td colspan="2">  INTEGER:		BOOLEAN to INTEGER (1 for YES, 0 for NO)
</td></tr>
<tr><td colspan="2">  INTEGER:		REAL to INTEGER (same as <a href="#FLOOR">FLOOR</a>)
</td></tr>
<tr><td colspan="2">  REAL:			INTEGER to REAL (may be omitted)
</td></tr>
<tr><td colspan="2">  SINGLE:		REAL to SINGLE

</td></tr>
<tr><td colspan="2"><h4>Builtin STRING functions</h4>
</td></tr>
<tr><td><a href="#COMMANDLINE">COMMANDLINE</a>:</td><td>command line argument access</td></tr>
<tr><td><a href="#TRAP">ERRORMESSAGE:TRAP</a>:</td><td>error message string</td></tr>
<tr><td><a href="#String">String</a>:</td><td>Concatenation and conversion.</td></tr>
<tr><td colspan="2"> </td></tr>
<tr><td colspan="2"><h4>Builtin inline subroutine</h4>
</td></tr>
<tr><td colspan="2">  INC &lt;arg&gt; [,&lt;increment&gt;] : Increase &lt;arg&gt; by &lt;increment&gt; (default 1)
</td></tr>
<tr><td colspan="2">  DEC &lt;arg&gt; [,&lt;decrement&gt;] : Decrease &lt;arg&gt; by &lt;decrement&gt; (default 1)
</td></tr>
<tr><td colspan="2">  SWAP(.,.): swap the values of arguments of any compatible type.

</td></tr>
<tr><td colspan="2">In addition, nearly all C library mathematical and other functions are </td></tr>
<tr><td colspan="2">transparently available with their original names. See <a href="#C-interface">C interface</a>. </td></tr>
</table></nav>

</div><div class=page id="ABS">
Page: (cpl)ABS,  Next: <a href="#CEILING">CEILING</a>,  Prev: <a href="#Builtin">Builtin</a>,  Up: <a href="#Builtin">Builtin</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> ABS:		absolute value

Function ABS returns the absolute value of an INTEGER, REAL or COMPLEX number, or of an ARRAY of those. 
</div><div class=page id="CEILING">
Page: (cpl)CEILING,  Next: <a href="#FLOOR">FLOOR</a>,  Prev: <a href="#ABS">ABS</a>,  Up: <a href="#Builtin">Builtin</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> CEILING:	larger or equal integer

The function CEILING returns the larger or equal INTEGER to a given REAL value. 
</div><div class=page id="FLOOR">
Page: (cpl)FLOOR,  Next: <a href="#MAX">MAX</a>,  Prev: <a href="#CEILING">CEILING</a>,  Up: <a href="#Builtin">Builtin</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> FLOOR:		lesser or equal integer

The function FLOOR returns the lesser or equal INTEGER to a given REAL value. 
</div><div class=page id="MAX">
Page: (cpl)MAX,  Next: <a href="#MAXABS">MAXABS</a>,  Prev: <a href="#ABS">ABS</a>,  Up: <a href="#Builtin">Builtin</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> MAX:		maximum

The function

	MAX(argument [,argument])

accepts any number of scalar arguments and returns their maximum.

The function

	MAX(array)

returns the maximum of the elements of the array.

The function

	ARGMAX(array)

returns the first index where the maximum is found.

MAX or ARGMAX without a following bracket is a <a href="#Looping-operator">Looping operator</a>. 
</div><div class=page id="MAXABS">
Page: (cpl)MAXABS,  Next: <a href="#MIN">MIN</a>,  Prev: <a href="#MAX">MAX</a>,  Up: <a href="#Builtin">Builtin</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> MAXABS:		maximum absolute value

The function

	MAXABS(array)

returns the maximum absolute value of the elements of the array. 
</div><div class=page id="MIN">
Page: (cpl)MIN,  Next: <a href="#NORM">NORM</a>,  Prev: <a href="#MAXABS">MAXABS</a>,  Up: <a href="#Builtin">Builtin</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> MIN:		minimum

The function

	MIN(argument [,argument])

accepts any number of scalar arguments and returns their minimum.

The function

	MIN(array)

returns the minimum of the elements of the array.

The function

	ARGMIN(array)

returns the first index where the minimum is found.

MIN or ARGMIN without a following bracket is a <a href="#Looping-operator">Looping operator</a>. 
</div><div class=page id="NORM">
Page: (cpl)NORM,  Next: <a href="#RAND">RAND</a>,  Prev: <a href="#MIN">MIN</a>,  Up: <a href="#Builtin">Builtin</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> NORM:		squared absolute value

The function NORM returns the squared absolute value of either a number or a whole array. 
</div><div class=page id="RAND">
Page: (cpl)RAND,  Next: <a href="#GAUSS">GAUSS</a>,  Prev: <a href="#MIN">MIN</a>,  Up: <a href="#Builtin">Builtin</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> RAND:		uniformly distributed in (0,1) random REAL number

The function RAND takes no argument. It is based on the INTEGER C library function rand, whose seed can be changed with srand (<a href="https://manpages.debian.org/rand.html">manpages.debian.org/rand.html</a>). 
</div><div class=page id="GAUSS">
Page: (cpl)GAUSS,  Next: <a href="#ROUND">ROUND</a>,  Prev: <a href="#RAND">RAND</a>,  Up: <a href="#Builtin">Builtin</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> GAUSS:		gaussian distributed random REAL number with variance 1

The function GAUSS takes no argument. It is based on <a href="#RAND">RAND</a>, and the analytic formula (see Knuth, The Art of Computer Programming, chapter on random numbers):

	GAUSS = SQRT{-2&lowast;LOG[RAND()]}&lowast;COS[PI&lowast;RAND()] 
</div><div class=page id="ROUND">
Page: (cpl)ROUND,  Prev: <a href="#GAUSS">GAUSS</a>,  Up: <a href="#Builtin">Builtin</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> ROUND:		nearest integer

The function ROUND returns the nearest INTEGER to a given REAL value. 
</div><div class=page id="subarray">
Page: (cpl)subarray, Next: <a href="#compound-index">compound index</a>, Prev: <a href="#Builtin">Builtin</a>, Up: <a href="#Expressions">Expressions</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>Subarray selection</h4>
A portion of an array can be selected by specifying new dimensions. For example, if the original declaration is REAL arr(1..10), the notation

	arr(2..5)

denotes an array formed by the elements from 2 to 5 of array arr (which has larger dimensions). The whole range can also be selected, by the special dimension &lowast;. For instance, if the original declaration is REAL arr(1..7,-2..2,3..8),

	arr(2..5,&lowast;,6)

denotes a two-dimensional array formed by selecting the range 2..5 of the first index and the whole range of the second index of array arr, with the third index set equal to 6.

The most general subarray selection can also specify an offset and one or more strides. The notation for this is:

	arr(a+b1&lowast;(&lt;newdim1&gt;)[+b2&lowast;(&lt;newdim2&gt;)...])

where a, b1, b2... are INTEGERs and &lt;newdim&gt; is either a subrange l..h or &lowast;. The meaning of this notation is that the subarray must be formed of those elements of the original array arr whose index is the specified linear function of the new index or indices. The latter are either constrained in the explicitly indicated range l..h or in the maximum admissible range &lowast;. In fact, a general linear expression may be specified, with terms in any order and the possible occurrence of parentheses.

Another form of subarray selection is index permutation, which in the particular case of a two-dimensional array becomes matrix transposition.

	arr(&lowast;&lt;n&gt;,...)

denotes the array obtained from arr by making the &lt;n&gt;-th index become the first and shifting forward all the others. Thus the transpose of a matrix A is A(&lowast;2,&lowast;), or just A(&lowast;2); the alternative notation

	TRANSPOSED(A)

is also provided. &lt;n&gt; is currently limited to 2 or 3.

Finally, a subarray can be extracted from an ARRAY of STRUCTUREs. If the declaration is, for instance,

	ARRAY(1..10) OF STRUCTURE(INTEGER i; REAL r) arr

then by a straightforward notation arr.r is the ARRAY(1..10) OF REAL composed of all the r fields of each element of arr. Thus, for instance, arr(5).r and arr.r(5) denote the same REAL field. arr.r is an ARRAY in its own right; it can be copied, passed as an argument or subjected to further subarray selections.

It should be noted that all subarray selections are just address manipulations: no element of the array is ever moved and the selected subarray can appear on the left as well as on the right side of an assignment, and can be passed as a POINTER TO ARRAY(&lowast;) argument to a function or subroutine. No computational penalty is incurred because of the sheer size of either the original or the selected array, but on the other hand any modifications of the subarray also affect the original.

All subarray selections can also be applied to <a href="#STORED">STORED</a> ARRAYs and <a href="#STRUCTURED">STRUCTURED</a> ARRAYs. 
</div><div class=page id="compound-index">
Page: (cpl)compound index, Next: <a href="#ARRAY-operations">ARRAY operations</a>, Prev: <a href="#subarray">subarray</a>, Up: <a href="#Expressions">Expressions</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>Compound index</h4>
This CPL address manipulation allows a multidimensional ARRAY to be accessed sequentially through a single index, for instance in order to apply linear algebra to it. The syntax for this operation is a sequence of as many &lowast; as indices are to be compounded. For example if V is defined as

	ARRAY(0..4,1..5,-7..7,0..2) OF REAL V

then V(&lowast;&lowast;&lowast;&lowast;) is a onedimensional <q>view</q> of the same array (as opposed to V(&lowast;,&lowast;,&lowast;,&lowast;) which represents its original arrangement). By the same token V(&lowast;,&lowast;&lowast;,&lowast;) is the three-dimensional array obtained by compounding the two central indices into one. Bounds of a compound index can be retrieved by the <a href="#LO">LO</a>. and <a href="#HI">HI</a>. functions as usual.

Compound indices are restricted to arrays (or portions of them) that are contiguous in memory. This generally precludes their use after subarray operations that permute, stride, or restrict the range of indices. 
</div><div class=page id="ARRAY-operations">
Page: (cpl)ARRAY operations, Next: <a href="#realignment">realignment</a>, Prev: <a href="#compound-index">compound index</a>, Up: <a href="#Expressions">Expressions</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>Linear-space ARRAY operations</h4>
Linear-space operations are supported on arrays. That is, congruent ARRAYs of any number of dimensions can be added to or subtracted from each other and multiplied or divided by a scalar inside an expression, as well as appear on the left side of an assignment.

The scalar product of two congruent arrays is denoted by the infix operator | . This is defined as the sum over all dimensions of the products of corresponding elements. (Except for <a href="complex.html#Top">(complex)Top</a>)

The constant <q>0</q> (but not any other constant) can be assigned as a value to a whole array.

Some <a href="#Builtin">Builtin</a> functions operate on whole arrays. A larger set of vector and matrix algebra operations are supported by the <a href="matrix.html#Top">rbmat:(matrix)</a>. and <a href="matrix.html#Top">cbmat:(matrix)</a>. libraries.

Matrix transposition is provided as the <a href="#subarray">TRANSPOSED:subarray</a>. operation.

All ARRAY operations can also be applied to <a href="#STORED">STORED</a> ARRAYs and <a href="#STRUCTURED">STRUCTURED</a> ARRAYs. 
</div><div class=page id="realignment">
Page: (cpl)realignment, Next: <a href="#Einstein-convention">Einstein convention</a>, Prev: <a href="#ARRAY-operations">ARRAY operations</a>, Up: <a href="#Expressions">Expressions</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>Assignment to an ARRAY of different lower bound</h4>
When an ARRAY is assigned in a compound = statement to another of the same base type and number of elements, its lower bound is implicitly realigned so all the elements are copied. A similar realignment of the lower bound takes place for function arguments, provided that base type and total number of elements match. Assigning to a different base type triggers a compile-time error; mismatch in the number of elements is flagged by <a href="#rtchecks">rtchecks</a> at run time.

Realignment also takes place for <a href="matrix.html#Top">matrix operations:(matrix)</a>:. 
</div><div class=page id="Einstein-convention">
Page: (cpl)Einstein convention, Next: <a href="#OPERATOR">OPERATOR</a>, Prev: <a href="#realignment">realignment</a>, Up: <a href="#Expressions">Expressions</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>Implicit looping over array indices</h4>
When indices in an expression are prefixed with a <q>$</q> character, the Einstein convention is implied. In a contraction or in a product the Einstein index must appear exactly twice, and the result will be summed over <a href="#ALL">ALL</a> values of this index; in a sum or in an assignment, Einstein indices must appear exactly once in each and all terms including the l.h.s., and the assignment will be repeated over <a href="#ALL">ALL</a> values of these indices. For example:

	C($i,$j)=A($i,$j,$m)&lowast;B($i,$m,$j)+D($j,$i)

Footnote: the euro symbol would have been appropriate to match the <q>e</q> of Einstein, but it is not part of the 7-bit ascii codes so we replaced it by a currency that is (the $). 
</div><div class=page id="OPERATOR">
Page: (cpl)OPERATOR, Next: <a href="#Assignment">Assignment</a>, Prev: <a href="#Einstein-convention">Einstein convention</a>, Up: <a href="#Expressions">Expressions</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>Operator overloading</h4>
New meanings can be assigned to the standard operators by the declaration

	OPERATOR &lt;type&gt; &lt;id&gt; &lt;op&gt; &lt;type&gt; &lt;id&gt; = &lt;expression&gt;

Similar to an INLINE FUNCTION (see <a href="#INLINE">INLINE</a>), this statement does not generate any executable code but determines a compile-time equivalence, or more exactly an inline substitution, of the expression on the right for the operator on the left. For instance, after defining a COMPLEX type and a ComplexAddition function, an operator using this function could be defined as

	OPERATOR COMPLEX x + COMPLEX y = ComplexAddition(x,y)

The appropriate realization of the operator is chosen, just as for either INLINE or proper FUNCTIONs, based on the type of its operands. The order of precedence of the standard arithmetic operators cannot be altered. 
</div><div class=page id="Assignment">
Page: (cpl)Assignment, Next: <a href="#Deferred-assignment">Deferred assignment</a>, Prev: <a href="#Expressions">Expressions</a>, Up: <a href="#Statements">Statements</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Assignment</h3>
Assignment is performed by a single <q>=</q> sign. The l.h.s. must be a POINTER, and the r.h.s. is required to be a value of the TYPE pointed to or to be implicitly convertible to it (see <a href="#Concealed-Pointer-Lookup">Concealed Pointer Lookup</a>). Compound variables can be assigned as a whole if types match.

Owing to their all-encompassing role, assignment and equality/inequality tests are the only situations in which pointer dereferencing must be explicit. The left side of an assignment will never be implicitly dereferenced, and must be dereferenced by a postfix <q>^</q> if assignment of the value pointed to is desired. For increased clarity, the type of the object to be assigned may also be specified, as in the example (after the declaration REAL a^,b):

	REAL a=b	equivalent to      a^=b.

At any position in the expression appearing on the right-hand side of an assignment the symbol ~ can be used as a placeholder for the left hand. For example:

	counter = ~ + 2
	listelement = ~.next
	A(i,j,k) = 3 &lowast; LOG(~) + gamma(~)	 
</div><div class=page id="Deferred-assignment">
Page: (cpl)Deferred assignment, Next: <a href="#Concealed-Pointer-Lookup">Concealed Pointer Lookup</a>, Prev: <a href="#Assignment">Assignment</a>, Up: <a href="#Statements">Statements</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Deferred assignment</h3>
When an assignment is performed by a double <q>==</q> sign, no statement is generated in place. The l.h.s. is instead defined to be an alias for the r.h.s., and the assignment will be performed (and error messages issued, if any) at the location where this alias is first used.

Deferred assignment permits the appearance on the r.h.s. of yet undefined variables and functions, provided these will be defined before the l.h.s. is actually used. It also allows compile-time constants to be given symbolic names and still be recognized as such.

This construction is further extended in the <a href="symbolic.html#Top">(symbolic)Top</a> library. 
</div><div class=page id="Concealed-Pointer-Lookup">
Page: (cpl)Concealed Pointer Lookup, Next: <a href="#WITH">WITH</a>, Prev: <a href="#Deferred-assignment">Deferred assignment</a>, Up: <a href="#Statements">Statements</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Implicit type conversion</h3>
Type consistency in expressions and assignments is enforced. However some types can be implicitly converted to others. Possible conversions are automatically checked out in the attempt to build a consistent expression. Only if this turns out to be impossible, a compilation error results. The basic rule is that a type can be implicitly converted to one other type only and that there cannot be closed type conversion loops. INTEGERs are implicitly converted to REALs. POINTERs are implicitly converted to the value they point to. Owing to this Concealed Pointer Lookup, it is hardly ever necessary to explicitly dereference pointers. When really wanted, the dereferencing operator is a postfix ^ (as in Pascal). Vice versa, a prefix ^ forces taking the address rather than the value of a variable; this construction too is rarely needed. Notice however that, in the assignment of a previously undeclared CONSTANT,

	c = var

implicitly declares c as a copy of the value of var, whereas

	c=^var

declares c as a POINTER to var. 
</div><div class=page id="WITH">
Page: (cpl)WITH, Next: <a href="#NEW">NEW</a>, Prev: <a href="#Concealed-Pointer-Lookup">Concealed Pointer Lookup</a>, Up: <a href="#Statements">Statements</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Implicit access to structure fields and functions</h3>
Like in Pascal or Modula2, a structure may be implicitly selected by the WITH statement. WITH has both a multi-line form:

	WITH &lt;structure&gt; [,&lt;structure&gt;] [:]
	&lt;block&gt;
	[END WITH]

and a single-line form:

	WITH &lt;structure&gt; [,&lt;structure&gt;] : &lt;single-line-block&gt;

The multi-line form is recognized from a newline following the &lt;structure&gt; or the optional colon; in this case the scope of the statement extends either to the optional END WITH statement or to the end of the enclosing block; in the second to the end of line. Within the scope of a WITH statement the given structure (or structures) is understood wherever a field name appears alone. For instance, after the declaration

	STRUCTURE(REAL x,y) v1,v2

writing 

	WITH v1: x=v2.y; y=3

becomes equivalent to v1.x=v2.y; v1.y=3, or to x(v1)=y(v2); y(v1)=3.

Given the symmetry of treatment of structure fields and functions by CPL (see <a href="#STRUCTURE">STRUCTURE</a>), a function argument may also be specified in a WITH clause. Thus, for instance,

	WITH 3: WRITE SIN

is equivalent to WRITE SIN(3). Of course this notation is not very useful for REAL functions, but becomes handy when functions are defined to access user-defined compound types as if they were structures. 
</div><div class=page id="NEW">
Page: (cpl)NEW,  Next: <a href="#FREE">FREE</a>,  Prev: <a href="#WITH">WITH</a>,  Up: <a href="#Statements">Statements</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Memory allocation</h3>
Runtime memory allocation is achieved either through the statement

	NEW &lt;pointer&gt; [,&lt;pointer&gt;]

or the function

	NEW &lt;type&gt;

The NEW statement allocates (through the `malloc' system call) the space necessary for a variable of the TYPE pointed to by &lt;pointer&gt; and sets &lt;pointer&gt; to its address. The NEW function returns a <a href="#POINTER">POINTER</a> to a dynamically allocated variable of <a href="#TYPE">TYPE</a> &lt;type&gt;. If applied to a POINTER TO <a href="#STORED">STORED</a> or <a href="#FILE">FILE</a> type, NEW returns a pointer to a temporary file which will be automatically destroyed when freed or at program termination.

Dynamically allocated space is retained, independently of subroutine scoping, until it is returned to the system by the <a href="#FREE">FREE</a> statement. 
</div><div class=page id="FREE">
Page: (cpl)FREE,  Next: <a href="#Input/Output">Input/Output</a>,  Prev: <a href="#NEW">NEW</a>,  Up: <a href="#Statements">Statements</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Freeing memory or file allocation</h3>
	FREE &lt;pointer&gt; [,&lt;pointer&gt;]

releases the memory space or file pointed to by each &lt;pointer&gt;, which must have been previously obtained from <a href="#NEW">NEW</a>, <a href="#OPEN">OPEN</a>, or <a href="#CREATE">CREATE</a>. &lt;pointer&gt; is subsequently zeroed, so that any later dereferencing generates a visible runtime exception. If &lt;pointer&gt; is a file descriptor, FREEing it also writes out any previously buffered data. 
</div><div class=page id="Input/Output">
Page: (cpl)Input/Output, Next: <a href="#Control">Control</a>, Prev: <a href="#NEW">NEW</a>, Up: <a href="#Statements">Statements</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Input/Output</h3>
Text I/O is performed by <a href="#READ">READ</a> and <a href="#WRITE">WRITE</a> instructions on variables of type <a href="#FILE">FILE</a>, which must be declared like ordinary variables and associated with a file before being used for I/O. FILE variables can be implicitly declared if they are <a href="#CONSTANT">CONSTANT</a> and be part of compound types like all other variables. Association to a file is obtained through <a href="#OPEN">OPEN</a> and <a href="#CREATE">CREATE</a>. A FILE variable is translated to the C type FILE&lowast;, and can be used in C library I/O functions transparently accessed through the <a href="#C-interface">C interface</a>.

Sequential binary I/O is performed by adding the <a href="#BINARY">BINARY</a> keyword to the READ and WRITE instructions. No distinction is made between text and binary files at the filesystem level.

Random-access binary I/O is where cpl really differs from other languages; see <a href="#STORED">STORED</a>. A more traditional and lower-level method of random access is described in <a href="#POSITION">POSITION</a>.

<nav><table>
<tr><th>Menu: <input autocomplete="off" class="filter" type="text" onkeyup="tsearch()" onfocus="this.value='';tsearch()" placeholder="a-z" title="Filter menu items by initials"></th><th></th></tr>
<tr><td colspan="2"> </td></tr>
<tr><td><a href="#FILE">FILE</a>:</td><td>serial file descriptor type</td></tr>
<tr><td><a href="#WRITE">WRITE</a>:</td><td>output to character files and devices</td></tr>
<tr><td><a href="#READ">READ</a>:</td><td>input from character files and devices</td></tr>
<tr><td><a href="#FROM">FROM</a>:</td><td>input as a function</td></tr>
<tr><td><a href="#ASK">ASK</a>:</td><td>console prompting and reading</td></tr>
<tr><td><a href="#BINARY">BINARY</a>:</td><td>binary (unformatted) Input/Output</td></tr>
<tr><td><a href="#STORED">STORED</a>:</td><td>random-access files as disk-resident variables</td></tr>
<tr><td><a href="#OPEN">OPEN</a>:</td><td>open a file and associate a file descriptor</td></tr>
<tr><td><a href="#CREATE">CREATE</a>:</td><td>open a file of zero length</td></tr>
<tr><td><a href="#FREE">FREE</a>:</td><td>close a file and free the associated pointer</td></tr>
<tr><td><a href="#FLUSH">FLUSH</a>:</td><td>flush a file's write buffer</td></tr>
<tr><td><a href="#POSITION">POSITION</a>:</td><td>read or set a file's current position</td></tr>
<tr><td><a href="#INPUTREADY">INPUTREADY</a>:</td><td>test for input ready on a file descriptor or stdin</td></tr>
</table></nav>

</div><div class=page id="FILE">
Page: (cpl)FILE, Next: <a href="#WRITE">WRITE</a>, Prev: <a href="#Input/Output">Input/Output</a>, Up: <a href="#Input/Output">Input/Output</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>FILE</h4>
File descriptor type, translated to C type FILE&lowast;

The predefined C file descriptors

	stdin, stdout, stderr

are also predefined in a CPL program (as are, in fact, most other symbols and functions in the C stdio library; see <a href="#C-interface">C interface</a>).

The construction

	FILE OF &lt;type&gt;

is used for random-access files (see <a href="#STORED">STORED</a>).

Type FILE is equivalent to FILE OF CHAR. 
</div><div class=page id="WRITE">
Page: (cpl)WRITE,  Next: <a href="#READ">READ</a>,  Prev: <a href="#FILE">FILE</a>,  Up: <a href="#Input/Output">Input/Output</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>WRITE</h4>
The output statement WRITE is used as follows:

	WRITE [TO &lt;file&gt;] [BY NAME] [&lt;outputexpr&gt;] [./.]

&lt;file&gt; can be a file descriptor, of type <a href="#FILE">FILE</a>, such as returned by <a href="#OPEN">OPEN</a> or <a href="#CREATE">CREATE</a>, or else a string representing a filename. In the latter case the file is implicitly CREATEd before WRITEing and FREEd afterwards. If <q>TO &lt;file&gt;</q> is omitted, stdout is implied. If &lt;file&gt; is present, <q>WRITE TO</q> may be omitted. &lt;outputexpr&gt; can be

	&lt;value&gt;[:&lt;format&gt;]

or <q>,</q>.

&lt;value&gt; can be of any type except a POINTER (which if present undergoes <a href="#Concealed-Pointer-Lookup">Concealed Pointer Lookup</a>). Compound types such as <a href="#ARRAY">ARRAY</a> and <a href="#STRUCTURE">STRUCTURE</a> are printed in a standard format which is understandable to <a href="#READ">READ</a>. (If STRUCTURE elements are POINTERs, however, they are printed as the string <q>POINTER</q> and cannot be read back.) If a SUBROUTINE named WRITE is defined with first argument of type FILE and second argument of a user-defined TYPE, it is used to print variables of such type. Primitive types are printed in a default format, unless the numeric part of a C format specifier is included after a colon.

The default format is initially the C library's default, but may be changed (down to the end of the enclosing scope) by the declaration DEFAULTFORMAT, e.g.

	DEFAULTFORMAT 1.15

A <q>,</q> in the sequence of &lt;outputexpr&gt;'s is printed as a tab. &lt;outputexpr&gt;'s may also be written one after the other without any comma, in  which case they are just adjoined without any intervening space. Please pay attention that a numeric parenthesis that immediately follows a string will be interpreted as an ARRAY subscript, since the STRING is a legitimate ARRAY OF CHAR, unless space is placed between the string and the parenthesis.

By default WRITE prints a newline at the end of its sequence of &lt;outputexpr&gt;'s. The optional symbol ./. suppresses this newline and FLUSHes the output instead. WRITE with no &lt;outputexpr&gt; and no ./. prints just a newline.

If the optional BY NAME qualification is present, WRITE prepends each value with the expression from which it is produced, in the form name=value. If the expression is a single identifier, this format can be read back by the statement READ BY NAME.

WRITE syntax may also be used to convert any expression into a string. See <a href="#String">String</a>conversion. 
</div><div class=page id="READ">
Page: (cpl)READ,  Next: <a href="#FROM">FROM</a>,  Prev: <a href="#WRITE">WRITE</a>,  Up: <a href="#Input/Output">Input/Output</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>READ</h4>
The input statement READ is used as follows:

	READ [BY NAME] [FROM &lt;file&gt;] [&lt;variable&gt; [&lt;conjunction&gt; &lt;variable&gt;]]

&lt;file&gt; can be a file descriptor, of type <a href="#FILE">FILE</a>, such as returned by <a href="#OPEN">OPEN</a> or <a href="#CREATE">CREATE</a>, or else a string representing a filename. In the latter case the file is implicitly opened before READ is executed and closed afterwards. If <q>FROM &lt;file&gt;</q> is omitted, stdin is assumed.

&lt;variable&gt; must be a <a href="#VARIABLE">VARIABLE</a> identifier or a <a href="#POINTER">POINTER</a> to a variable, which can be of any type except a POINTER. Compound types such as <a href="#ARRAY">ARRAY</a> and <a href="#STRUCTURE">STRUCTURE</a> are also accepted; they are expected to appear in the same format as produced by <a href="#WRITE">WRITE</a> &lt;variable&gt; can also be a literal <a href="#STRING">STRING</a>, which is then expected to appear verbatim in the input file. If &lt;variable&gt; is an ARRAY OF CHAR, characters are read until the array is full or a newline appears. In all other cases, blanks, tabs and newlines are automatically skipped. Lines starting with <q>!</q> are considered as comments and skipped.

&lt;conjunction&gt; can be <q>,</q> AND or OR. If <q>,</q> or AND is used, the joined variables must both be compulsorily present in the input or an I/O error results. If the conjunction is OR, only one or the other is expected to be present and the READ statement succeeds and yields control as soon as one is found.

READ with no variable is also allowed and just blocks until a newline is received, skipping any other characters that precede it. This statement can be used to skip lines in a file or to create a pause in execution until a newline appears in stdin.

READ may also appear as a function in a BOOLEAN expression, and should then be pronounced as the past participle of the verb <q>to read</q>. In this form READ is construed just as above, but returns a BOOLEAN value saying whether reading was successful or not and never generates an I/O error.

If the optional BY NAME qualifier is present, READ expects to find the value of each variable preceded by its name in the input file in the form name=value. 
</div><div class=page id="FROM">
Page: (cpl)FROM,  Next: <a href="#ASK">ASK</a>,  Prev: <a href="#READ">READ</a>,  Up: <a href="#Input/Output">Input/Output</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>FROM</h4>
As an auxiliary keyword, FROM is used in <a href="#READ">READ</a> statements to introduce the <a href="#FILE">FILE</a> data are read from.

In addition, the construction

	&lt;type declarator&gt; FROM &lt;file&gt;

represents a value of type &lt;type declarator&gt; read from the file descriptor &lt;file&gt;. This value can directly appear in an expression just as the value of a function can. As an example, the statement

	WRITE 3&lowast;(INTEGER FROM stdin)

can replace

	INTEGER temp
	READ FROM stdin temp
	WRITE TO stdout 3&lowast;temp 
</div><div class=page id="ASK">
Page: (cpl)ASK,  Next: <a href="#BINARY">BINARY</a>,  Prev: <a href="#FROM">FROM</a>,  Up: <a href="#Input/Output">Input/Output</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>Console prompting and reading</h4>
	ASK [&lt;type&gt;] [<q>literal</q>:] &lt;variable&gt; [, [<q>literal</q>:] &lt;variable&gt;]

has the effect that a prompt is automatically written to stderr for each variable and the value of the variable is subsequently read from stdin. The prompt is the optional <q>literal</q> if present or the name of the variable followed by a <q>?</q> otherwise.

Console prompting can be compounded with CONSTANT declaration. If &lt;type&gt; is present, each variable is declared as a <a href="#CONSTANT">CONSTANT</a> before being asked.

Under <a href="#cpl-i">cpl i</a>, this console input functionality becomes extended: a cpl shell is opened whenever the program is waiting for input from its controlling terminal, and any number of CPL commands can be executed interactively before answering. The first expression given alone on the command line, which cpl would normally print, gets returned as input instead, and the waiting program resumes. This extension is available to either an interpreted or a compiled program, provided the latter is run under interactive cpl. 
</div><div class=page id="BINARY">
Page: (cpl)BINARY,  Next: <a href="#STORED">STORED</a>,  Prev: <a href="#ASK">ASK</a>,  Up: <a href="#Input/Output">Input/Output</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>Binary (unformatted) Input/Output</h4>
Sequential binary I/O is obtained by appending the word BINARY to either <a href="#READ">READ</a> or <a href="#WRITE">WRITE</a>, as in

	READ BINARY FROM &lt;file&gt; &lt;variable&gt; [,&lt;variable&gt;]

	WRITE BINARY TO &lt;file&gt; &lt;outputexpr&gt; [,&lt;outputexpr]

In binary I/O no format need, of course, be specified and no newline is automatically added by WRITE statements.

For random-access binary I/O the statement <a href="#POSITION">POSITION</a> can be used to get and set the reading and writing position in the file. A more powerful and frequently preferable mechanism is provided by the <a href="#STORED">STORED</a> declaration. 
</div><div class=page id="STORED">
Page: (cpl)STORED,  Next: <a href="#OPEN">OPEN</a>,  Prev: <a href="#BINARY">BINARY</a>,  Up: <a href="#Input/Output">Input/Output</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>Random-access files as disk-resident variables</h4>
A random-access binary file typically contains fields and records at fixed addresses, which can be accessed by POSITIONing the file cursor (see <a href="#POSITION">POSITION</a>) before each READ or WRITE <a href="#BINARY">BINARY</a>. However, this process requires knowing the address of each field and is quite error-prone.

CPL provides a powerful alternative: a pointer to a compound variable residing in a disk file. Records and fields are then defined by just declaring a suitable compound type through the usual <a href="#STRUCTURE">STRUCTURE</a> and <a href="#ARRAY">ARRAY</a> declarations. For this purpose a type declaration prefixed by the keyword STORED is used, as in the example:

	POINTER TO STORED ARRAY(1..10) OF STRUCTURE(REAL x,y) v

which defines a variable named v as the pointer to a random-access file containing 10 records composed of two real numbers each. v is in fact an ordinary file descriptor, which can be obtained from <a href="#OPEN">OPEN</a> or <a href="#CREATE">CREATE</a>, just like any other file descriptor, or from <a href="#NEW">NEW</a> like any other POINTER. Once v is assigned a file descriptor, reading and writing to it is achieved by just accessing v as if it were a memory <a href="#POINTER">POINTER</a>. In the example, since <a href="#Concealed-Pointer-Lookup">Concealed Pointer Lookup</a> is in effect,

	v(4).x = 3.14

and

	WRITE LOG(v(8).y)

are valid statements. The rule is simply that anything that could be done if v had been declared as a normal POINTER is still allowed, but the actual storage is in a disk file rather than in memory.

Just as for any POINTER, accessing a variable of POINTER TO STORED type without first assigning a file descriptor to it is an error (caught by <a href="#rtchecks">rtchecks</a> if active). On the contrary, the declaration

	STORED ARRAY(1..10) OF STRUCTURE(REAL x,y) v

(using the same example) actually reserves storage for the variable v, just like the corresponding declaration without the keyword STORED would, by requesting a temporary file through <a href="#NEW">NEW</a>. This temporary file is automatically opened and closed as necessary and cannot be explicitly assigned.

When declared with the special dimension &lowast;, a STORED ARRAY can contain an a-priori undetermined number of records (numbered from 0). The shorthand

			FILE OF &lt;type&gt;

is equivalent to

			POINTER TO STORED ARRAY(&lowast;) OF &lt;type&gt;

The ordinary <a href="#FILE">FILE</a> type declarator is a shorthand for FILE OF CHAR.

STORED ARRAYs and POINTER TO STORED ARRAYs with multiple &lowast; dimensions are allowed as function formal parameters, just like their non-STORED equivalents. The corresponding actual parameter must be a STORED ARRAY of matching number of dimensions and type (not just an OPENed file). 
</div><div class=page id="OPEN">
Page: (cpl)OPEN,  Next: <a href="#CREATE">CREATE</a>,  Prev: <a href="#STORED">STORED</a>,  Up: <a href="#Input/Output">Input/Output</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>Open an existing file and associate a file descriptor with it</h4>
The statement

	OPEN &lt;fd&gt;, &lt;filename&gt;

opens the file descriptor &lt;fd&gt; for the file identified by the string &lt;filename&gt;. &lt;fd&gt; can be any <a href="#STORED">STORED</a> type.

The function

	OPEN(&lt;filename&gt;)

returns &lt;fd&gt; as its value.

&lt;filename&gt; is opened for both reading and writing, and is created if it does not exist, but it is never truncated. Therefore, it may be written over but any data which are not overwritten will remain there. If a possible file of the same name is to be cleared before writing, <a href="#CREATE">CREATE</a> should be used instead.

<q>OPEN</q> calls the <q>open</q> system function with options O_RDWR|O_CREAT. For finer control over options, the <q>open</q> or <q>fopen</q> function may be called directly, just as all other libc functions (see <a href="#C-interface">C interface</a>). 
</div><div class=page id="CREATE">
Page: (cpl)CREATE,  Next: <a href="#FLUSH">FLUSH</a>,  Prev: <a href="#OPEN">OPEN</a>,  Up: <a href="#Input/Output">Input/Output</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>Create a new, empty file</h4>
The statement

	CREATE &lt;fd&gt;, &lt;filename&gt;

opens the file descriptor &lt;fd&gt; for the file identified by the string &lt;filename&gt;. &lt;fd&gt; can be of <a href="#FILE">FILE</a>, or POINTER TO <a href="#STORED">STORED</a> type.

The function

	CREATE(&lt;filename&gt;)

returns &lt;fd&gt; as its value.

&lt;filename&gt; is opened for both reading and writing, is created if it does not exist, and is truncated to zero length. Therefore, it may be reread after it has been written, but any data in a pre-existing file of the same name are lost. If a possible file of the same name is to be preserved, <a href="#OPEN">OPEN</a> should be used instead.

<q>CREATE</q> calls the <q>open</q> system function with options O_RDWR|O_CREAT|O_TRUNC. For finer control over options, the <q>open</q> or <q>fopen</q> function may be called directly, just as all other libc functions (see <a href="#C-interface">C interface</a>). 
</div><div class=page id="FLUSH">
Page: (cpl)FLUSH,  Next: <a href="#POSITION">POSITION</a>,  Prev: <a href="#CREATE">CREATE</a>,  Up: <a href="#Input/Output">Input/Output</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>Flush a file's write buffer</h4>
The statement

	FLUSH &lt;fd&gt;

writes out any buffered data for the file descriptor &lt;fd&gt;. 
</div><div class=page id="POSITION">
Page: (cpl)POSITION, Next: <a href="#INPUTREADY">INPUTREADY</a>, Prev: <a href="#FLUSH">FLUSH</a>, Up: <a href="#Input/Output">Input/Output</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>Read or set a file's current position</h4>
The statement

	POSITION &lt;fd&gt;, n

sets the current position in file descriptor &lt;fd&gt; so the next READ or WRITE statement will take effect at byte number n.

The function

	POSITION(&lt;fd&gt;)

returns as an INTEGER the current READ/WRITE position in file descriptor &lt;fd&gt;. 
</div><div class=page id="INPUTREADY">
Page: (cpl)INPUTREADY, Next: <a href="#COMMANDLINE">COMMANDLINE</a>, Prev: <a href="#POSITION">POSITION</a>, Up: <a href="#Input/Output">Input/Output</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>Test for input ready on a file descriptor or stdin</h4>
This function is contained in the inputready library (<a href="#USE">USE</a> inputready).

The BOOLEAN function

	INPUTREADY(&lt;fd&gt;)

returns YES if there are characters available for input on file descriptor &lt;fd&gt;. This is mainly of use when &lt;fd&gt; is a terminal, to check that keys have been pressed before reading. Notice that if the terminal is in line-buffered mode (as by default Unix terminals are), characters become available only after a line feed has been entered. Terminal mode may be altered by <a href="#CHARbyCHAR">CHARbyCHAR</a>.

	INPUTREADY()

is a shorthand for INPUTREADY(stdin).

	INPUTREADY(&lt;fd&gt;,&lt;time&gt;)

waits for input for the given &lt;time&gt; (in seconds, a REAL) before returning NO.

	INPUTREADY(&lt;time&gt;)

is a shorthand for INPUTREADY(stdin,&lt;time&gt;). 
</div><div class=page id="COMMANDLINE">
Page: (cpl)COMMANDLINE,  Prev: <a href="#INPUTREADY">INPUTREADY</a>,  Up: <a href="#Builtin">Builtin</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>Command-line argument access</h4>
The command line through which the program was launched is available in the predefined ARRAY OF STRING

	COMMANDLINE

(the same that is usually named argv in C programs). Therefore the first word passed after the program name is COMMANDLINE(1), the second is COMMANDLINE(2), etc. The program name itself is COMMANDLINE(0). The index of the last word present, obeying normal <a href="#HI">ARRAY:HI</a>. convention, is COMMANDLINE.HI 
</div><div class=page id="Control">
Page: (cpl)Control,  Next: <a href="#cpl">cpl</a>,  Prev: <a href="#Statements">Statements</a>,  Up: <a href="#Top">Top</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h2>Program flow control statements</h2>
<nav><table>
<tr><th>Menu: <input autocomplete="off" class="filter" type="text" onkeyup="tsearch()" onfocus="this.value='';tsearch()" placeholder="a-z" title="Filter menu items by initials"></th><th></th></tr>
<tr><td colspan="2"> </td></tr>
<tr><td><a href="#IF">IF</a>:</td><td>conditionally executed statement</td></tr>
<tr><td><a href="#LOOP">LOOP</a>:</td><td>conditional and sequential loops</td></tr>
<tr><td><a href="#DO">DO</a>:</td><td>short form of conditional and sequential loops</td></tr>
<tr><td><a href="#INLINE-LOOP">INLINE LOOP</a>:</td><td>compile-time loop</td></tr>
<tr><td><a href="#CASE">CASE</a>:</td><td>multiple selection</td></tr>
<tr><td><a href="#CASE-LOOP">CASE LOOP</a>:</td><td>multiple-choice loop</td></tr>
<tr><td><a href="#EXIT">EXIT</a>:</td><td>exit from loop, module or subroutine</td></tr>
<tr><td><a href="#END">END</a>:</td><td>ends a block</td></tr>
<tr><td><a href="#STOP">STOP</a>:</td><td>stop the program</td></tr>
<tr><td><a href="#ERROR">ERROR</a>:</td><td>signal an error and exit or trigger a TRAP</td></tr>
<tr><td><a href="#TRAP">TRAP</a>:</td><td>error handling</td></tr>
<tr><td colspan="2"> </td></tr>
</table></nav>

</div><div class=page id="IF">
Page: (cpl)IF,  Next: <a href="#LOOP">LOOP</a>,  Prev: <a href="#Control">Control</a>,  Up: <a href="#Control">Control</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Conditional execution</h3>
IF statements have a single-line form and a multi-line form. (For the additional use of IF inside expressions see <a href="#Conditional-expressions">Conditional expressions</a>) As in BASIC, single-line IF statements terminate at the end of a line, whereas multi-line IF statements are explicitly terminated by END IF. (<a href="#END">END</a>) Multi-line IF statements have the structure:

	IF &lt;BOOLEAN&gt; THEN
	&lt;block&gt;
	END IF

or

	IF &lt;BOOLEAN&gt; THEN
	&lt;block&gt;
	&lt;else statement&gt;

They are recognized by THEN being the last word on a line. Single-line IF statements have the structure

	IF &lt;BOOLEAN&gt; THEN &lt;single-line block&gt;

or

	IF &lt;BOOLEAN&gt; THEN &lt;single-line block&gt; END IF

or

	IF &lt;BOOLEAN&gt; THEN &lt;single-line block&gt; &lt;else statement&gt;

&lt;single-line block&gt; may contain multiple statements separated by semicolons but no newlines. It may, however contain compound statements (such as a LOOP or another IF statement) that in turn contain newlines in their own body.

The optional &lt;else statement&gt; has the structure

	ELSE
	&lt;block&gt;
	END IF

or

	ELSE &lt;single-line block&gt;

or

	ELSE &lt;single-line block&gt; END IF

Multiple-choice conditionals are simply obtained by nesting another IF in the &lt;else statement&gt;, e.g.

	IF &lt;BOOLEAN&gt; THEN
	&lt;block&gt;
	ELSE IF &lt;BOOLEAN&gt; THEN
	&lt;block&gt;
	ELSE
	&lt;block&gt;
	END IF 
</div><div class=page id="LOOP">
Page: (cpl)LOOP,  Next: <a href="#DO">DO</a>,  Prev: <a href="#IF">IF</a>,  Up: <a href="#Control">Control</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>LOOPs</h3>
Loops tested at their beginning (which are executed zero or more times) are coded as

	LOOP &lt;test&gt;
	&lt;block&gt;
	REPEAT [LOOP]

or

	LOOP name &lt;test&gt;
	&lt;block&gt;
	REPEAT name

Loops tested at their end (which are always executed one or more times) are coded as

	LOOP
	&lt;block&gt;
	REPEAT [LOOP] &lt;test&gt;

or

	LOOP name
	&lt;block&gt;
	REPEAT name &lt;test&gt;

or else in the <a href="#DO">DO</a> short form.

A named loop can be terminated at any point in its body by the <a href="#EXIT">EXIT</a> statement. A named loop without &lt;test&gt; is an infinite loop that can only be terminated by <a href="#EXIT">EXIT</a>.

&lt;test&gt; may be any one of

<nav><table>
<tr><th>Menu: <input autocomplete="off" class="filter" type="text" onkeyup="tsearch()" onfocus="this.value='';tsearch()" placeholder="a-z" title="Filter menu items by initials"></th><th></th></tr>
<tr><td colspan="2"> </td></tr>
<tr><td><a href="#WHILE">WHILE</a>:</td><td>loop continuation condition</td></tr>
<tr><td><a href="#UNTIL">UNTIL</a>:</td><td>loop termination condition</td></tr>
<tr><td><a href="#FOR">FOR</a>:</td><td>indexed loop</td></tr>
<tr><td colspan="2"> </td></tr>
<tr><td colspan="2">See also <a href="#INLINE-LOOP">INLINE LOOP</a>, <a href="#Looping-operator">Looping operator</a>. </td></tr>
</table></nav>

</div><div class=page id="WHILE">
Page: (cpl)WHILE,  Next: <a href="#UNTIL">UNTIL</a>,  Prev: <a href="#LOOP">LOOP</a>,  Up: <a href="#LOOP">LOOP</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>WHILE loops</h4>
The simplest test that can be used to decide whether to iterate a loop is

	WHILE &lt;BOOLEAN&gt;

For instance,

	DO i=i+1 WHILE i&lt;10

will repeat while the boolean condition is true.

WHILE is equivalent to <a href="#UNTIL">UNTIL</a> NOT. 
</div><div class=page id="UNTIL">
Page: (cpl)UNTIL,  Next: <a href="#FOR">FOR</a>,  Prev: <a href="#WHILE">WHILE</a>,  Up: <a href="#LOOP">LOOP</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>UNTIL loops</h4>
The simplest test that can be used to decide whether to terminate a loop is

	UNTIL &lt;BOOLEAN&gt;

For instance,

	DO i=i+1 UNTIL i&gt;10

will repeat until the boolean condition becomes true.

UNTIL is equivalent to <a href="#WHILE">WHILE</a> NOT. See also <a href="#C-style">C-style</a> FOR loops. 
</div><div class=page id="FOR">
Page: (cpl)FOR,  Next: <a href="#DO">DO</a>,  Prev: <a href="#UNTIL">UNTIL</a>,  Up: <a href="#LOOP">LOOP</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>FOR loops</h4>
The &lt;test&gt; for indexed loops is

	FOR &lt;for clause&gt;

where the basic &lt;for clause&gt; can be either

	&lt;index&gt; = &lt;lbound&gt; TO &lt;ubound&gt; [BY &lt;step&gt;]

or

	&lt;index&gt; = &lt;ubound&gt; DOWN TO &lt;lbound&gt; [BY &lt;step&gt;]

&lt;index&gt; is incremented by &lt;step&gt; in each iteration in the first case and decremented in the second. The loop terminates when &lt;index&gt; exceeds &lt;ubound&gt; in the first case or drops below &lt;lbound&gt; in the second. If BY &lt;step&gt; is omitted, BY 1 is assumed. &lt;lbound&gt;, &lt;ubound&gt; and &lt;step&gt; can all be arbitrary expressions.

Notice that a zero or negative &lt;step&gt; in either case would generate a non-terminating loop, which is presumably not what is wanted. To obviate this, when &lt;step&gt; is a compile-time constant and is negative, <q>DOWN TO</q> is implied. Therefore

	FOR &lt;index&gt; = &lt;ubound&gt; TO &lt;lbound&gt; BY -1

and

	FOR &lt;index&gt; = &lt;ubound&gt; DOWN TO &lt;lbound&gt;

are actually equivalent.

Both INTEGER and REAL types are allowed, as well as other types (for instance <a href="#INTO:">POINTER:INTO:</a>) for which increment and comparison make sense. &lt;index&gt; may be an already existing variable or be implicitly declared by the loop itself (see <a href="#Declarations">Declarations</a>). In the latter case it acquires the type of the loop bounds and behaves like a <a href="#CONSTANT">CONSTANT</a> within the body of the loop. If the index is REAL, the BY specification cannot be omitted.

FOR clauses can appear in a <a href="#LOOP">LOOP</a>, <a href="#DO">DO</a> and <a href="#Looping-operator">Looping operator</a>. In addition to the two basic forms, they can have the following variants:

<nav><table>
<tr><th>Menu: <input autocomplete="off" class="filter" type="text" onkeyup="tsearch()" onfocus="this.value='';tsearch()" placeholder="a-z" title="Filter menu items by initials"></th><th></th></tr>
<tr><td colspan="2"> </td></tr>
<tr><td><a href="#FOR-AND">FOR AND</a>:</td><td>multiple loop</td></tr>
<tr><td><a href="#ALL">ALL</a>:</td><td>implicit determination of loop bounds</td></tr>
<tr><td><a href="#TIMES">TIMES</a>:</td><td>repetition by a fixed number of times</td></tr>
<tr><td><a href="#IN">IN</a>:</td><td>run through the elements of an array</td></tr>
<tr><td><a href="#EXCEPT">EXCEPT</a>:</td><td>exclude exceptional values</td></tr>
<tr><td><a href="#C-style">UNTIL:C-style</a>:</td><td>loop with a generic incrementing operator</td></tr>
</table></nav>

</div><div class=page id="FOR-AND">
Page: (cpl)FOR AND,  Next: <a href="#ALL">ALL</a>,  Prev: <a href="#FOR">FOR</a>,  Up: <a href="#FOR">FOR</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> Two or more FOR loops can be combined in a single &lt;test&gt; through the keyword AND (not to be confused with the logical <a href="#AND">AND</a> operator), as in the following example:

	LOOP FOR i1=l1 TO u1 AND i2=l2 TO u2
	&lt;block&gt;
	REPEAT

which is equivalent to

	LOOP FOR i1=l1 TO u1
	  LOOP FOR i2=l2 TO u2
	  &lt;block&gt;
	  REPEAT
	REPEAT 
</div><div class=page id="ALL">
Page: (cpl)ALL,  Next: <a href="#TIMES">TIMES</a>,  Prev: <a href="#FOR-AND">FOR AND</a>,  Up: <a href="#FOR">FOR</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> LOOP FOR ALL &lt;index&gt; [,&lt;index&gt;]

denotes a loop whose bounds are automatically determined as the bounds of the first ARRAY that &lt;index&gt; appears in. Its use should preferably be limited to short loops in which only arrays of the same dimensions appear and no index arithmetics are performed.

ALL can be combined in a multiple loop with AND (<a href="#FOR-AND">FOR AND</a>), as well as contain multiple indices separated by a comma. In addition, the lower and upper bounds of the first array that the index is used in are also available as LO and HI respectively within the scope of the FOR clause, like in the example:

	DO WRITE A(i,j,k) FOR ALL i,j AND k=LO+2 TO HI-3 
</div><div class=page id="TIMES">
Page: (cpl)TIMES,  Next: <a href="#IN">IN</a>,  Prev: <a href="#ALL">ALL</a>,  Up: <a href="#FOR">FOR</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr>
	LOOP FOR &lt;number&gt; TIMES

does exactly that, when just a counter and no indexing is needed. 
</div><div class=page id="IN">
Page: (cpl)IN,  Next: <a href="#EXCEPT">EXCEPT</a>,  Prev: <a href="#TIMES">TIMES</a>,  Up: <a href="#FOR">FOR</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr>
	LOOP FOR &lt;element&gt; IN &lt;array&gt;

Here &lt;element&gt; is not an INTEGER, but rather a POINTER to elements of the ARRAY &lt;array&gt;. A LOOP is performed in which &lt;element&gt; runs in succession through all the elements of the array (or its subset specified through <a href="#subarray">subarray</a> selection). As a particular case, a constant array can be constructed from a set of elements of the same TYPE enclosed in brackets, as in

	LOOP FOR n IN (2,5,11) 
</div><div class=page id="EXCEPT">
Page: (cpl)EXCEPT,  Next: <a href="#C-style">C-style</a>,  Prev: <a href="#IN">IN</a>,  Up: <a href="#FOR">FOR</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> LOOP FOR &lt;for clause&gt; EXCEPT &lt;condition&gt; [<q>,</q> &lt;condition&gt;]

The EXCEPT qualifier added to any of the FOR loop constructions excludes exceptional values of the index from the iteration. &lt;condition&gt; may be either an expression of BOOLEAN type, meaning that the loop is skipped when the &lt;condition&gt; is TRUE, or an expression of the same type as the index, meaning that the given value is excluded. 
</div><div class=page id="C-style">
Page: (cpl)C-style,  Prev: <a href="#EXCEPT">EXCEPT</a>,  Up: <a href="#FOR">FOR</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> LOOP FOR &lt;index&gt; = &lt;start&gt; UNTIL &lt;ending condition&gt; BY &lt;incrementing statement&gt;

is a C-style FOR clause in which the index is not necessarily a number but can be of any type; for instance, a pointer to a structure.

&lt;index&gt; is implicitly declared, if necessary, to have the same type as &lt;start&gt; and initialized to this value. &lt;index&gt; is then incremented by executing &lt;incrementing statement&gt; at the end of each LOOP iteration and treated as a constant for the scope of the loop. The loop repeats until &lt;ending condition&gt; (an expression of BOOLEAN type) becomes TRUE.

Either &lt;ending condition&gt; or &lt;incrementing statement&gt; may take an alternative short form. The short form of &lt;ending condition&gt; is an expression of the same type as &lt;start&gt;; this is equivalent to the BOOLEAN &lt;index&gt; = &lt;ending condition&gt;. The short form of &lt;incrementing statement&gt; is a single identifier denoting a function or structure element. This is a shorthand for &lt;index&gt; = &lt;incrementing statement&gt;(&lt;index&gt;). 
</div><div class=page id="DO">
Page: (cpl)DO,  Next: <a href="#INLINE-LOOP">INLINE LOOP</a>,  Prev: <a href="#LOOP">LOOP</a>,  Up: <a href="#Control">Control</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Loops (short form)</h3>
A short form for nameless loops tested at the end (which are always executed one or more times) is

	DO &lt;block&gt; &lt;test&gt;

where &lt;test&gt; may be any one of

<nav><table>
<tr><th>Menu: <input autocomplete="off" class="filter" type="text" onkeyup="tsearch()" onfocus="this.value='';tsearch()" placeholder="a-z" title="Filter menu items by initials"></th><th></th></tr>
<tr><td colspan="2"> </td></tr>
<tr><td><a href="#WHILE">WHILE</a>:</td><td>loop terminating condition</td></tr>
<tr><td><a href="#UNTIL">UNTIL</a>:</td><td>loop terminating condition</td></tr>
<tr><td><a href="#FOR">FOR</a>:</td><td>loop specifier</td></tr>
<tr><td colspan="2"> </td></tr>
<tr><td colspan="2">See also <a href="#LOOP">LOOP</a>. </td></tr>
</table></nav>

</div><div class=page id="INLINE-LOOP">
Page: (cpl)INLINE LOOP,  Next: <a href="#CASE">CASE</a>,  Prev: <a href="#DO">DO</a>,  Up: <a href="#Control">Control</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>INLINE LOOP</h3>
The statement

	INLINE LOOP [name] FOR &lt;element&gt; IN &lt;array&gt;
	&lt;block&gt;
	REPEAT [name]

expands in line by repeating the loop contents once for each element of &lt;array&gt;, whose dimensions must be known at compile time.

See also <a href="#IN">IN</a>. 
</div><div class=page id="CASE">
Page: (cpl)CASE,  Next: <a href="#CASE-LOOP">CASE LOOP</a>,  Prev: <a href="#INLINE-LOOP">INLINE LOOP</a>,  Up: <a href="#Control">Control</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Multiple-choice selection</h3>
A multiple-choice branch is specified as

       CASE &lt;INTEGER&gt; OF
       tag1: &lt;block&gt;
       tag2: &lt;block&gt;
       ............
       tagn: &lt;block&gt;
       [ ELSE &lt;block&gt; ]
       END CASE

where &lt;INTEGER&gt; is any expression of type INTEGER and tag1, tag2,... tagn are integer compile-time constants. A list of values separated by commas may also appear as a tag. 
</div><div class=page id="CASE-LOOP">
Page: (cpl)CASE LOOP,  Next: <a href="#EXIT">EXIT</a>,  Prev: <a href="#CASE">CASE</a>,  Up: <a href="#Control">Control</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Multiple-choice loop</h3>
Sometimes the need arises to program a state machine or automaton, composed of a set of code blocks (<q>states</q>) to be executed in an a priori unknown sequence where each block decides its immediate follower. For such needs CPL provides a multiple-choice loop.

A multiple-choice loop is a hybrid between a <a href="#CASE">CASE</a> and a <a href="#LOOP">LOOP</a>, specified as

        CASE LOOP OF
        label1: &lt;block&gt;
        REPEAT &lt;label&gt;
        label2: &lt;block&gt;
        REPEAT &lt;label&gt;
        ..............
        labeln: &lt;block&gt;
        REPEAT &lt;label&gt;
        END CASE

At the end of each labelled block (or nested in its interior, typically within an IF or CASE statement), execution may continue at any other label as specified by the REPEAT statement. Each labelled block is its own scope, and local variables cease to exist at the REPEAT (like at an <a href="#EXIT">EXIT</a>) statement (but variables of an outer, enclosing scope are, as always, shared). If the end of a block is reached without an intervening REPEAT statement, the CASE LOOP ends.

While this construct may look like unstructured code allowing an arbitrary goto (and is in fact implemented using one), it maintains statements and labels in the same order as, and is thus no less or more structured than, a CASE inside a LOOP:

        ENUM(label1,label2,...labeln,exit) repeat=label1
        LOOP
          next=repeat; repeat=exit
          CASE next OF
          label1: &lt;block&gt;
            repeat=&lt;label&gt;
          label2: &lt;block&gt;
            repeat=&lt;label&gt;
          ..............
          labeln: &lt;block&gt;
            repeat=&lt;label&gt;
          END CASE
        REPEAT WHILE repeat#exit

In particular notice that jumping to the inside of a labelled block, as opposed to its beginning, is not allowed. The two constructs above are functionally equivalent, but the first is more efficient and easier to write and read. 
</div><div class=page id="EXIT">
Page: (cpl)EXIT,  Next: <a href="#END">END</a>,  Prev: <a href="#CASE">CASE</a>,  Up: <a href="#Control">Control</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> EXIT &lt;name&gt; transfers control past the end of the LOOP, MODULE, FUNCTION or SUBROUTINE named &lt;name&gt;, terminating the corresponding scope and deallocating local variables. EXIT may be nested in an inner scope, such as a further loop or an IF statement.

<nav><table>
<tr><th>Menu: <input autocomplete="off" class="filter" type="text" onkeyup="tsearch()" onfocus="this.value='';tsearch()" placeholder="a-z" title="Filter menu items by initials"></th><th></th></tr>
<tr><td colspan="2"> </td></tr>
<tr><td><a href="#LOOP">LOOP</a>:</td><td>conditional and sequential loops</td></tr>
<tr><td><a href="#MODULE">MODULE</a>:</td><td>separately scoped program block</td></tr>
<tr><td><a href="#FUNCTION">FUNCTION</a>:</td><td>value-returning subroutine</td></tr>
<tr><td><a href="#SUBROUTINE">SUBROUTINE</a>:</td><td>sub-routine</td></tr>
<tr><td colspan="2"> </td></tr>
</table></nav>

</div><div class=page id="END">
Page: (cpl)END,  Next: <a href="#STOP">STOP</a>,  Prev: <a href="#EXIT">EXIT</a>,  Up: <a href="#Control">Control</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>END &lt;name&gt;</h3>
terminates the body of a module, function or subroutine named &lt;name&gt;. END IF, END CASE, END WITH, END C SECTION, END FRI SECTION and END TRAP terminate the corresponding statements.

<nav><table>
<tr><th>Menu: <input autocomplete="off" class="filter" type="text" onkeyup="tsearch()" onfocus="this.value='';tsearch()" placeholder="a-z" title="Filter menu items by initials"></th><th></th></tr>
<tr><td colspan="2"> </td></tr>
<tr><td><a href="#MODULE">MODULE</a>:</td><td>separately scoped program block</td></tr>
<tr><td><a href="#FUNCTION">FUNCTION</a>:</td><td>value-returning subroutine</td></tr>
<tr><td><a href="#SUBROUTINE">SUBROUTINE</a>:</td><td>subroutine</td></tr>
<tr><td><a href="#IF">IF</a>:</td><td>conditionally executed statements</td></tr>
<tr><td><a href="#CASE">CASE</a>:</td><td>multiple selection</td></tr>
<tr><td><a href="#WITH">WITH</a>:</td><td>implicit access to structure fields and functions</td></tr>
<tr><td><a href="#C-SECTION">C SECTION</a>:</td><td>transparent C source code inclusion</td></tr>
<tr><td><a href="#FRI-SECTION">FRI SECTION</a>:</td><td>fri formal-rule code on-the-fly modification</td></tr>
<tr><td><a href="#TRAP">TRAP</a>:</td><td>error handling</td></tr>
</table></nav>

</div><div class=page id="STOP">
Page: (cpl)STOP,  Next: <a href="#ERROR">ERROR</a>,  Prev: <a href="#END">END</a>,  Up: <a href="#Control">Control</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>STOP</h3>
Stop the program and exit (unless intercepted by a <a href="#TRAP">TRAP</a>). Has the same effect as the SIGINT (^C) signal. 
</div><div class=page id="ERROR">
Page: (cpl)ERROR,  Next: <a href="#TRAP">TRAP</a>,  Prev: <a href="#STOP">STOP</a>,  Up: <a href="#Control">Control</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Error signal</h3>
The command

	ERROR &lt;outputexpr&gt;

writes &lt;outputexpr&gt; to the predefined string variable ERRORMESSAGE and signals an error. Unless a <a href="#TRAP">TRAP</a> has been set, this causes the program to exit after writing ERRORMESSAGE to stderr. 
</div><div class=page id="TRAP">
Page: (cpl)TRAP,  Prev: <a href="#ERROR">ERROR</a>,  Up: <a href="#Control">Control</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Error handling</h3>
An error, either caused by a system signal or by the <a href="#ERROR">ERROR</a> statement, normally causes the program to terminate after writing a message to stderr. A trap for errors may be set by the statement

	TRAP
	&lt;block&gt;
	END TRAP

or

	TRAP &lt;literal&gt;
	&lt;block&gt;
	END TRAP

In the first form all errors are trapped; in the second only those whose error message begins with &lt;literal&gt;. When an error is trapped, &lt;block&gt; gets executed. The error message that would be printed is available in this block in the predefined STRING

	ERRORMESSAGE

At the END TRAP statement, control is passed to the end of the enclosing block, where also the scope of the TRAP terminates like that of all other declarations. Within the body of the TRAP, the exception may be re-raised if  necessary by the statement

	ERROR ERRORMESSAGE

An exception caused by SIGINT or STOP is accompanied by an empty ERRORMESSAGE. 
</div><div class=page id="BY">
Page: (cpl)BY,  Next: <a href="#C-SECTION">C SECTION</a>,  Prev: <a href="#BOOLEAN">BOOLEAN</a>,  Up: <a href="#Control">Control</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> The auxiliary keyword BY is used in

<nav><table>
<tr><th>Menu: <input autocomplete="off" class="filter" type="text" onkeyup="tsearch()" onfocus="this.value='';tsearch()" placeholder="a-z" title="Filter menu items by initials"></th><th></th></tr>
<tr><td colspan="2"> </td></tr>
<tr><td><a href="#FOR">FOR</a>:</td><td>loop specifier</td></tr>
<tr><td><a href="#READ">READ</a>:</td><td>input from character files and devices</td></tr>
<tr><td><a href="#WRITE">WRITE</a>:</td><td>output to character files and devices</td></tr>
</table></nav>

</div><div class=page id="ELSE">
Page: (cpl)ELSE,  Next: <a href="#END">END</a>,  Prev: <a href="#DOWN">DOWN</a>,  Up: <a href="#Control">Control</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> The auxiliary keyword ELSE is used in

<nav><table>
<tr><th>Menu: <input autocomplete="off" class="filter" type="text" onkeyup="tsearch()" onfocus="this.value='';tsearch()" placeholder="a-z" title="Filter menu items by initials"></th><th></th></tr>
<tr><td colspan="2"> </td></tr>
<tr><td><a href="#IF">IF</a>:</td><td>conditionally executed statements</td></tr>
<tr><td><a href="#CASE">CASE</a>:</td><td>multiple-choice selection</td></tr>
</table></nav>

</div><div class=page id="NAME">
Page: (cpl)NAME,  Next: <a href="#NEW">NEW</a>,  Prev: <a href="#MODULE">MODULE</a>,  Up: <a href="#Input/Output">Input/Output</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> The auxiliary keyword NAME is used in

<nav><table>
<tr><th>Menu: <input autocomplete="off" class="filter" type="text" onkeyup="tsearch()" onfocus="this.value='';tsearch()" placeholder="a-z" title="Filter menu items by initials"></th><th></th></tr>
<tr><td colspan="2"> </td></tr>
<tr><td><a href="#READ">READ</a>:</td><td>input from character files and devices</td></tr>
<tr><td><a href="#WRITE">WRITE</a>:</td><td>output to character files and devices</td></tr>
</table></nav>

</div><div class=page id="OF">
Page: (cpl)OF,  Next: <a href="#POINTER">POINTER</a>,  Prev: <a href="#NOT">NOT</a>,  Up: <a href="#Declarations">Declarations</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> The auxiliary keyword OF is used in:

<nav><table>
<tr><th>Menu: <input autocomplete="off" class="filter" type="text" onkeyup="tsearch()" onfocus="this.value='';tsearch()" placeholder="a-z" title="Filter menu items by initials"></th><th></th></tr>
<tr><td colspan="2"> </td></tr>
<tr><td><a href="#ARRAY">ARRAY</a>:</td><td>indexed array type</td></tr>
<tr><td><a href="#CASE">CASE</a>:</td><td>multiple-choice selection</td></tr>
<tr><td><a href="#STORED">FILE:STORED</a>:</td><td>random-access file</td></tr>
</table></nav>

</div><div class=page id="TO">
Page: (cpl)TO,  Next: <a href="#TRAP">TRAP</a>,  Prev: <a href="#TIMES">TIMES</a>,  Up: <a href="#Control">Control</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> The auxiliary keyword TO is used in:

<nav><table>
<tr><th>Menu: <input autocomplete="off" class="filter" type="text" onkeyup="tsearch()" onfocus="this.value='';tsearch()" placeholder="a-z" title="Filter menu items by initials"></th><th></th></tr>
<tr><td colspan="2"> </td></tr>
<tr><td><a href="#FOR">FOR</a>:</td><td>loop specifier</td></tr>
<tr><td><a href="#POINTER">POINTER</a>:</td><td>pointers to memory addresses</td></tr>
<tr><td><a href="#WRITE">WRITE</a>:</td><td>output to character files and devices</td></tr>
</table></nav>

</div><div class=page id="cpl">
Page: (cpl)cpl,  Next: <a href="#cpl-run">cpl run</a>,  Prev: <a href="#Control">Control</a>,  Up: <a href="#Top">Top</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h2>Compilation tools and their usage</h2>
All tools that act upon a CPL <a href="#Source-file">Source file</a> are managed by a shell script named <q>cpl</q> (formerly <q>makecpl</q>).

<h4>Usage</h4>
	Compiler:  cpl make|remake|run &lt;program&gt;[.cpl] [&lt;option&gt;]
	Interpreter:  cpl i [&lt;expression&gt;|&lt;program&gt;[.cpl]]
	Editor:  cpl edit [&lt;file&gt;]
	Info help:  cpl info [keyword]
	Swap extension (for mail attachments):  cpl rename &lt;file list&gt;
	Version and usage:  cpl version|usage|help (or any unrecognized word)

<h4>Abbreviations</h4>
	cplm == cpl m == cpl make
	cpl (with arguments) == cpl run
	cpl (with no arguments) == cpli == cpl i
	edit == cple == cpl e == cpl edit
	cpl ? == cpl info

<h4>Backward compatibility</h4>
	makecpl == cpl make
	makecpl -a == cpl remake
	makecpl -r == cpl run
	icpl == cpl i
	infocpl == cpl info
	makecpl (with no arguments) == cpl version|usage|help

<h4>Description</h4>
The basic command

	cpl make &lt;program&gt;[.cpl] [&lt;option&gt;]

(or just <q>cplm</q>) is all that is needed to compile and link the source file &lt;program&gt;.cpl into the executable file &lt;program&gt; , which you can then run by its name just like any other executable. As an alternative, the straight <a href="#cpl-run">cpl run</a> command compiles and then runs &lt;program&gt; in one shot.

cpl's task is achieved by first running the CPL-to-C compiler <a href="#cpl.fri">cpl.fri</a>, which compiles the given source and all other files <a href="#USE">USE</a>d by it into corresponding C programs, and simultaneously lists all of the generated files and any needed pre-existing objects in the makefile &lt;program&gt;.d, and then running make (<a href="https://manpages.debian.org/make.html">manpages.debian.org/make.html</a>) on this makefile. Any arguments possibly present on the command line are passed on as options to the designated C compiler and linker, or to &lt;program&gt; itself if <q>run</q> was specified.

The default C compiler is make's default; an alternate C compiler can be specified in the CC environment variable or as CC= on the command line.

The -D and -I compiler options are interpreted by cpl.fri itself, in addition to being passed on to the C compiler, and provide pre#defined constants and include directories to both.

C source and object files are kept in a local subdirectory usually named .cpl (and therefore hidden from listing under unix convention). An alternate name for this directory can be specified through the environment variable OBJDIR or the -o option.

Only those source files whose corresponding object file does not exist or is older than the source are actually recompiled. In exceptional cases where a full re-compilation may be necessary, the command

	cpl remake &lt;program&gt;

achieves this by deleting the object files first.

	cpl followed by an unrecognized word (e.g. version|usage|help)

prints a short version and usage message and exits.

If your system includes the curl command (on Debian you can install it as <q>apt install curl</q>), cpl provides the functionality to transparently poll the CPLcode.net website for updates. See <a href="#automatic-updates">automatic updates</a>.

<nav><table>
<tr><th>Menu: <input autocomplete="off" class="filter" type="text" onkeyup="tsearch()" onfocus="this.value='';tsearch()" placeholder="a-z" title="Filter menu items by initials"></th><th></th></tr>
<tr><td colspan="2"> </td></tr>
<tr><td><a href="#cpl-run">cpl run</a>:</td><td>automatic compilation when needed</td></tr>
<tr><td><a href="#cpl.fri">cpl.fri</a>:</td><td>The CPL-to-C compiler</td></tr>
<tr><td><a href="fri.html#Top">(fri)Top</a>:</td><td>The Formal Rule Interpreter</td></tr>
<tr><td><a href="#FRI-SECTION">FRI SECTION</a>:</td><td>Dynamic extension of the CPL language</td></tr>
<tr><td><a href="#cpl-i">cpl i</a>:</td><td>Interactive CPL</td></tr>
<tr><td><a href="editor.html#Top">cpl edit:(editor)Top</a>:</td><td>development text editor with word and syntax completion</td></tr>
<tr><td><a href="#cpl-info">cpl info</a>:</td><td>info reading script</td></tr>
<tr><td><a href="#mpicpl">mpicpl</a>:</td><td>Compile with MPI options</td></tr>
<tr><td><a href="#OpenMP">OpenMP</a>:</td><td>CPL transparent OpenMP directives</td></tr>
</table></nav>

</div><div class=page id="cpl-run">
Page: (cpl)cpl run,  Next: <a href="#cpl.fri">cpl.fri</a>,  Prev: <a href="#cpl">cpl</a>,  Up: <a href="#cpl">cpl</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr>
	cpl run &lt;program&gt;[.cpl] [&lt;argument&gt;]

(or just <q>cpl</q> if no confusion arises) compiles and runs &lt;program&gt; in one shot, or just runs it without re-compiling if an executable is found that is not older than its source code. &lt;argument&gt;'s are passed to &lt;program&gt; itself.

<h4>Unix interpreter directive (hashbang)</h4>
Taking advantage of the unix interpreter directive, a CPL program that contains either <q>#!/full/path/to/cpl run</q> (with the appropriate full path) or <q>#!/usr/bin/env cpl</q> as its first line is directly executable, while maintaining its compiled form. Under the hood it undergoes automatic recompilation if and when modified. 
</div><div class=page id="cpl.fri">
Page: (cpl)cpl.fri,  Next: <a href="#FRI-SECTION">FRI SECTION</a>,  Prev: <a href="#cpl-run">cpl run</a>,  Up: <a href="#cpl">cpl</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>The CPL-to-C compiler</h3>
The CPL compiler cpl.fri is not an executable file, but rather a formal description of the language that is interpreted by the Formal Rule Interpreter <a href="fri.html#Top">(fri)Top</a>. The cpl.fri file is made executable by the shell convention of having <q>#!/usr/bin/env fri</q> as its first line. Where this convention is understood, the CPL-to-C compilation command is

	cpl.fri &lt;source.cpl&gt;

On systems where the #! convention does not work as expected, this command must be expanded into

	fri cpl.fri &lt;source.cpl&gt;

All this is normally handled inside the <a href="#cpl">cpl</a> driver script; direct use of the cpl.fri command is not needed. 
</div><div class=page id="FRI-SECTION">
Page: (cpl)FRI SECTION,  Next: <a href="#cpl-info">cpl info</a>,  Prev: <a href="#cpl.fri">cpl.fri</a>,  Up: <a href="#cpl">cpl</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h4>Dynamic extension of the CPL language</h4>
FRI language excerpts may be inserted at any point of a CPL program block by the statement

	FRI SECTION
	&lt;FRI code&gt;
	END FRI SECTION

This has the effect of dynamically adding new statement constructions and for all purposes extending the syntax of the language (see <a href="fri.html#Top">(fri)Top</a>). Like everything else in CPL, the new extensions are available from the point where the FRI SECTION appears through the end of the enclosing block. 
</div><div class=page id="cpl-info">
Page: (cpl)cpl info,  Next: <a href="#mpicpl">mpicpl</a>,  Prev: <a href="#FRI-SECTION">FRI SECTION</a>,  Up: <a href="#Top">Top</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>info manual</h3>
A CPL manual in info format is available through GNU info. Its reading command is encapsulated as <q>cpl info</q>. Typing <q>cpl info</q> with no arguments takes you to the head of the file you are now reading. Typing <q>cpl info &lt;keyword&gt;</q> brings you help about a specific CPL keyword. 
</div><div class=page id="mpicpl">
Page: (cpl)mpicpl,  Next: <a href="#cpl-i">cpl i</a>,  Prev: <a href="#cpl-info">cpl info</a>,  Up: <a href="#Top">Top</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Compile mpi program</h3>
	mpicpl [make] &lt;program&gt;[.cpl] [options]

allows the compilation of MPI programs. It invokes cpl make with the required options, obtained from mpicc, and follows mpicc's same syntax (<a href="https://manpages.debian.org/mpicc.html">manpages.debian.org/mpicc.html</a>). 
</div><div class=page id="cpl-i">
Page: (cpl)cpl i,  Next: <a href="#Library">Library</a>,  Prev: <a href="#cpl-info">cpl info</a>,  Up: <a href="#Top">Top</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h2>Interactive CPL</h2>
The interactive CPL interpreter, accepting expressions, statements or commands at a console prompt, is launched by the command

	cpl i

(or just <q>cpl</q> when there are no arguments). Interactive cpl's syntax is totally compatible with CPL's. Any valid CPL statement is executable at the cpl&gt; prompt. As an extension, when an expression is typed alone at the cpl&gt; prompt a WRITE statement is implied, thus e.g. <q>2+2</q> is equivalent to <q>WRITE 2+2</q> and outputs <q>4</q>. In addition when a command is not recognized, it gets passed to the unix shell before giving up. A shell command can also be given explicitly by prefixing it with <q>:</q>. <q>?</q> brings this manual to you. 
 <nav><table>
<tr><th>Menu: <input autocomplete="off" class="filter" type="text" onkeyup="tsearch()" onfocus="this.value='';tsearch()" placeholder="a-z" title="Filter menu items by initials"></th><th></th></tr>
<tr><td colspan="2"> </td></tr>
<tr><td><a href="#cpl-i-commands">cpl i commands</a>:</td><td>interactive-cpl specific commands.</td></tr>
<tr><td><a href="#cpl-i-command-line">cpl i command line</a>:</td><td>arguments.</td></tr>
<tr><td><a href="#Syntax">syntax:Syntax</a>:</td><td>CPL language specification.  </td></tr>
<tr><td><a href="editor.html#Top">readline:(editor)</a>:</td><td>Console input editing keys.</td></tr>
</table></nav>

</div><div class=page id="cpl-i-commands">
Page: (cpl)cpl i commands,  Next: <a href="#Library">Library</a>,  Prev: <a href="#cpl-i">cpl i</a>,  Up: <a href="#Top">Top</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <nav><table>
<tr><th>Menu: <input autocomplete="off" class="filter" type="text" onkeyup="tsearch()" onfocus="this.value='';tsearch()" placeholder="a-z" title="Filter menu items by initials"></th><th>interactive-cpl specific commands:</th></tr>
<tr><td colspan="2"> </td></tr>
<tr><td><a href="#?">?</a>:</td><td>help</td></tr>
<tr><td><a href="#Top"></a>:</td><td>shell command</td></tr>
<tr><td><a href="#$">$</a>:</td><td>last result</td></tr>
<tr><td><a href="#command-interpretation">icpl:command interpretation</a>:</td><td>of a run-time generated CPL statement</td></tr>
<tr><td><a href="#clear">clear</a>:</td><td>cancel variable declaration and free its associated storage</td></tr>
<tr><td><a href="editor.html#readline">save:(editor)readline</a>:</td><td>save command history to file</td></tr>
<tr><td><a href="editor.html#readline">add:(editor)readline</a>:</td><td>add and execute command history from file</td></tr>
<tr><td><a href="editor.html#full-screen">edit:(editor)full-screen</a>:</td><td>open file in new full-screen window</td></tr>
<tr><td><a href="editor.html#full-screen">close:(editor)full-screen</a>:</td><td>close present full-screen window</td></tr>
<tr><td><a href="#Top">q:</a>:</td><td>exit interactive cpl (also :q, useful if q exists as a variable)</td></tr>
<tr><td colspan="2"> </td></tr>
<tr><td colspan="2">A powerful feature of interactive cpl is its capability to transparently </td></tr>
<tr><td colspan="2"><a href="#USE">USE</a> a compiled CPL program or #include (see <a href="#C-interface">C interface</a>) </td></tr>
<tr><td colspan="2">a compiled C program. All functions and variables in such programs become </td></tr>
<tr><td colspan="2">accessible at the cpl&gt; prompt as well as at the <a href="#?">?</a> request for info.

</td></tr>
<tr><td colspan="2">For interactive cpl to work, the Formal Rule Interpreter <a href="fri.html#Top">(fri)Top</a> must </td></tr>
<tr><td colspan="2">have been compiled with readline (see <a href="editor.html#Top">(editor)Top</a>) and dynamic loading </td></tr>
<tr><td colspan="2">(<a href="https://manpages/debian.org/dlopen.html">manpages/debian.org/dlopen.html</a>) support.

</td></tr>
<tr><td colspan="2">When either an interpreted or a compiled program is running under interactive </td></tr>
<tr><td colspan="2">cpl, <a href="#command-interpretation">command interpretation</a> becomes available inside the program, and </td></tr>
<tr><td colspan="2">typing ctrl-C opens up an <a href="#interactive-session">interactive session</a> instead of stopping it.

</td></tr>
<tr><td colspan="2">Console input functionality is extended under <a href="#cpl-i">cpl i</a>. An interactive cpl </td></tr>
<tr><td colspan="2">shell is opened whenever a (compiled or interpreted) program is waiting for </td></tr>
<tr><td colspan="2">input, and any number of icpl commands can be executed interactively. The first </td></tr>
<tr><td colspan="2">expression given alone on the command line, which would normally be printed, is </td></tr>
<tr><td colspan="2">instead returned as input to the waiting program. The simplest way to obtain </td></tr>
<tr><td colspan="2">such extended capabilities is to run &lt;program&gt; as &lt;cpl i program&gt;. </td></tr>
</table></nav>

</div><div class=page id="cpl-i-command-line">
Page: (cpl)cpl i command line,  Next: <a href="#?">?</a>,  Prev: <a href="#cpl-i-commands">cpl i commands</a>,  Up: <a href="#cpl-i">cpl i</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>The interactive-cpl command line</h3>
An interactive CPL command can alternately be specified on the cpl i command line, as in

	cpl i &lt;command&gt;

&lt;command&gt; may need to be quoted if it contains characters that are specially interpreted by the shell. If, either at the console prompt or on the command line, the name of a CPL file is given as a command without the <q>.cpl</q> extension, this source file is automatically compiled as necessary (if it is more recent than its executable), and then executed at compiled speed but with interpreted commands available. If the name of a CPL file is given as a command with the <q>.cpl</q> extension included, it is loaded and executed in the interpreter as when it appears in an <a href="#INCLUDE">INCLUDE</a> statement. Exploiting the unix interpreter convention, a CPL source program can be made directly executable by writing <q>#!/usr/bin/env cpl</q> as its first line and turning on the executable permission flag.

The

	cpl

command with no arguments launches an interactive cpl session.

<q>cpl i</q> followed by a CPL expression (possibly quoted to avoid interpretation by the shell) calculates and prints that expression.

<q>cpl i</q> followed by one or more CPL statements executes those statements and exits; however if a <q>-</q> precedes the list of statements, after executing those statements an interactive session is opened. For instance, a chosen set of libraries can be loaded by default in an interactive session, if desired, by defining an alias for <q>cpl i -USE &lt;libraries&gt;</q>. <q>cpl</q> with no arguments is equivalent to <q>cpl i -USE rbmat,cbmat,gnuplot,rtchecks</q>.

When the input of cpl i is redirected (or piped) from an alternate source, commands from that source are interpreted on a line-by-line basis. 
</div><div class=page id="?">
Page: (cpl)?,  Next: <a href="#shell-command">shell command</a>,  Prev: <a href="#cpl-i-command-line">cpl i command line</a>,  Up: <a href="#cpl-i">cpl i</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>The cpl help system</h3>
The ? command given at the cpl&gt; command prompt brings you to the Top of this info file. ? followed by any user-declared identifier or system-reserved keyword elicits related help. 
</div><div class=page id="shell-command">
Page: (cpl)shell command,  Next: <a href="#$">$</a>,  Prev: <a href="#?">?</a>,  Up: <a href="#cpl-i">cpl i</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Shell commands</h3>
Any command that is meaningless to interactive cpl, or not the name of a program to be executed, is passed on to the shell before giving up. Thus most shell commands can be given directly at the cpl&gt; prompt. In case of ambiguity, passing a command to the shell can be forced with

	:&lt;shell command&gt; 
</div><div class=page id="$">
Page: (cpl)$,  Next: <a href="#command-interpretation">command interpretation</a>,  Prev: <a href="#shell-command">shell command</a>,  Up: <a href="#cpl-i">cpl i</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Last result</h3>
Within an interactive cpl expression, the $ symbol stands for the last result printed out by a previous command. 
</div><div class=page id="command-interpretation">
Page: (cpl)command interpretation, Next: <a href="#interactive-session">interactive session</a>, Prev: <a href="#$">$</a>, Up: <a href="#cpl-i">cpl i</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Command interpretation</h3>
A statement contained in a string &lt;string&gt; can be executed just as it were typed at the cpl&gt; prompt by the statement

	icpl &lt;string&gt;

The icpl statement is available not only to interpreted but also to compiled programs, provided the latter are run under interactive cpl, thus enabling the on-the-fly execution of program-generated statements. All the global variables and subroutines defined in either the compiled or the interpreted part of the program are accessible to the run-time generated command. 
</div><div class=page id="interactive-session">
Page: (cpl)interactive session, Prev: <a href="#command-interpretation">command interpretation</a>, Up: <a href="#cpl-i">cpl i</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Interactive session</h3>
An interactive cpl session can be started in the middle of a running program either by the user typing ctrl-C at the controlling terminal (or any other process giving signal SIGINT), or by the program itself executing the statement

	icpl

The interactive session is available not only to interpreted but also to compiled programs, provided the latter are run under interactive cpl to start with. All the global variables and subroutines defined in either the compiled or the interpreted part of the program are accessible to the interactive session. 

The inner session thus opened is signalled by an additional <q>&gt;</q> in the command prompt, and can accept any interactive cpl command. Exiting this inner session with <q>exit</q> or <q>quit</q> resumes the suspended program, as also does pressing Enter alone on an empty line. The new commands

	kill 	or 	stop
  kill the interrupted program and return to the session where it was invoked. 
</div><div class=page id="Library">
Page: (cpl)Library,  Prev: <a href="#cpl-i">cpl i</a>,  Next: <a href="#rtchecks">rtchecks</a>,  Up: <a href="#Top">Top</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h2>Ready to <a href="#USE">USE</a> library of CPL modules</h2>
<nav><table>
<tr><th>Menu: <input autocomplete="off" class="filter" type="text" onkeyup="tsearch()" onfocus="this.value='';tsearch()" placeholder="a-z" title="Filter menu items by initials"></th><th>The following libraries are included with CPL:</th></tr>
<tr><td colspan="2"> </td></tr>
<tr><td><a href="#rtchecks">rtchecks</a>:</td><td>Run Time bounds Checking and more</td></tr>
<tr><td><a href="complex.html#Top">complex:(complex)</a>:</td><td>Complex numbers</td></tr>
<tr><td><a href="fft.html#Top">fft:(fft)</a>:</td><td>Fast Fourier Transforms</td></tr>
<tr><td><a href="matrix.html#Top">rbmat:(matrix)</a>:</td><td>Real square and Banded Matrix operations</td></tr>
<tr><td><a href="matrix.html#Top">cbmat:(matrix)</a>:</td><td>Complex square and Banded Matrix operations</td></tr>
<tr><td><a href="graphics.html#Top">graphics:(graphics)</a>:</td><td>plotting primitives using GNU plotutils</td></tr>
<tr><td><a href="graphics.html#nographics">nographics:(graphics)nographics</a>:</td><td>fake plotting package (does nothing)</td></tr>
<tr><td><a href="graphics.html#gnuplot">gnuplot:(graphics)gnuplot</a>:</td><td>plotting primitives rendered through gnuplot</td></tr>
<tr><td><a href="graphics.html#strlines">strlines:(graphics)strlines</a>:</td><td>Streamline plotting</td></tr>
<tr><td><a href="parallel.html#Top">parallel:(parallel)</a>:</td><td>Parallel computing</td></tr>
<tr><td><a href="parallel.html#nonparallel">nonparallel:(parallel)nonparallel</a>:</td><td>fake parallel package (does nothing)</td></tr>
<tr><td><a href="symbolic.html#Top">symbolic:(symbolic)</a>:</td><td>Symbolic differentiation</td></tr>
<tr><td><a href="#CHARbyCHAR">CHARbyCHAR</a>:</td><td>live keyboard input</td></tr>
<tr><td><a href="#INPUTREADY">inputready:INPUTREADY</a>:</td><td>test for input ready on a file descriptor or stdin</td></tr>
<tr><td><a href="#lapack-eigenvalues">lapack-eigenvalues</a>:</td><td>CPL wrapper around Lapack eigenvalue routines</td></tr>
<tr><td><a href="#matlib">matlib</a>:</td><td>Some basic matrix-defining functions</td></tr>
<tr><td><a href="#mpicpl">mpicpl</a>:</td><td>Compile with MPI options</td></tr>
<tr><td><a href="#OpenMP">OpenMP</a>:</td><td>CPL transparent OpenMP directives</td></tr>
<tr><td colspan="2"> </td></tr>
</table></nav>

</div><div class=page id="rtchecks">
Page: (cpl)rtchecks,  Next: <a href="complex.html#Top">(complex)</a>,  Prev: <a href="#Library">Library</a>,  Up: <a href="#Library">Library</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Run Time bounds Checking</h3>
The rtchecks.cpl library does not add any new subroutines or instructions, but modifies already existing ones in such a way as to provide run-time bounds checking. The impact on performance is considerable; therefore rtchecks should only (and always) be used during development and later disabled once the program is deemed to be reliable. In particular:

all array indexing and subarray extraction operations are bounds-checked, pointers are initialized to NULL and NULL-pointer dereferencing is trapped, all error messages are modified so as to display the position in the source code where the error occurred.

<nav><table>
<tr><th>Menu: <input autocomplete="off" class="filter" type="text" onkeyup="tsearch()" onfocus="this.value='';tsearch()" placeholder="a-z" title="Filter menu items by initials"></th><th>rtchecks specific commands</th></tr>
<tr><td colspan="2"> </td></tr>
<tr><td><a href="#TRACE">TRACE</a>:</td><td>ON			Turn execution tracing on</td></tr>
<tr><td><a href="#TRACE">TRACE</a>:</td><td>OFF			Turn execution tracing off</td></tr>
</table></nav>

</div><div class=page id="TRACE">
Page: (cpl)TRACE,  Prev: <a href="#rtchecks">rtchecks</a>,  Up: <a href="#rtchecks">rtchecks</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>TRACE ON/OFF (also abbreviated TRON/TROFF)</h3>
toggles execution tracing. When tracing is on, instructions from the source file are displayed in the upper part of the terminal screen while program output goes to the lower part (unless redirected to a file or to another terminal). Each block (e.g., subroutine or loop) of execution is displayed on a new line, thus the last instruction of each block is simultaneously within sight. Each line is prefixed by its source line number and repetition count. Immediate keypresses (with no Enter) alter tracing as follows:

  P,p: pause. Pause execution, or resume if paused.
  Q,q: quit. Interrupt the program and exit (C-c is remapped by interactive
    cpl, see below)
  T,t: TROFF. Turn tracing off and continue running as normal.
  C-c,I,i: Open an interactive cpl (<a href="#cpl-i">cpl i</a>) console inside the paused
	program, wherein global variables can be inspected or changed, and
	functions evaluated. Entering an empty line resumes execution. Only
	available if the program was run from icpl to start with (as in
	<q>cpl i &lt;program&gt;</q>).
  V,v: view. Open a vi window at the present line in the source code, which can
	be explored using all vi commands. Tracing resumes on exit.
	(vi command :q)
  &lt;space&gt;,S,s: single step. Advance by a single instruction through the code. 
  &lt;tab&gt;,F,f: finish. Finish the current block and resume tracing from the next
	instruction of the enclosing block.

Any other key displays a single-line reminder of the above. 
</div><div class=page id="CHARbyCHAR">
Page: (cpl)CHARbyCHAR, Next: <a href="#lapack-eigenvalues">lapack-eigenvalues</a>, Prev: <a href="symbolic.html#Top">(symbolic)</a>, Up: <a href="#Library">Library</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Live keyboard input</h3>
The CHARbyCHAR.cpl library contains the system calls (termios) necessary to activate unbuffered terminal input, so that the input of a single character may be read immediately (normally input is transferred from the terminal to the running program one line at a time, i.e. only when a newline is entered). USEing this library is all that is necessary. Input is then performed as usual. 
</div><div class=page id="lapack-eigenvalues">
Page: (cpl)lapack-eigenvalues,  Prev: <a href="#CHARbyCHAR">CHARbyCHAR</a>,  Next: <a href="#matlib">matlib</a>,  Up: <a href="#Library">Library</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>CPL wrapper around Lapack eigenvalue routines</h3>
defines:

<h4>INLINE ARRAY(A.LO..A.HI) OF COMPLEX FUNCTION eigenvalues(COMPLEX A(&lowast;,&lowast;))</h4>
<h4>INLINE ARRAY(A.LO..A.HI) OF COMPLEX FUNCTION eigenvalues(REAL A(&lowast;,&lowast;))</h4>
In order to use this library you must have the liblapack-dev Debian package (or one equivalent) installed. Please repeat the CPL setup after installing. 
</div><div class=page id="matlib">
Page: (cpl)matlib,  Prev: <a href="#lapack-eigenvalues">lapack-eigenvalues</a>,  Next: <a href="#OpenMP">OpenMP</a>,  Up: <a href="#Library">Library</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>Basic matrix-creating functions</h3>
The matlib.cpl library is used by the m2cpl script in order to translate simple MATLAB programs into their CPL equivalents.

Both matlib and m2cpl are in very preliminary development and only include the most basic functions. 
</div><div class=page id="OpenMP">
Page: (cpl)OpenMP,  Prev: <a href="#matlib">matlib</a>,  Up: <a href="#Library">Library</a> <a style="float:right" href="cpl.html#Keyword-Index">Index</a>
<hr> <h3>OpenMP transparent directives</h3>
OpenMP is a standard for parallel computation on shared-memory architectures. (see <a href="http://www.openmp.org">www.openmp.org</a>). It is built-in in many FORTRAN and C compilers, gcc included, and is activated through suitable command-line options. C-style OpenMP directives are transparently available in CPL. For example,

serial:

	LOOP FOR i=1 TO 1000000
	  a(i)=b(i)+c(i)
	REPEAT

parallel:

	#pragma omp parallel for
	LOOP FOR i=1 TO 1000000
	  a(i)=b(i)+c(i)
	REPEAT

Compile the parallel version as <q>cpl make &lt;program&gt; -fopenmp</q>.

Much of the same applies to OpenACC directives, another standard for parallel execution especially on GPUs, or in fact to any #pragma's that are construed similarly.

Implementation notes:
 1) If a parallel program is compiled without the -fopenmp option, #pragma is treated as a comment, that is you obtain the serial version of the program. This is intended and conforming to C behaviour.
 2) C compiler options, of which -fopenmp is one, must appear after &lt;program&gt; on the command line in order for them to be distinguished from cpl options (see <a href="#cpl">cpl</a>).
 3) The <q>omp for</q> directive can only be applied to a basic <q>LOOP FOR</q> construction (see <a href="#FOR">LOOP:FOR</a>.), which gets translated to <q>for</q> in the intermediate C code. Other types of LOOP or DO do not involve a <q>for</q> and are not recognized by OpenMP.
 4) If an <q>omp parallel</q> or other directive needs to be applied to a block of code that is not implicitly delimited by the subsequent instruction, this block can be delimited by <q>MODULE ... END MODULE</q> (see <a href="#MODULE">MODULE</a>).
 5) As an aid to directives that explicitly affect individual variables, if a CPL identifier is recognized in the parenthesized part of a #pragma, it gets translated to the corresponding C identifier; if this identifies a CPL ARRAY, its size and offset are automatically included in an OpenMP-compatible syntax. All other parts of the #pragma are copied verbatim. 
</div></body></html>
