<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>CPL on Macintosh</title>
    <meta name="author" content="Paolo Luchini">
    <meta name="copyright" content="Copyright 2020 Paolo Luchini">
    <meta name="description" content="Step by step instructions to use CPL on Apple macOS.">
    <meta name="keywords" content="cpl, CPL, numerical, computation, computational, code, program, programmer, programming language, compiler, command interpreter, text editor, fri, FRI, make, interactive, edit, Apple Macintosh, macOS, OSX">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="author" href="https://CPLcode.net/Paolo.Luchini">
    <link rel="canonical" href="https://CPLcode.net/macOS-howto">
    <link rel="stylesheet" href="singlecol.css">
    <link rel="stylesheet" href="copyable.css">
    <script src="clipboard.js">
    </script>
  </head>
  <body translate="no">
  <a href="./"><img id=seal src="images/CPL-logo.png" alt="CPL"></a>
  <div class=page itemscope itemtype="https://schema.org/HowTo">
    <h1 itemprop="name">CPL-on-Macintosh howto</h1>
    <p>Apple macOS or OS X is a proprietary unix operating system, derived from the old BSD unix, and has all the requirements for CPL tools and programs to run natively on it. However the classical unix programming tools are not part of the base system, but they are offered by Apple as a separate <q>Xcode</q> development environment. In addition CPL needs the <code>gcc</code> compiler, and although Xcode includes a C compiler named <code>gcc</code>, this is an Apple-modified version (also known as <code>clang</code>) and lacks some necessary gcc extensions. Unmodified <code>gcc</code> can be installed through a third-party package manager such as <a href="http://brew.sh">Homebrew</a>. Hence come the following</p>
    <h3 itemprop="headline">Step by step instructions to use CPL on Apple macOS</h3>
    <dl itemprop="step" itemscope itemtype="https://schema.org/HowToStep">
    <dt itemprop="name">1 - Open a terminal:</dt>
    <dd itemprop="text"> Click the terminal icon in your Dock, or if you lack such an icon enter <q>terminal</q> in the search box and click <q>terminal.app</q>.</dd>
    </dl>
    <dl itemprop="step" itemscope itemtype="https://schema.org/HowToStep">
    <dt itemprop="name">2 - Install Command Line Tools:</dt>
    <dd itemprop="text"><p>In a terminal execute the following click-to-copy line:</p>
    <pre class=copyable title="click to copy" onClick="CopyToClipboard(this)">xcode-select --install</pre>
    <p>A dialog box will pop up asking if you want to install the Command Line Developer Tools. Accept. If the box does not appear, you probably have them already. Alternately you can install the full Xcode development environment from the App Store, but only do so if you want this much larger package for its own purposes.</p></dd>
    </dl>
    <dl itemprop="step" itemscope itemtype="https://schema.org/HowToStep">
    <dt itemprop="name">3 - Install the Homebrew package manager.</dt>
    <dd itemprop="text">Execute the following click-to-copy line, which was copied from the <a href="https://brew.sh">brew.sh</a> website:
    <pre class=copyable title="click to copy" onClick="CopyToClipboard(this)">/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"</pre>
    </dd>
    </dl>
    <dl itemprop="step" itemscope itemtype="https://schema.org/HowToStep">
    <dt itemprop="name">4 - Bring <code>brew</code> up to date (the one just installed sometimes is not):</dt>
    <dd itemprop="text"><pre class=copyable title="click to copy" onClick="CopyToClipboard(this)">brew update; brew upgrade</pre>
    </dd>
    </dl>
    <dl itemprop="step" itemscope itemtype="https://schema.org/HowToStep">
    <dt itemprop="name">5 - Install the original <code>gcc</code> (the one provided by Apple is an alias for their own <code>clang</code>):</dt>
    <dd itemprop="text"><pre class=copyable title="click to copy" onClick="CopyToClipboard(this)">brew install gcc</pre>
    <p>You may have to close and re-open your terminal before the newly installed gcc becomes available.</p>
    </dd>
    </dl>
    <dl itemprop="step" itemscope itemtype="https://schema.org/HowToStep">
    <dt itemprop="name">6 - Download and unpack the CPL archive, with the <code>CC</code> environment variable pointing at the brew-installed C compiler (currently named <code>gcc-15</code>, but subject to change):</dt>
    <dd itemprop="text"><pre class=copyable title="click to copy" onClick="CopyToClipboard(this)" id="unpack">curl -fsS -o /tmp/unpack-cpl.sh https://CPLcode.net/version-archive/unpack-cpl.sh && env CC=gcc-15 sh /tmp/unpack-cpl.sh</pre>
    If your gcc version is not gcc-15, please replace gcc-15 by your own version before executing the above line. Also be aware that the plain <code>gcc</code> command invokes the Apple-modified gcc (aka <code>clang</code>) and not the Homebrew-installed one.
    </dd>
    </dl>
    <dl itemprop="step" itemscope itemtype="https://schema.org/HowToStep">
    <dt itemprop="name">7 - To activate CPL graphics, install package <code>gnuplot</code>. You can do it via Homebrew:</dt>
    <dd itemprop="text"><pre class=copyable title="click to copy" onClick="CopyToClipboard(this)">brew install gnuplot</pre>
    <p>or alternately find contributed macOS binaries on <a href="http://gnuplot.info">gnuplot's own website</a>.</p></dd>
    </dl>
    <dl itemprop="step" itemscope itemtype="https://schema.org/HowToStep">
    <dt itemprop="name">8 - In order to use the CPL editor effectively, you may want to tick the <q style="color:purple">Use Option as Meta key</q> box in your Mac Terminal Keyboard preferences.</dt>
    <dd itemprop="text">This allows the Option key to be used for entering Alt-&lt;letter&gt; editor commands.</dd>
    </dl>
    <p><strong>You are all set!</strong> Please notice that you may have to repeat steps 2 and 4 after a macOS version update. If you encounter problems, try to delete directory <code>/Library/Developer/CommandLineTools</code> before repeating step 2. Also notice that running a macOS-compiled CPL executable on bare macOS does not need any of the above procedure (save installing gnuplot if graphics are wanted). You only need to install gcc and the CPL tools when you want to edit, compile or interpret a CPL program, not to just run it.</p>
    <div id=snackbar>copied.</div>
    <footer>
      <p><a href="./Download">Back</a></p>
    </footer>
  </div>
  </body> 
</html>
